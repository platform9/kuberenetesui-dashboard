(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[719],{3891:Ae=>{self,Ae.exports=(()=>{"use strict";var fe={775:(Z,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.FitAddon=void 0;var H=function(){function a(){}return a.prototype.activate=function(g){this._terminal=g},a.prototype.dispose=function(){},a.prototype.fit=function(){var g=this.proposeDimensions();g&&this._terminal&&(this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(g.cols,g.rows)))},a.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var g=this._terminal._core;if(0!==g._renderService.dimensions.actualCellWidth&&0!==g._renderService.dimensions.actualCellHeight){var h=window.getComputedStyle(this._terminal.element.parentElement),p=parseInt(h.getPropertyValue("height")),_=Math.max(0,parseInt(h.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),S=p-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=_-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-g.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(d/g._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(S/g._renderService.dimensions.actualCellHeight))}}}},a}();$.FitAddon=H}},V={};return function Z($){if(V[$])return V[$].exports;var H=V[$]={exports:{}};return fe[$](H,H.exports,Z),H.exports}(775)})()},5544:Ae=>{self,Ae.exports=(()=>{"use strict";var fe={4567:function(H,a,g){var h,p=this&&this.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;var _=g(9042),u=g(6114),S=g(9924),d=g(3656),r=g(844),o=g(5596),l=g(9631),n=function(t){function e(i,s){var c=t.call(this)||this;c._terminal=i,c._renderService=s,c._liveRegionLineCount=0,c._charsToConsume=[],c._charsToAnnounce="",c._accessibilityTreeRoot=document.createElement("div"),c._accessibilityTreeRoot.classList.add("xterm-accessibility"),c._rowContainer=document.createElement("div"),c._rowContainer.setAttribute("role","list"),c._rowContainer.classList.add("xterm-accessibility-tree"),c._rowElements=[];for(var f=0;f<c._terminal.rows;f++)c._rowElements[f]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[f]);if(c._topBoundaryFocusListener=function(v){return c._onBoundaryFocus(v,0)},c._bottomBoundaryFocusListener=function(v){return c._onBoundaryFocus(v,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new S.TimeBasedDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(v){return c._onResize(v.rows)})),c.register(c._terminal.onRender(function(v){return c._refreshRows(v.start,v.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(v){return c._onChar(v)})),c.register(c._terminal.onLineFeed(function(){return c._onChar("\n")})),c.register(c._terminal.onA11yTab(function(v){return c._onTab(v)})),c.register(c._terminal.onKey(function(v){return c._onKey(v.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new o.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register(d.addDisposableDomListener(window,"resize",function(){return c._refreshRowsDimensions()})),c}return p(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),l.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(i,s){var c=i.target,f=this._rowElements[0===s?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")!==(0===s?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===f){var v,b;if(0===s?(v=c,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(v=this._rowElements.shift(),b=c,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),0===s){var y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else y=this._createAccessibilityTreeNode(),this._rowElements.push(y),this._rowContainer.appendChild(y);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===s?-1:1),this._rowElements[0===s?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},e.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},e.prototype._onTab=function(i){for(var s=0;s<i;s++)this._onChar(" ")},e.prototype._onChar=function(i){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,"\n"===i&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=_.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&l.removeElementFromParent(this._liveRegion)},e.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},e.prototype._refreshRows=function(i,s){this._renderRowsDebouncer.refresh(i,s,this._terminal.rows)},e.prototype._renderRows=function(i,s){for(var c=this._terminal.buffer,f=c.lines.length.toString(),v=i;v<=s;v++){var b=c.translateBufferLineToString(c.ydisp+v,!0),y=(c.ydisp+v+1).toString(),C=this._rowElements[v];C&&(0===b.length?C.innerText="\xa0":C.textContent=b,C.setAttribute("aria-posinset",y),C.setAttribute("aria-setsize",f))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},e.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(r.Disposable);a.AccessibilityManager=n},3614:(H,a)=>{function g(u){return u.replace(/\r?\n/g,"\r")}function h(u,S){return S?"\x1b[200~"+u+"\x1b[201~":u}function p(u,S,d){u=h(u=g(u),d.decPrivateModes.bracketedPasteMode),d.triggerDataEvent(u,!0),S.value=""}function _(u,S,d){var r=d.getBoundingClientRect(),o=u.clientX-r.left-10,l=u.clientY-r.top-10;S.style.width="20px",S.style.height="20px",S.style.left=o+"px",S.style.top=l+"px",S.style.zIndex="1000",S.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=g,a.bracketTextForPaste=h,a.copyHandler=function(u,S){u.clipboardData&&u.clipboardData.setData("text/plain",S.selectionText),u.preventDefault()},a.handlePasteEvent=function(u,S,d){u.stopPropagation(),u.clipboardData&&p(u.clipboardData.getData("text/plain"),S,d)},a.paste=p,a.moveTextAreaUnderMouseCursor=_,a.rightClickHandler=function(u,S,d,r,o){_(u,S,d),o&&r.rightClickSelect(u),S.value=r.selectionText,S.select()}},4774:(H,a)=>{var g,h,p,_,d;function u(d){var r=d.toString(16);return r.length<2?"0"+r:r}function S(d,r){return d<r?(r+.05)/(d+.05):(d+.05)/(r+.05)}Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=void 0,(d=g=a.channels||(a.channels={})).toCss=function(r,o,l,n){return void 0!==n?"#"+u(r)+u(o)+u(l)+u(n):"#"+u(r)+u(o)+u(l)},d.toRgba=function(r,o,l,n){return void 0===n&&(n=255),(r<<24|o<<16|l<<8|n)>>>0},(h=a.color||(a.color={})).blend=function(d,r){var o=(255&r.rgba)/255;if(1===o)return{css:r.css,rgba:r.rgba};var n=r.rgba>>16&255,t=r.rgba>>8&255,e=d.rgba>>24&255,i=d.rgba>>16&255,s=d.rgba>>8&255,c=e+Math.round(((r.rgba>>24&255)-e)*o),f=i+Math.round((n-i)*o),v=s+Math.round((t-s)*o);return{css:g.toCss(c,f,v),rgba:g.toRgba(c,f,v)}},h.isOpaque=function(d){return 255==(255&d.rgba)},h.ensureContrastRatio=function(d,r,o){var l=_.ensureContrastRatio(d.rgba,r.rgba,o);if(l)return _.toColor(l>>24&255,l>>16&255,l>>8&255)},h.opaque=function(d){var r=(255|d.rgba)>>>0,o=_.toChannels(r);return{css:g.toCss(o[0],o[1],o[2]),rgba:r}},h.opacity=function(d,r){var o=Math.round(255*r),l=_.toChannels(d.rgba),n=l[0],t=l[1],e=l[2];return{css:g.toCss(n,t,e,o),rgba:g.toRgba(n,t,e,o)}},(a.css||(a.css={})).toColor=function(d){switch(d.length){case 7:return{css:d,rgba:(parseInt(d.slice(1),16)<<8|255)>>>0};case 9:return{css:d,rgba:parseInt(d.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(d){function r(o,l,n){var t=o/255,e=l/255,i=n/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}d.relativeLuminance=function(o){return r(o>>16&255,o>>8&255,255&o)},d.relativeLuminance2=r}(p=a.rgb||(a.rgb={})),function(d){function r(l,n,t){for(var e=l>>24&255,i=l>>16&255,s=l>>8&255,c=n>>24&255,f=n>>16&255,v=n>>8&255,b=S(p.relativeLuminance2(c,v,f),p.relativeLuminance2(e,i,s));b<t&&(c>0||f>0||v>0);)c-=Math.max(0,Math.ceil(.1*c)),f-=Math.max(0,Math.ceil(.1*f)),v-=Math.max(0,Math.ceil(.1*v)),b=S(p.relativeLuminance2(c,v,f),p.relativeLuminance2(e,i,s));return(c<<24|f<<16|v<<8|255)>>>0}function o(l,n,t){for(var e=l>>24&255,i=l>>16&255,s=l>>8&255,c=n>>24&255,f=n>>16&255,v=n>>8&255,b=S(p.relativeLuminance2(c,v,f),p.relativeLuminance2(e,i,s));b<t&&(c<255||f<255||v<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),f=Math.min(255,f+Math.ceil(.1*(255-f))),v=Math.min(255,v+Math.ceil(.1*(255-v))),b=S(p.relativeLuminance2(c,v,f),p.relativeLuminance2(e,i,s));return(c<<24|f<<16|v<<8|255)>>>0}d.ensureContrastRatio=function(l,n,t){var e=p.relativeLuminance(l>>8),i=p.relativeLuminance(n>>8);if(S(e,i)<t)return i<e?r(l,n,t):o(l,n,t)},d.reduceLuminance=r,d.increaseLuminance=o,d.toChannels=function(l){return[l>>24&255,l>>16&255,l>>8&255,255&l]},d.toColor=function(l,n,t){return{css:g.toCss(l,n,t),rgba:g.toRgba(l,n,t)}}}(_=a.rgba||(a.rgba={})),a.toPaddedHex=u,a.contrastRatio=S},7239:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;var g=function(){function h(){this._color={},this._rgba={}}return h.prototype.clear=function(){this._color={},this._rgba={}},h.prototype.setCss=function(p,_,u){this._rgba[p]||(this._rgba[p]={}),this._rgba[p][_]=u},h.prototype.getCss=function(p,_){return this._rgba[p]?this._rgba[p][_]:void 0},h.prototype.setColor=function(p,_,u){this._color[p]||(this._color[p]={}),this._color[p][_]=u},h.prototype.getColor=function(p,_){return this._color[p]?this._color[p][_]:void 0},h}();a.ColorContrastCache=g},5680:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorManager=a.DEFAULT_ANSI_COLORS=void 0;var h=g(4774),p=g(7239),_=h.css.toColor("#ffffff"),u=h.css.toColor("#000000"),S=h.css.toColor("#ffffff"),d=h.css.toColor("#000000"),r={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var l=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],n=[0,95,135,175,215,255],t=0;t<216;t++){var e=n[t/36%6|0],i=n[t/6%6|0],s=n[t%6];l.push({css:h.channels.toCss(e,i,s),rgba:h.channels.toRgba(e,i,s)})}for(t=0;t<24;t++){var c=8+10*t;l.push({css:h.channels.toCss(c,c,c),rgba:h.channels.toRgba(c,c,c)})}return l}());var o=function(){function l(n,t){this.allowTransparency=t;var e=n.createElement("canvas");e.width=1,e.height=1;var i=e.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:_,background:u,cursor:S,cursorAccent:d,selectionTransparent:r,selectionOpaque:h.color.blend(u,r),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return l.prototype.onOptionsChange=function(n){"minimumContrastRatio"===n&&this._contrastCache.clear()},l.prototype.setTheme=function(n){void 0===n&&(n={}),this.colors.foreground=this._parseColor(n.foreground,_),this.colors.background=this._parseColor(n.background,u),this.colors.cursor=this._parseColor(n.cursor,S,!0),this.colors.cursorAccent=this._parseColor(n.cursorAccent,d,!0),this.colors.selectionTransparent=this._parseColor(n.selection,r,!0),this.colors.selectionOpaque=h.color.blend(this.colors.background,this.colors.selectionTransparent),h.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=h.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(n.black,a.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(n.red,a.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(n.green,a.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(n.yellow,a.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(n.blue,a.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(n.magenta,a.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(n.cyan,a.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(n.white,a.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(n.brightBlack,a.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(n.brightRed,a.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(n.brightGreen,a.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(n.brightYellow,a.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(n.brightBlue,a.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(n.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(n.brightCyan,a.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(n.brightWhite,a.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},l.prototype._parseColor=function(n,t,e){if(void 0===e&&(e=this.allowTransparency),void 0===n)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=n,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+n+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(255!==i[3]){if(!e)return console.warn("Color: "+n+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(C){return Number(C)}),c=s[0],f=s[1],v=s[2],y=Math.round(255*s[3]);return{rgba:h.channels.toRgba(c,f,v,y),css:n}}return{css:this._ctx.fillStyle,rgba:h.channels.toRgba(i[0],i[1],i[2],i[3])}},l}();a.ColorManager=o},9631:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeElementFromParent=void 0,a.removeElementFromParent=function(){for(var g,h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];for(var _=0,u=h;_<u.length;_++){var S=u[_];null===(g=null==S?void 0:S.parentElement)||void 0===g||g.removeChild(S)}}},3656:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(g,h,p,_){g.addEventListener(h,p,_);var u=!1;return{dispose:function(){u||(u=!0,g.removeEventListener(h,p,_))}}}},3551:function(H,a,g){var h=this&&this.__decorate||function(r,o,l,n){var t,e=arguments.length,i=e<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,o,l,n);else for(var s=r.length-1;s>=0;s--)(t=r[s])&&(i=(e<3?t(i):e>3?t(o,l,i):t(o,l))||i);return e>3&&i&&Object.defineProperty(o,l,i),i},p=this&&this.__param||function(r,o){return function(l,n){o(l,n,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZone=a.Linkifier=void 0;var _=g(8460),u=g(2585),S=function(){function r(o,l,n){this._bufferService=o,this._logService=l,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new _.EventEmitter,this._onHideLinkUnderline=new _.EventEmitter,this._onLinkTooltip=new _.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),r.prototype.attachToDom=function(o,l){this._element=o,this._mouseZoneManager=l},r.prototype.linkifyRows=function(o,l){var n=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=o,this._rowsToLinkify.end=l):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,o),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,l)),this._mouseZoneManager.clearAll(o,l),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return n._linkifyRows()},r._timeBeforeLatency))},r.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var o=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var l=o.ydisp+this._rowsToLinkify.start;if(!(l>=o.lines.length)){for(var n=o.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,l,n,t,t);e.hasNext();)for(var i=e.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},r.prototype.registerLinkMatcher=function(o,l,n){if(void 0===n&&(n={}),!l)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:o,handler:l,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(t),t.id},r.prototype._addLinkMatcherToList=function(o){if(0!==this._linkMatchers.length){for(var l=this._linkMatchers.length-1;l>=0;l--)if(o.priority<=this._linkMatchers[l].priority)return void this._linkMatchers.splice(l+1,0,o);this._linkMatchers.splice(0,0,o)}else this._linkMatchers.push(o)},r.prototype.deregisterLinkMatcher=function(o){for(var l=0;l<this._linkMatchers.length;l++)if(this._linkMatchers[l].id===o)return this._linkMatchers.splice(l,1),!0;return!1},r.prototype._doLinkifyRow=function(o,l,n){for(var t,e=this,i=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),s=-1,c=function(){var v=t["number"!=typeof n.matchIndex?0:n.matchIndex];if(!v)return f._logService.debug("match found without corresponding matchIndex",t,n),"break";if(s=l.indexOf(v,s+1),i.lastIndex=s+v.length,s<0)return"break";var b=f._bufferService.buffer.stringIndexToBufferIndex(o,s);if(b[0]<0)return"break";var y=f._bufferService.buffer.lines.get(b[0]);if(!y)return"break";var C=y.getFg(b[1]),m=C?C>>9&511:void 0;n.validationCallback?n.validationCallback(v,function(A){e._rowsTimeoutId||A&&e._addLink(b[1],b[0]-e._bufferService.buffer.ydisp,v,n,m)}):f._addLink(b[1],b[0]-f._bufferService.buffer.ydisp,v,n,m)},f=this;null!==(t=i.exec(l))&&"break"!==c(););},r.prototype._addLink=function(o,l,n,t,e){var i=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(n),c=o%this._bufferService.cols,f=l+Math.floor(o/this._bufferService.cols),v=(c+s)%this._bufferService.cols,b=f+Math.floor((c+s)/this._bufferService.cols);0===v&&(v=this._bufferService.cols,b--),this._mouseZoneManager.add(new d(c+1,f+1,v+1,b+1,function(y){if(t.handler)return t.handler(y,n);var C=window.open();C?(C.opener=null,C.location.href=n):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(c,f,v,b,e)),i._element.classList.add("xterm-cursor-pointer")},function(y){i._onLinkTooltip.fire(i._createLinkHoverEvent(c,f,v,b,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(y,n,{start:{x:c,y:f},end:{x:v,y:b}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(c,f,v,b,e)),i._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(y){return!t.willLinkActivate||t.willLinkActivate(y,n)}))}},r.prototype._createLinkHoverEvent=function(o,l,n,t,e){return{x1:o,y1:l,x2:n,y2:t,cols:this._bufferService.cols,fg:e}},r._timeBeforeLatency=200,r=h([p(0,u.IBufferService),p(1,u.ILogService),p(2,u.IUnicodeService)],r)}();a.Linkifier=S;var d=function(r,o,l,n,t,e,i,s,c){this.x1=r,this.y1=o,this.x2=l,this.y2=n,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=i,this.leaveCallback=s,this.willLinkActivate=c};a.MouseZone=d},6465:function(H,a,g){var h,p=this&&this.__extends||(h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},u=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;var S=g(2585),d=g(8460),r=g(844),o=g(3656),l=function(n){function t(e){var i=n.call(this)||this;return i._bufferService=e,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new d.EventEmitter),i._onHideLinkUnderline=i.register(new d.EventEmitter),i.register(r.getDisposeArrayDisposable(i._linkCacheDisposables)),i}return p(t,n),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var i=this;return this._linkProviders.push(e),{dispose:function(){var s=i._linkProviders.indexOf(e);-1!==s&&i._linkProviders.splice(s,1)}}},t.prototype.attachToDom=function(e,i,s){var c=this;this._element=e,this._mouseService=i,this._renderService=s,this.register(o.addDisposableDomListener(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register(o.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(o.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var s=e.composedPath(),c=0;c<s.length;c++){var f=s[c];if(f.classList.contains("xterm"))break;if(f.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,i){var s,c=this;this._activeProviderReplies&&i||(null===(s=this._activeProviderReplies)||void 0===s||s.forEach(function(v){null==v||v.forEach(function(b){b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var f=!1;this._linkProviders.forEach(function(v,b){var y;i?(null===(y=c._activeProviderReplies)||void 0===y?void 0:y.get(b))&&(f=c._checkLinkProviderResult(b,e,f)):v.provideLinks(e.y,function(C){var m,A;if(!c._isMouseOut){var E=null==C?void 0:C.map(function(x){return{link:x}});null===(m=c._activeProviderReplies)||void 0===m||m.set(b,E),f=c._checkLinkProviderResult(b,e,f),(null===(A=c._activeProviderReplies)||void 0===A?void 0:A.size)===c._linkProviders.length&&c._removeIntersectingLinks(e.y,c._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,i){for(var s=new Set,c=0;c<i.size;c++){var f=i.get(c);if(f)for(var v=0;v<f.length;v++)for(var b=f[v],C=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x,m=b.link.range.start.y<e?0:b.link.range.start.x;m<=C;m++){if(s.has(m)){f.splice(v--,1);break}s.add(m)}}},t.prototype._checkLinkProviderResult=function(e,i,s){var c,f=this;if(!this._activeProviderReplies)return s;for(var v=this._activeProviderReplies.get(e),b=!1,y=0;y<e;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(b=!0);if(!b&&v){var C=v.find(function(A){return f._linkAtPosition(A.link,i)});C&&(s=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(y=0;y<this._activeProviderReplies.size;y++){var m=null===(c=this._activeProviderReplies.get(y))||void 0===c?void 0:c.find(function(A){return f._linkAtPosition(A.link,i)});if(m){s=!0,this._handleNewLink(m);break}}return s},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,r.disposeArray(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var c,f;return null===(f=null===(c=i._currentLink)||void 0===c?void 0:c.state)||void 0===f?void 0:f.decorations.pointerCursor},set:function(c){var f,v;(null===(f=i._currentLink)||void 0===f?void 0:f.state)&&i._currentLink.state.decorations.pointerCursor!==c&&(i._currentLink.state.decorations.pointerCursor=c,i._currentLink.state.isHovered&&(null===(v=i._element)||void 0===v||v.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,f;return null===(f=null===(c=i._currentLink)||void 0===c?void 0:c.state)||void 0===f?void 0:f.decorations.underline},set:function(c){var f,v,b;(null===(f=i._currentLink)||void 0===f?void 0:f.state)&&(null===(b=null===(v=i._currentLink)||void 0===v?void 0:v.state)||void 0===b?void 0:b.decorations.underline)!==c&&(i._currentLink.state.decorations.underline=c,i._currentLink.state.isHovered&&i._fireUnderlineEvent(e.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(c){i._clearCurrentLink(0===c.start?0:c.start+1+i._bufferService.buffer.ydisp,c.end+1+i._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,i,s){var c;(null===(c=this._currentLink)||void 0===c?void 0:c.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)},t.prototype._fireUnderlineEvent=function(e,i){var s=e.range,c=this._bufferService.buffer.ydisp,f=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-c-1,s.end.x,s.end.y-c-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(f)},t.prototype._linkLeave=function(e,i,s){var c;(null===(c=this._currentLink)||void 0===c?void 0:c.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)},t.prototype._linkAtPosition=function(e,i){var c=e.range.start.y<i.y,f=e.range.end.y>i.y;return(e.range.start.y===e.range.end.y&&e.range.start.x<=i.x&&e.range.end.x>=i.x||c&&e.range.end.x>=i.x||f&&e.range.start.x<=i.x||c&&f)&&e.range.start.y<=i.y&&e.range.end.y>=i.y},t.prototype._positionFromMouseEvent=function(e,i,s){var c=s.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,i,s,c,f){return{x1:e,y1:i,x2:s,y2:c,cols:this._bufferService.cols,fg:f}},_([u(0,S.IBufferService)],t)}(r.Disposable);a.Linkifier2=l},9042:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(H,a,g){var h,p=this&&this.__extends||(h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},u=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZoneManager=void 0;var S=g(844),d=g(3656),r=g(4725),o=g(2585),l=function(n){function t(e,i,s,c,f,v){var b=n.call(this)||this;return b._element=e,b._screenElement=i,b._bufferService=s,b._mouseService=c,b._selectionService=f,b._optionsService=v,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register(d.addDisposableDomListener(b._element,"mousedown",function(y){return b._onMouseDown(y)})),b._mouseMoveListener=function(y){return b._onMouseMove(y)},b._mouseLeaveListener=function(y){return b._onMouseLeave(y)},b._clickListener=function(y){return b._onClick(y)},b}return p(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,i){if(0!==this._zones.length){e&&i||(e=0,i=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var c=this._zones[s];(c.y1>e&&c.y1<=i+1||c.y2>e&&c.y2<=i+1||c.y1<e&&c.y2>i+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var i=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(e);null==i||i.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(e);(null==i?void 0:i.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var i=this._findZoneEventAt(e),s=this._getSelectionLength();i&&s===this._initialSelectionLength&&(i.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var s=i[0],c=i[1],f=0;f<this._zones.length;f++){var v=this._zones[f];if(v.y1===v.y2){if(c===v.y1&&s>=v.x1&&s<v.x2)return v}else if(c===v.y1&&s>=v.x1||c===v.y2&&s<v.x2||c>v.y1&&c<v.y2)return v}},_([u(2,o.IBufferService),u(3,r.IMouseService),u(4,r.ISelectionService),u(5,o.IOptionsService)],t)}(S.Disposable);a.MouseZoneManager=l},6193:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0;var g=function(){function h(p){this._renderCallback=p}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.refresh=function(p,_,u){var S=this;this._rowCount=u,p=void 0!==p?p:0,_=void 0!==_?_:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,p):p,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return S._innerRefresh()}))},h.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var p=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(p,_)}},h}();a.RenderDebouncer=g},5596:function(H,a,g){var h,p=this&&this.__extends||(h=function(u,S){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(d[o]=r[o])})(u,S)},function(u,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function d(){this.constructor=u}h(u,S),u.prototype=null===S?Object.create(S):(d.prototype=S.prototype,new d)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;var _=function(u){function S(){var d=null!==u&&u.apply(this,arguments)||this;return d._currentDevicePixelRatio=window.devicePixelRatio,d}return p(S,u),S.prototype.setListener=function(d){var r=this;this._listener&&this.clearListener(),this._listener=d,this._outerListener=function(){r._listener&&(r._listener(window.devicePixelRatio,r._currentDevicePixelRatio),r._updateDpr())},this._updateDpr()},S.prototype.dispose=function(){u.prototype.dispose.call(this),this.clearListener()},S.prototype._updateDpr=function(){var d;this._outerListener&&(null===(d=this._resolutionMediaMatchList)||void 0===d||d.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},S.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},S}(g(844).Disposable);a.ScreenDprMonitor=_},3236:function(H,a,g){var h,p=this&&this.__extends||(h=function(K,M){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,D){T.__proto__=D}||function(T,D){for(var I in D)Object.prototype.hasOwnProperty.call(D,I)&&(T[I]=D[I])})(K,M)},function(K,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function T(){this.constructor=K}h(K,M),K.prototype=null===M?Object.create(M):(T.prototype=M.prototype,new T)});Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;var _=g(2950),u=g(1680),S=g(3614),d=g(2584),r=g(5435),o=g(3525),l=g(3551),n=g(9312),t=g(6114),e=g(3656),i=g(9042),s=g(357),c=g(6954),f=g(4567),v=g(1296),b=g(7399),y=g(8460),C=g(8437),m=g(5680),A=g(3230),E=g(4725),x=g(428),w=g(8934),L=g(6465),R=g(5114),k=g(8969),j=g(4774),W=g(4269),F="undefined"!=typeof window?window.document:null,N=function(K){function M(T){void 0===T&&(T={});var D=K.call(this,T)||this;return D.browser=t,D._keyDownHandled=!1,D._keyPressHandled=!1,D._unprocessedDeadKey=!1,D._onCursorMove=new y.EventEmitter,D._onKey=new y.EventEmitter,D._onRender=new y.EventEmitter,D._onSelectionChange=new y.EventEmitter,D._onTitleChange=new y.EventEmitter,D._onBell=new y.EventEmitter,D._onFocus=new y.EventEmitter,D._onBlur=new y.EventEmitter,D._onA11yCharEmitter=new y.EventEmitter,D._onA11yTabEmitter=new y.EventEmitter,D._setup(),D.linkifier=D._instantiationService.createInstance(l.Linkifier),D.linkifier2=D.register(D._instantiationService.createInstance(L.Linkifier2)),D.register(D._inputHandler.onRequestBell(function(){return D.bell()})),D.register(D._inputHandler.onRequestRefreshRows(function(I,O){return D.refresh(I,O)})),D.register(D._inputHandler.onRequestReset(function(){return D.reset()})),D.register(D._inputHandler.onRequestWindowsOptionsReport(function(I){return D._reportWindowsOptions(I)})),D.register(D._inputHandler.onAnsiColorChange(function(I){return D._changeAnsiColor(I)})),D.register(y.forwardEvent(D._inputHandler.onCursorMove,D._onCursorMove)),D.register(y.forwardEvent(D._inputHandler.onTitleChange,D._onTitleChange)),D.register(y.forwardEvent(D._inputHandler.onA11yChar,D._onA11yCharEmitter)),D.register(y.forwardEvent(D._inputHandler.onA11yTab,D._onA11yTabEmitter)),D.register(D._bufferService.onResize(function(I){return D._afterResize(I.cols,I.rows)})),D}return p(M,K),Object.defineProperty(M.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),M.prototype._changeAnsiColor=function(T){var D,I;if(this._colorManager){for(var O=0,q=T.colors;O<q.length;O++){var z=q[O],J=j.rgba.toColor(z.red,z.green,z.blue);this._colorManager.colors.ansi[z.colorIndex]=J}null===(D=this._renderService)||void 0===D||D.setColors(this._colorManager.colors),null===(I=this.viewport)||void 0===I||I.onThemeChange(this._colorManager.colors)}},M.prototype.dispose=function(){var T,D,I;this._isDisposed||(K.prototype.dispose.call(this),null===(T=this._renderService)||void 0===T||T.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(I=null===(D=this.element)||void 0===D?void 0:D.parentNode)||void 0===I||I.removeChild(this.element))},M.prototype._setup=function(){K.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(M.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),M.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},M.prototype._updateOptions=function(T){var D,I,O,q;switch(K.prototype._updateOptions.call(this,T),T){case"fontFamily":case"fontSize":null===(D=this._renderService)||void 0===D||D.clear(),null===(I=this._charSizeService)||void 0===I||I.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(O=this.viewport)||void 0===O||O.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)):(null===(q=this._accessibilityManager)||void 0===q||q.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},M.prototype._onTextAreaFocus=function(T){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(d.C0.ESC+"[I"),this.updateCursorStyle(T),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},M.prototype.blur=function(){var T;return null===(T=this.textarea)||void 0===T?void 0:T.blur()},M.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(d.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},M.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var D=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(D){var I=Math.min(this.buffer.x,this.cols-1),O=this._renderService.dimensions.actualCellHeight,q=D.getWidth(I),z=this._renderService.dimensions.actualCellWidth*q,J=this.buffer.y*this._renderService.dimensions.actualCellHeight;this.textarea.style.left=I*this._renderService.dimensions.actualCellWidth+"px",this.textarea.style.top=J+"px",this.textarea.style.width=z+"px",this.textarea.style.height=O+"px",this.textarea.style.lineHeight=O+"px",this.textarea.style.zIndex="-5"}}},M.prototype._initGlobal=function(){var T=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(I){T.hasSelection()&&S.copyHandler(I,T._selectionService)}));var D=function(I){return S.handlePasteEvent(I,T.textarea,T.coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",D)),this.register(e.addDisposableDomListener(this.element,"paste",D)),this.register(t.isFirefox?e.addDisposableDomListener(this.element,"mousedown",function(I){2===I.button&&S.rightClickHandler(I,T.textarea,T.screenElement,T._selectionService,T.options.rightClickSelectsWord)}):e.addDisposableDomListener(this.element,"contextmenu",function(I){S.rightClickHandler(I,T.textarea,T.screenElement,T._selectionService,T.options.rightClickSelectsWord)})),t.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(I){1===I.button&&S.moveTextAreaUnderMouseCursor(I,T.textarea,T.screenElement)}))},M.prototype._bindKeys=function(){var T=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(D){return T._keyUp(D)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(D){return T._keyDown(D)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(D){return T._keyPress(D)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return T._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(D){return T._compositionHelper.compositionupdate(D)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return T._compositionHelper.compositionend()})),this.register(e.addDisposableDomListener(this.textarea,"input",function(D){return T._inputEvent(D)},!0)),this.register(this.onRender(function(){return T._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(D){return T._queueLinkification(D.start,D.end)}))},M.prototype.open=function(T){var D=this;if(!T)throw new Error("Terminal requires a parent element.");T.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=T.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),T.appendChild(this.element);var I=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(z){return D._onTextAreaFocus(z)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return D._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var O=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,O),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new m.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(z){return D._colorManager.onOptionsChange(z)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(W.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var q=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(A.RenderService,q,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(z){return D._onRender.fire(z)})),this.onResize(function(z){return D._renderService.resize(z.cols,z.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,function(z){return D.scrollLines(z,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return D.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){D._renderService.onCursorMove(),D._syncTextArea()})),this.register(this.onResize(function(){return D._renderService.onResize(D.cols,D.rows)})),this.register(this.onBlur(function(){return D._renderService.onBlur()})),this.register(this.onFocus(function(){return D._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return D.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(n.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(z){return D.scrollLines(z.amount,z.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return D._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(z){return D._renderService.onSelectionChanged(z.start,z.end,z.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(z){D.textarea.value=z,D.textarea.focus(),D.textarea.select()})),this.register(this._onScroll.event(function(z){D.viewport.syncScrollArea(),D._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return D._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(c.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return D._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(z){return D._selectionService.onMouseDown(z)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},M.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(o.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(v.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},M.prototype._setTheme=function(T){var D,I,O;this._theme=T,null===(D=this._colorManager)||void 0===D||D.setTheme(T),null===(I=this._renderService)||void 0===I||I.setColors(this._colorManager.colors),null===(O=this.viewport)||void 0===O||O.onThemeChange(this._colorManager.colors)},M.prototype.bindMouse=function(){var T=this,D=this,I=this.element;function O(U){var X,re,se=D._mouseService.getRawByteCoords(U,D.screenElement,D.cols,D.rows);if(!se)return!1;switch(U.overrideType||U.type){case"mousemove":re=32,void 0===U.buttons?(X=3,void 0!==U.button&&(X=U.button<3?U.button:3)):X=1&U.buttons?0:4&U.buttons?1:2&U.buttons?2:3;break;case"mouseup":re=0,X=U.button<3?U.button:3;break;case"mousedown":re=1,X=U.button<3?U.button:3;break;case"wheel":0!==U.deltaY&&(re=U.deltaY<0?0:1),X=4;break;default:return!1}return!(void 0===re||void 0===X||X>4)&&D.coreMouseService.triggerMouseEvent({col:se.x-33,row:se.y-33,button:X,action:re,ctrl:U.ctrlKey,alt:U.altKey,shift:U.shiftKey})}var q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},z=function(U){return O(U),U.buttons||(T._document.removeEventListener("mouseup",q.mouseup),q.mousedrag&&T._document.removeEventListener("mousemove",q.mousedrag)),T.cancel(U)},J=function(U){return O(U),U.preventDefault(),T.cancel(U)},Q=function(U){U.buttons&&O(U)},ie=function(U){U.buttons||O(U)};this.register(this.coreMouseService.onProtocolChange(function(U){U?("debug"===T.optionsService.options.logLevel&&T._logService.debug("Binding to mouse events:",T.coreMouseService.explainEvents(U)),T.element.classList.add("enable-mouse-events"),T._selectionService.disable()):(T._logService.debug("Unbinding from mouse events."),T.element.classList.remove("enable-mouse-events"),T._selectionService.enable()),8&U?q.mousemove||(I.addEventListener("mousemove",ie),q.mousemove=ie):(I.removeEventListener("mousemove",q.mousemove),q.mousemove=null),16&U?q.wheel||(I.addEventListener("wheel",J,{passive:!1}),q.wheel=J):(I.removeEventListener("wheel",q.wheel),q.wheel=null),2&U?q.mouseup||(q.mouseup=z):(T._document.removeEventListener("mouseup",q.mouseup),q.mouseup=null),4&U?q.mousedrag||(q.mousedrag=Q):(T._document.removeEventListener("mousemove",q.mousedrag),q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(I,"mousedown",function(U){if(U.preventDefault(),T.focus(),T.coreMouseService.areMouseEventsActive&&!T._selectionService.shouldForceSelection(U))return O(U),q.mouseup&&T._document.addEventListener("mouseup",q.mouseup),q.mousedrag&&T._document.addEventListener("mousemove",q.mousedrag),T.cancel(U)})),this.register(e.addDisposableDomListener(I,"wheel",function(U){if(!q.wheel&&!T.buffer.hasScrollback){var X=T.viewport.getLinesScrolled(U);if(0===X)return;for(var re=d.C0.ESC+(T.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(U.deltaY<0?"A":"B"),se="",me=0;me<Math.abs(X);me++)se+=re;T.coreService.triggerDataEvent(se,!0)}},{passive:!0})),this.register(e.addDisposableDomListener(I,"wheel",function(U){if(!q.wheel)return T.viewport.onWheel(U)?void 0:T.cancel(U)},{passive:!1})),this.register(e.addDisposableDomListener(I,"touchstart",function(U){if(!T.coreMouseService.areMouseEventsActive)return T.viewport.onTouchStart(U),T.cancel(U)},{passive:!0})),this.register(e.addDisposableDomListener(I,"touchmove",function(U){if(!T.coreMouseService.areMouseEventsActive)return T.viewport.onTouchMove(U)?void 0:T.cancel(U)},{passive:!1}))},M.prototype.refresh=function(T,D){var I;null===(I=this._renderService)||void 0===I||I.refreshRows(T,D)},M.prototype._queueLinkification=function(T,D){var I;null===(I=this.linkifier)||void 0===I||I.linkifyRows(T,D)},M.prototype.updateCursorStyle=function(T){var D;(null===(D=this._selectionService)||void 0===D?void 0:D.shouldColumnSelect(T))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},M.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},M.prototype.scrollLines=function(T,D,I){void 0===I&&(I=0),K.prototype.scrollLines.call(this,T,D,I),this.refresh(0,this.rows-1)},M.prototype.paste=function(T){S.paste(T,this.textarea,this.coreService)},M.prototype.attachCustomKeyEventHandler=function(T){this._customKeyEventHandler=T},M.prototype.registerLinkMatcher=function(T,D,I){var O=this.linkifier.registerLinkMatcher(T,D,I);return this.refresh(0,this.rows-1),O},M.prototype.deregisterLinkMatcher=function(T){this.linkifier.deregisterLinkMatcher(T)&&this.refresh(0,this.rows-1)},M.prototype.registerLinkProvider=function(T){return this.linkifier2.registerLinkProvider(T)},M.prototype.registerCharacterJoiner=function(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var D=this._characterJoinerService.register(T);return this.refresh(0,this.rows-1),D},M.prototype.deregisterCharacterJoiner=function(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(T)&&this.refresh(0,this.rows-1)},Object.defineProperty(M.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),M.prototype.addMarker=function(T){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+T)},M.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},M.prototype.select=function(T,D,I){this._selectionService.setSelection(T,D,I)},M.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},M.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},M.prototype.clearSelection=function(){var T;null===(T=this._selectionService)||void 0===T||T.clearSelection()},M.prototype.selectAll=function(){var T;null===(T=this._selectionService)||void 0===T||T.selectAll()},M.prototype.selectLines=function(T,D){var I;null===(I=this._selectionService)||void 0===I||I.selectLines(T,D)},M.prototype._keyDown=function(T){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(T))return!1;if(!this._compositionHelper.keydown(T))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;"Dead"!==T.key&&"AltGraph"!==T.key||(this._unprocessedDeadKey=!0);var D=b.evaluateKeyboardEvent(T,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(T),3===D.type||2===D.type){var I=this.rows-1;return this.scrollLines(2===D.type?-I:I),this.cancel(T,!0)}return 1===D.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,T)||(D.cancel&&this.cancel(T,!0),!D.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(D.key!==d.C0.ETX&&D.key!==d.C0.CR||(this.textarea.value=""),this._onKey.fire({key:D.key,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(D.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(T,!0))))},M.prototype._isThirdLevelShift=function(T,D){var I=T.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||T.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||T.isWindows&&D.getModifierState("AltGraph");return"keypress"===D.type?I:I&&(!D.keyCode||D.keyCode>47)},M.prototype._keyUp=function(T){var D;this._customKeyEventHandler&&!1===this._customKeyEventHandler(T)||(16===(D=T).keyCode||17===D.keyCode||18===D.keyCode||this.focus(),this.updateCursorStyle(T),this._keyPressHandled=!1)},M.prototype._keyPress=function(T){var D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(T))return!1;if(this.cancel(T),T.charCode)D=T.charCode;else if(null==T.which)D=T.keyCode;else{if(0===T.which||0===T.charCode)return!1;D=T.which}return!(!D||(T.altKey||T.ctrlKey||T.metaKey)&&!this._isThirdLevelShift(this.browser,T)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,0))},M.prototype._inputEvent=function(T){return!(!T.data||"insertText"!==T.inputType||this.optionsService.options.screenReaderMode||this._keyPressHandled||(this.coreService.triggerDataEvent(T.data,!0),this.cancel(T),0))},M.prototype.bell=function(){var T;this._soundBell()&&(null===(T=this._soundService)||void 0===T||T.playBellSound()),this._onBell.fire()},M.prototype.resize=function(T,D){T!==this.cols||D!==this.rows?K.prototype.resize.call(this,T,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},M.prototype._afterResize=function(T,D){var I,O;null===(I=this._charSizeService)||void 0===I||I.measure(),null===(O=this.viewport)||void 0===O||O.syncScrollArea(!0)},M.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(C.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},M.prototype.reset=function(){var T,D;this.options.rows=this.rows,this.options.cols=this.cols;var I=this._customKeyEventHandler;this._setup(),K.prototype.reset.call(this),null===(T=this._selectionService)||void 0===T||T.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1),null===(D=this.viewport)||void 0===D||D.syncScrollArea()},M.prototype._reportWindowsOptions=function(T){if(this._renderService)switch(T){case r.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var D=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),I=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(d.C0.ESC+"[4;"+I+";"+D+"t");break;case r.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var O=this._renderService.dimensions.scaledCellWidth.toFixed(0),q=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(d.C0.ESC+"[6;"+q+";"+O+"t")}},M.prototype.cancel=function(T,D){if(this.options.cancelEvents||D)return T.preventDefault(),T.stopPropagation(),!1},M.prototype._visualBell=function(){return!1},M.prototype._soundBell=function(){return"sound"===this.options.bellStyle},M}(k.CoreTerminal);a.Terminal=N},9924:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0;var g=function(){function h(p,_){void 0===_&&(_=1e3),this._renderCallback=p,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return h.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},h.prototype.refresh=function(p,_,u){var S=this;this._rowCount=u,p=void 0!==p?p:0,_=void 0!==_?_:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,p):p,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,_):_;var d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=this._debounceThresholdMS-(d-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){S._lastRefreshMs=Date.now(),S._innerRefresh(),S._additionalRefreshRequested=!1,S._refreshTimeoutID=void 0},o)}},h.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var p=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(p,_)}},h}();a.TimeBasedDebouncer=g},1680:function(H,a,g){var h,p=this&&this.__extends||(h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},u=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;var S=g(844),d=g(3656),r=g(4725),o=g(2585),l=function(n){function t(e,i,s,c,f,v,b){var y=n.call(this)||this;return y._scrollLines=e,y._viewportElement=i,y._scrollArea=s,y._bufferService=c,y._optionsService=f,y._charSizeService=v,y._renderService=b,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._lastHadScrollBar=!1,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y._lastHadScrollBar=!0,y.register(d.addDisposableDomListener(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(C){return y._activeBuffer=C.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(C){return y._renderDimensions=C})),setTimeout(function(){return y.syncScrollArea()},0),y}return p(t,n),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var i=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this.scrollBarWidth=0===this._optionsService.options.scrollback?0:this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0,this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},t.prototype._bubbleScroll=function(e,i){return!(i<0&&0!==this._viewportElement.scrollTop||i>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var i=this._getPixelsScrolled(e);return 0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(this._wheelPartialScroll+=i/=this._currentRowHeight+0,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},t.prototype._applyScrollModifier=function(e,i){var s=this._optionsService.options.fastScrollModifier;return"alt"===s&&i.altKey||"ctrl"===s&&i.ctrlKey||"shift"===s&&i.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var i=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},_([u(3,o.IBufferService),u(4,o.IOptionsService),u(5,r.ICharSizeService),u(6,r.IRenderService)],t)}(S.Disposable);a.Viewport=l},2950:function(H,a,g){var h=this&&this.__decorate||function(d,r,o,l){var n,t=arguments.length,e=t<3?r:null===l?l=Object.getOwnPropertyDescriptor(r,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(d,r,o,l);else for(var i=d.length-1;i>=0;i--)(n=d[i])&&(e=(t<3?n(e):t>3?n(r,o,e):n(r,o))||e);return t>3&&e&&Object.defineProperty(r,o,e),e},p=this&&this.__param||function(d,r){return function(o,l){r(o,l,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;var _=g(4725),u=g(2585),S=function(){function d(r,o,l,n,t,e){this._textarea=r,this._compositionView=o,this._bufferService=l,this._optionsService=n,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(d.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),d.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},d.prototype.compositionupdate=function(r){var o=this;this._compositionView.textContent=r.data,this.updateCompositionElements(),setTimeout(function(){o._compositionPosition.end=o._textarea.value.length},0)},d.prototype.compositionend=function(){this._finalizeComposition(!0)},d.prototype.keydown=function(r){if(this._isComposing||this._isSendingComposition){if(229===r.keyCode||16===r.keyCode||17===r.keyCode||18===r.keyCode)return!1;this._finalizeComposition(!1)}return 229!==r.keyCode||(this._handleAnyTextareaChanges(),!1)},d.prototype._finalizeComposition=function(r){var o=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,r){var l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var t;o._isSendingComposition&&(o._isSendingComposition=!1,l.start+=o._dataAlreadySent.length,(t=o._isComposing?o._textarea.value.substring(l.start,l.end):o._textarea.value.substring(l.start)).length>0&&o._coreService.triggerDataEvent(t,!0))},0)}else{this._isSendingComposition=!1;var n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}},d.prototype._handleAnyTextareaChanges=function(){var r=this,o=this._textarea.value;setTimeout(function(){if(!r._isComposing){var l=r._textarea.value.replace(o,"");l.length>0&&(r._dataAlreadySent=l,r._coreService.triggerDataEvent(l,!0))}},0)},d.prototype.updateCompositionElements=function(r){var o=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=l*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}r||setTimeout(function(){return o.updateCompositionElements(!0)},0)}},h([p(2,u.IBufferService),p(3,u.IOptionsService),p(4,u.ICoreService),p(5,_.IRenderService)],d)}();a.CompositionHelper=S},9806:(H,a)=>{function g(h,p){var _=p.getBoundingClientRect();return[h.clientX-_.left,h.clientY-_.top]}Object.defineProperty(a,"__esModule",{value:!0}),a.getRawByteCoords=a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=g,a.getCoords=function(h,p,_,u,S,d,r,o){if(S){var l=g(h,p);if(l)return l[0]=Math.ceil((l[0]+(o?d/2:0))/d),l[1]=Math.ceil(l[1]/r),l[0]=Math.min(Math.max(l[0],1),_+(o?1:0)),l[1]=Math.min(Math.max(l[1],1),u),l}},a.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},9504:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;var h=g(2584);function p(o,l,n,t){var e=o-_(n,o),i=l-_(n,l);return r(Math.abs(e-i)-function(s,c,f){for(var v=0,b=s-_(f,s),y=c-_(f,c),C=0;C<Math.abs(b-y);C++){var m="A"===u(s,c)?-1:1,A=f.buffer.lines.get(b+m*C);A&&A.isWrapped&&v++}return v}(o,l,n),d(u(o,l),t))}function _(o,l){for(var n=0,t=o.buffer.lines.get(l),e=t&&t.isWrapped;e&&l>=0&&l<o.rows;)n++,e=(t=o.buffer.lines.get(--l))&&t.isWrapped;return n}function u(o,l){return o>l?"A":"B"}function S(o,l,n,t,e,i){for(var s=o,c=l,f="";s!==n||c!==t;)s+=e?1:-1,e&&s>i.cols-1?(f+=i.buffer.translateBufferLineToString(c,!1,o,s),s=0,o=0,c++):!e&&s<0&&(f+=i.buffer.translateBufferLineToString(c,!1,0,o+1),o=s=i.cols-1,c--);return f+i.buffer.translateBufferLineToString(c,!1,o,s)}function d(o,l){return h.C0.ESC+(l?"O":"[")+o}function r(o,l){o=Math.floor(o);for(var n="",t=0;t<o;t++)n+=l;return n}a.moveToCellSequence=function(o,l,n,t){var e,f,v,C,m,i=n.buffer.x,s=n.buffer.y;if(!n.buffer.hasScrollback)return f=i,(0===p(v=s,l,C=n,m=t).length?"":r(S(f,v,f,v-_(C,v),!1,C).length,d("D",m)))+p(s,l,n,t)+function(f,v,b,y,C,m){var A;A=p(v,y,C,m).length>0?y-_(C,y):v;var w,L,R,k,j,F,E=y,x=(w=f,L=v,F=p(R=b,k=y,j=C,m).length>0?k-_(j,k):L,w<R&&F<=k||w>=R&&F<k?"C":"D");return r(S(f,A,b,E,"C"===x,C).length,d(x,m))}(i,s,o,l,n,t);if(s===l)return e=i>o?"D":"C",r(Math.abs(i-o),d(e,t));e=s>l?"D":"C";var c=Math.abs(s-l);return r(function(f,v){return v.cols-f}(s>l?o:i,n)+(c-1)*n.cols+1+((s>l?i:o)-1),d(e,t))}},1546:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseRenderLayer=void 0;var h=g(643),p=g(8803),_=g(1420),u=g(3734),S=g(1752),d=g(4774),r=g(9631),o=g(8978),l=function(){function n(t,e,i,s,c,f,v,b){this._container=t,this._alpha=s,this._colors=c,this._rendererId=f,this._bufferService=v,this._optionsService=b,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return n.prototype.dispose=function(){var t;r.removeElementFromParent(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},n.prototype._initCanvas=function(){this._ctx=S.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},n.prototype.onOptionsChanged=function(){},n.prototype.onBlur=function(){},n.prototype.onFocus=function(){},n.prototype.onCursorMove=function(){},n.prototype.onGridChanged=function(t,e){},n.prototype.onSelectionChanged=function(t,e,i){void 0===i&&(i=!1)},n.prototype.setColors=function(t){this._refreshCharAtlas(t)},n.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},n.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=_.acquireCharAtlas(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},n.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},n.prototype._fillCells=function(t,e,i,s){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight)},n.prototype._fillMiddleLineAtCells=function(t,e,i){void 0===i&&(i=1);var s=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-s-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillBottomLineAtCells=function(t,e,i){void 0===i&&(i=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillLeftLineAtCell=function(t,e,i){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},n.prototype._strokeRectAtCell=function(t,e,i,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},n.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},n.prototype._clearCells=function(t,e,i,s){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight))},n.prototype._fillCharTrueColor=function(t,e,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(i);var s=!1;!1!==this._optionsService.options.customGlyphs&&(s=o.tryDrawCustomChar(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),s||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},n.prototype._drawChars=function(t,e,i){var s,c,f=this._getContrastColor(t);f||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,i,f):(t.isInverse()?(s=t.isBgDefault()?p.INVERTED_DEFAULT_COLOR:t.getBgColor(),c=t.isFgDefault()?p.INVERTED_DEFAULT_COLOR:t.getFgColor()):(c=t.isBgDefault()?h.DEFAULT_COLOR:t.getBgColor(),s=t.isFgDefault()?h.DEFAULT_COLOR:t.getFgColor()),s+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&s<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=c,this._currentGlyphIdentifier.fg=s,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,e,i))},n.prototype._drawUncachedChars=function(t,e,i,s){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline="ideographic",t.isInverse())if(s)this._ctx.fillStyle=s.css;else if(t.isBgDefault())this._ctx.fillStyle=d.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var c=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}else if(s)this._ctx.fillStyle=s.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var f=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&f<8&&(f+=8),this._ctx.fillStyle=this._colors.ansi[f].css}this._clipRow(i),t.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY);var v=!1;!1!==this._optionsService.options.customGlyphs&&(v=o.tryDrawCustomChar(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),v||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},n.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},n.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},n.prototype._getContrastColor=function(t){if(1!==this._optionsService.options.minimumContrastRatio){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(void 0!==e)return e||void 0;var i=t.getFgColor(),s=t.getFgColorMode(),c=t.getBgColor(),f=t.getBgColorMode(),v=!!t.isInverse(),b=!!t.isInverse();if(v){var y=i;i=c,c=y;var C=s;s=f,f=C}var m=this._resolveBackgroundRgba(f,c,v),A=this._resolveForegroundRgba(s,i,v,b),E=d.rgba.ensureContrastRatio(m,A,this._optionsService.options.minimumContrastRatio);if(E){var x={css:d.channels.toCss(E>>24&255,E>>16&255,E>>8&255),rgba:E};return this._colors.contrastCache.setColor(t.bg,t.fg,x),x}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},n.prototype._resolveBackgroundRgba=function(t,e,i){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},n.prototype._resolveForegroundRgba=function(t,e,i,s){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&s&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},n}();a.BaseRenderLayer=l},2512:function(H,a,g){var h,p=this&&this.__extends||(h=function(e,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])})(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}h(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(e,i,s,c){var f,v=arguments.length,b=v<3?i:null===c?c=Object.getOwnPropertyDescriptor(i,s):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,i,s,c);else for(var y=e.length-1;y>=0;y--)(f=e[y])&&(b=(v<3?f(b):v>3?f(i,s,b):f(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},u=this&&this.__param||function(e,i){return function(s,c){i(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CursorRenderLayer=void 0;var S=g(1546),d=g(511),r=g(2585),o=g(4725),l=600,n=function(e){function i(s,c,f,v,b,y,C,m,A){var E=e.call(this,s,"cursor",c,!0,f,v,y,C)||this;return E._onRequestRedraw=b,E._coreService=m,E._coreBrowserService=A,E._cell=new d.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return p(i,e),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},i.prototype.resize=function(s){e.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var s,c=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){c._render(!0)})):(null===(s=this._cursorBlinkStateManager)||void 0===s||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype.onGridChanged=function(s,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,f=c-this._bufferService.buffer.ydisp;if(f<0||f>=this._bufferService.rows)this._clearCursor();else{var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(c).loadCell(v,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var b=this._optionsService.options.cursorStyle;return b&&"block"!==b?this._cursorRenderers[b](v,f,this._cell):this._renderBlurCursor(v,f,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=f,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===v&&this._state.y===f&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](v,f,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=f,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(s,c,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,c,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(s,c,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,c,f.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(f,s,c),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(s,c,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,c),this._ctx.restore()},i.prototype._renderBlurCursor=function(s,c,f){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,c,f.getWidth(),1),this._ctx.restore()},_([u(5,r.IBufferService),u(6,r.IOptionsService),u(7,r.ICoreService),u(8,o.ICoreBrowserService)],i)}(S.BaseRenderLayer);a.CursorRenderLayer=n;var t=function(){function e(i,s){this._renderCallback=s,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},e.prototype._restartInterval=function(i){var s=this;void 0===i&&(i=l),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var c=l-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,c>0)return void s._restartInterval(c)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var f=l-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(f)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},l)},i)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(H,a,g)=>{var h,p,_,u,S,d,r,o,l,n,t,e,i,s,c,f,v,b,y,C,m,A,E,x,w,L,R,k,j,W,F,N,K,M,T,D,I,O,q,z,J,Q,ie,U,X,re,se,me,Mt,xt,At,kt,Rt,Tt,Dt,Ot,Bt,Pt,It,Ht,Ft,jt,ke,Re,Te,De,Oe,Be,Pe,Ie,He,Fe,je,We,Ue,qe,Ne,ze,Ke,Ve,Ge,Xe,Ye,Je,Ze,$e,Qe,et,tt,it,rt,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,St,Ct,bt,wt,Lt,Wt,Ut,qt,Nt,zt,Kt,Vt,Gt,Xt,Yt,Jt,Zt,$t,Qt,ei,ti;Object.defineProperty(a,"__esModule",{value:!0}),a.tryDrawCustomChar=a.boxDrawingDefinitions=a.blockElementDefinitions=void 0;var ni=g(1752);a.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258a":[{x:0,y:0,w:6,h:8}],"\u258b":[{x:0,y:0,w:5,h:8}],"\u258c":[{x:0,y:0,w:4,h:8}],"\u258d":[{x:0,y:0,w:3,h:8}],"\u258e":[{x:0,y:0,w:2,h:8}],"\u258f":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259a":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259b":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259c":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259d":[{x:4,y:0,w:4,h:4}],"\u259e":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259f":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1fb70}":[{x:1,y:0,w:1,h:8}],"\u{1fb71}":[{x:2,y:0,w:1,h:8}],"\u{1fb72}":[{x:3,y:0,w:1,h:8}],"\u{1fb73}":[{x:4,y:0,w:1,h:8}],"\u{1fb74}":[{x:5,y:0,w:1,h:8}],"\u{1fb75}":[{x:6,y:0,w:1,h:8}],"\u{1fb76}":[{x:0,y:1,w:8,h:1}],"\u{1fb77}":[{x:0,y:2,w:8,h:1}],"\u{1fb78}":[{x:0,y:3,w:8,h:1}],"\u{1fb79}":[{x:0,y:4,w:8,h:1}],"\u{1fb7a}":[{x:0,y:5,w:8,h:1}],"\u{1fb7b}":[{x:0,y:6,w:8,h:1}],"\u{1fb7c}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb7d}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7e}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7f}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb82}":[{x:0,y:0,w:8,h:2}],"\u{1fb83}":[{x:0,y:0,w:8,h:3}],"\u{1fb84}":[{x:0,y:0,w:8,h:5}],"\u{1fb85}":[{x:0,y:0,w:8,h:6}],"\u{1fb86}":[{x:0,y:0,w:8,h:7}],"\u{1fb87}":[{x:6,y:0,w:2,h:8}],"\u{1fb88}":[{x:5,y:0,w:3,h:8}],"\u{1fb89}":[{x:3,y:0,w:5,h:8}],"\u{1fb8a}":[{x:2,y:0,w:6,h:8}],"\u{1fb8b}":[{x:1,y:0,w:7,h:8}],"\u{1fb95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1fb96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1fb97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ai={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};a.boxDrawingDefinitions={"\u2500":(h={},h[1]="M0,.5 L1,.5",h),"\u2501":(p={},p[3]="M0,.5 L1,.5",p),"\u2502":(_={},_[1]="M.5,0 L.5,1",_),"\u2503":(u={},u[3]="M.5,0 L.5,1",u),"\u250c":(S={},S[1]="M0.5,1 L.5,.5 L1,.5",S),"\u250f":(d={},d[3]="M0.5,1 L.5,.5 L1,.5",d),"\u2510":(r={},r[1]="M0,.5 L.5,.5 L.5,1",r),"\u2513":(o={},o[3]="M0,.5 L.5,.5 L.5,1",o),"\u2514":(l={},l[1]="M.5,0 L.5,.5 L1,.5",l),"\u2517":(n={},n[3]="M.5,0 L.5,.5 L1,.5",n),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251b":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251c":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(s={},s[3]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2524":(c={},c[1]="M.5,0 L.5,1 M.5,.5 L0,.5",c),"\u252b":(f={},f[3]="M.5,0 L.5,1 M.5,.5 L0,.5",f),"\u252c":(v={},v[1]="M0,.5 L1,.5 M.5,.5 L.5,1",v),"\u2533":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2534":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"\u253b":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"\u253c":(m={},m[1]="M0,.5 L1,.5 M.5,0 L.5,1",m),"\u254b":(A={},A[3]="M0,.5 L1,.5 M.5,0 L.5,1",A),"\u2574":(E={},E[1]="M.5,.5 L0,.5",E),"\u2578":(x={},x[3]="M.5,.5 L0,.5",x),"\u2575":(w={},w[1]="M.5,.5 L.5,0",w),"\u2579":(L={},L[3]="M.5,.5 L.5,0",L),"\u2576":(R={},R[1]="M.5,.5 L1,.5",R),"\u257a":(k={},k[3]="M.5,.5 L1,.5",k),"\u2577":(j={},j[1]="M.5,.5 L.5,1",j),"\u257b":(W={},W[3]="M.5,.5 L.5,1",W),"\u2550":(F={},F[1]=function(P,B){return"M0,"+(.5-B)+" L1,"+(.5-B)+" M0,"+(.5+B)+" L1,"+(.5+B)},F),"\u2551":(N={},N[1]=function(P,B){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},N),"\u2552":(K={},K[1]=function(P,B){return"M.5,1 L.5,"+(.5-B)+" L1,"+(.5-B)+" M.5,"+(.5+B)+" L1,"+(.5+B)},K),"\u2553":(M={},M[1]=function(P,B){return"M"+(.5-P)+",1 L"+(.5-P)+",.5 L1,.5 M"+(.5+P)+",.5 L"+(.5+P)+",1"},M),"\u2554":(T={},T[1]=function(P,B){return"M1,"+(.5-B)+" L"+(.5-P)+","+(.5-B)+" L"+(.5-P)+",1 M1,"+(.5+B)+" L"+(.5+P)+","+(.5+B)+" L"+(.5+P)+",1"},T),"\u2555":(D={},D[1]=function(P,B){return"M0,"+(.5-B)+" L.5,"+(.5-B)+" L.5,1 M0,"+(.5+B)+" L.5,"+(.5+B)},D),"\u2556":(I={},I[1]=function(P,B){return"M"+(.5+P)+",1 L"+(.5+P)+",.5 L0,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1"},I),"\u2557":(O={},O[1]=function(P,B){return"M0,"+(.5+B)+" L"+(.5-P)+","+(.5+B)+" L"+(.5-P)+",1 M0,"+(.5-B)+" L"+(.5+P)+","+(.5-B)+" L"+(.5+P)+",1"},O),"\u2558":(q={},q[1]=function(P,B){return"M.5,0 L.5,"+(.5+B)+" L1,"+(.5+B)+" M.5,"+(.5-B)+" L1,"+(.5-B)},q),"\u2559":(z={},z[1]=function(P,B){return"M1,.5 L"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},z),"\u255a":(J={},J[1]=function(P,B){return"M1,"+(.5-B)+" L"+(.5+P)+","+(.5-B)+" L"+(.5+P)+",0 M1,"+(.5+B)+" L"+(.5-P)+","+(.5+B)+" L"+(.5-P)+",0"},J),"\u255b":(Q={},Q[1]=function(P,B){return"M0,"+(.5+B)+" L.5,"+(.5+B)+" L.5,0 M0,"+(.5-B)+" L.5,"+(.5-B)},Q),"\u255c":(ie={},ie[1]=function(P,B){return"M0,.5 L"+(.5+P)+",.5 L"+(.5+P)+",0 M"+(.5-P)+",.5 L"+(.5-P)+",0"},ie),"\u255d":(U={},U[1]=function(P,B){return"M0,"+(.5-B)+" L"+(.5-P)+","+(.5-B)+" L"+(.5-P)+",0 M0,"+(.5+B)+" L"+(.5+P)+","+(.5+B)+" L"+(.5+P)+",0"},U),"\u255e":(X={},X[1]=function(P,B){return"M.5,0 L.5,1 M.5,"+(.5-B)+" L1,"+(.5-B)+" M.5,"+(.5+B)+" L1,"+(.5+B)},X),"\u255f":(re={},re[1]=function(P,B){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1 M"+(.5+P)+",.5 L1,.5"},re),"\u2560":(se={},se[1]=function(P,B){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M1,"+(.5+B)+" L"+(.5+P)+","+(.5+B)+" L"+(.5+P)+",1 M1,"+(.5-B)+" L"+(.5+P)+","+(.5-B)+" L"+(.5+P)+",0"},se),"\u2561":(me={},me[1]=function(P,B){return"M.5,0 L.5,1 M0,"+(.5-B)+" L.5,"+(.5-B)+" M0,"+(.5+B)+" L.5,"+(.5+B)},me),"\u2562":(Mt={},Mt[1]=function(P,B){return"M0,.5 L"+(.5-P)+",.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},Mt),"\u2563":(xt={},xt[1]=function(P,B){return"M"+(.5+P)+",0 L"+(.5+P)+",1 M0,"+(.5+B)+" L"+(.5-P)+","+(.5+B)+" L"+(.5-P)+",1 M0,"+(.5-B)+" L"+(.5-P)+","+(.5-B)+" L"+(.5-P)+",0"},xt),"\u2564":(At={},At[1]=function(P,B){return"M0,"+(.5-B)+" L1,"+(.5-B)+" M0,"+(.5+B)+" L1,"+(.5+B)+" M.5,"+(.5+B)+" L.5,1"},At),"\u2565":(kt={},kt[1]=function(P,B){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1 M"+(.5+P)+",.5 L"+(.5+P)+",1"},kt),"\u2566":(Rt={},Rt[1]=function(P,B){return"M0,"+(.5-B)+" L1,"+(.5-B)+" M0,"+(.5+B)+" L"+(.5-P)+","+(.5+B)+" L"+(.5-P)+",1 M1,"+(.5+B)+" L"+(.5+P)+","+(.5+B)+" L"+(.5+P)+",1"},Rt),"\u2567":(Tt={},Tt[1]=function(P,B){return"M.5,0 L.5,"+(.5-B)+" M0,"+(.5-B)+" L1,"+(.5-B)+" M0,"+(.5+B)+" L1,"+(.5+B)},Tt),"\u2568":(Dt={},Dt[1]=function(P,B){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},Dt),"\u2569":(Ot={},Ot[1]=function(P,B){return"M0,"+(.5+B)+" L1,"+(.5+B)+" M0,"+(.5-B)+" L"+(.5-P)+","+(.5-B)+" L"+(.5-P)+",0 M1,"+(.5-B)+" L"+(.5+P)+","+(.5-B)+" L"+(.5+P)+",0"},Ot),"\u256a":(Bt={},Bt[1]=function(P,B){return"M.5,0 L.5,1 M0,"+(.5-B)+" L1,"+(.5-B)+" M0,"+(.5+B)+" L1,"+(.5+B)},Bt),"\u256b":(Pt={},Pt[1]=function(P,B){return"M0,.5 L1,.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},Pt),"\u256c":(It={},It[1]=function(P,B){return"M0,"+(.5+B)+" L"+(.5-P)+","+(.5+B)+" L"+(.5-P)+",1 M1,"+(.5+B)+" L"+(.5+P)+","+(.5+B)+" L"+(.5+P)+",1 M0,"+(.5-B)+" L"+(.5-P)+","+(.5-B)+" L"+(.5-P)+",0 M1,"+(.5-B)+" L"+(.5+P)+","+(.5-B)+" L"+(.5+P)+",0"},It),"\u2571":(Ht={},Ht[1]="M1,0 L0,1",Ht),"\u2572":(Ft={},Ft[1]="M0,0 L1,1",Ft),"\u2573":(jt={},jt[1]="M1,0 L0,1 M0,0 L1,1",jt),"\u257c":(ke={},ke[1]="M.5,.5 L0,.5",ke[3]="M.5,.5 L1,.5",ke),"\u257d":(Re={},Re[1]="M.5,.5 L.5,0",Re[3]="M.5,.5 L.5,1",Re),"\u257e":(Te={},Te[1]="M.5,.5 L1,.5",Te[3]="M.5,.5 L0,.5",Te),"\u257f":(De={},De[1]="M.5,.5 L.5,1",De[3]="M.5,.5 L.5,0",De),"\u250d":(Oe={},Oe[1]="M.5,.5 L.5,1",Oe[3]="M.5,.5 L1,.5",Oe),"\u250e":(Be={},Be[1]="M.5,.5 L1,.5",Be[3]="M.5,.5 L.5,1",Be),"\u2511":(Pe={},Pe[1]="M.5,.5 L.5,1",Pe[3]="M.5,.5 L0,.5",Pe),"\u2512":(Ie={},Ie[1]="M.5,.5 L0,.5",Ie[3]="M.5,.5 L.5,1",Ie),"\u2515":(He={},He[1]="M.5,.5 L.5,0",He[3]="M.5,.5 L1,.5",He),"\u2516":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,.5 L.5,0",Fe),"\u2519":(je={},je[1]="M.5,.5 L.5,0",je[3]="M.5,.5 L0,.5",je),"\u251a":(We={},We[1]="M.5,.5 L0,.5",We[3]="M.5,.5 L.5,0",We),"\u251d":(Ue={},Ue[1]="M.5,0 L.5,1",Ue[3]="M.5,.5 L1,.5",Ue),"\u251e":(qe={},qe[1]="M0.5,1 L.5,.5 L1,.5",qe[3]="M.5,.5 L.5,0",qe),"\u251f":(Ne={},Ne[1]="M.5,0 L.5,.5 L1,.5",Ne[3]="M.5,.5 L.5,1",Ne),"\u2520":(ze={},ze[1]="M.5,.5 L1,.5",ze[3]="M.5,0 L.5,1",ze),"\u2521":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,0 L.5,.5 L1,.5",Ke),"\u2522":(Ve={},Ve[1]="M.5,.5 L.5,0",Ve[3]="M0.5,1 L.5,.5 L1,.5",Ve),"\u2525":(Ge={},Ge[1]="M.5,0 L.5,1",Ge[3]="M.5,.5 L0,.5",Ge),"\u2526":(Xe={},Xe[1]="M0,.5 L.5,.5 L.5,1",Xe[3]="M.5,.5 L.5,0",Xe),"\u2527":(Ye={},Ye[1]="M.5,0 L.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2528":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,0 L.5,1",Je),"\u2529":(Ze={},Ze[1]="M.5,.5 L.5,1",Ze[3]="M.5,0 L.5,.5 L0,.5",Ze),"\u252a":($e={},$e[1]="M.5,.5 L.5,0",$e[3]="M0,.5 L.5,.5 L.5,1",$e),"\u252d":(Qe={},Qe[1]="M0.5,1 L.5,.5 L1,.5",Qe[3]="M.5,.5 L0,.5",Qe),"\u252e":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,.5 L1,.5",et),"\u252f":(tt={},tt[1]="M.5,.5 L.5,1",tt[3]="M0,.5 L1,.5",tt),"\u2530":(it={},it[1]="M0,.5 L1,.5",it[3]="M.5,.5 L.5,1",it),"\u2531":(rt={},rt[1]="M.5,.5 L1,.5",rt[3]="M0,.5 L.5,.5 L.5,1",rt),"\u2532":(nt={},nt[1]="M.5,.5 L0,.5",nt[3]="M0.5,1 L.5,.5 L1,.5",nt),"\u2535":(ot={},ot[1]="M.5,0 L.5,.5 L1,.5",ot[3]="M.5,.5 L0,.5",ot),"\u2536":(st={},st[1]="M.5,0 L.5,.5 L0,.5",st[3]="M.5,.5 L1,.5",st),"\u2537":(at={},at[1]="M.5,.5 L.5,0",at[3]="M0,.5 L1,.5",at),"\u2538":(ct={},ct[1]="M0,.5 L1,.5",ct[3]="M.5,.5 L.5,0",ct),"\u2539":(lt={},lt[1]="M.5,.5 L1,.5",lt[3]="M.5,0 L.5,.5 L0,.5",lt),"\u253a":(ht={},ht[1]="M.5,.5 L0,.5",ht[3]="M.5,0 L.5,.5 L1,.5",ht),"\u253d":(ut={},ut[1]="M.5,0 L.5,1 M.5,.5 L1,.5",ut[3]="M.5,.5 L0,.5",ut),"\u253e":(ft={},ft[1]="M.5,0 L.5,1 M.5,.5 L0,.5",ft[3]="M.5,.5 L1,.5",ft),"\u253f":(_t={},_t[1]="M.5,0 L.5,1",_t[3]="M0,.5 L1,.5",_t),"\u2540":(dt={},dt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",dt[3]="M.5,.5 L.5,0",dt),"\u2541":(pt={},pt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",pt[3]="M.5,.5 L.5,1",pt),"\u2542":(vt={},vt[1]="M0,.5 L1,.5",vt[3]="M.5,0 L.5,1",vt),"\u2543":(gt={},gt[1]="M0.5,1 L.5,.5 L1,.5",gt[3]="M.5,0 L.5,.5 L0,.5",gt),"\u2544":(yt={},yt[1]="M0,.5 L.5,.5 L.5,1",yt[3]="M.5,0 L.5,.5 L1,.5",yt),"\u2545":(mt={},mt[1]="M.5,0 L.5,.5 L1,.5",mt[3]="M0,.5 L.5,.5 L.5,1",mt),"\u2546":(St={},St[1]="M.5,0 L.5,.5 L0,.5",St[3]="M0.5,1 L.5,.5 L1,.5",St),"\u2547":(Ct={},Ct[1]="M.5,.5 L.5,1",Ct[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Ct),"\u2548":(bt={},bt[1]="M.5,.5 L.5,0",bt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",bt),"\u2549":(wt={},wt[1]="M.5,.5 L1,.5",wt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",wt),"\u254a":(Lt={},Lt[1]="M.5,.5 L0,.5",Lt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Lt),"\u254c":(Wt={},Wt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Wt),"\u254d":(Ut={},Ut[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Ut),"\u2504":(qt={},qt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",qt),"\u2505":(Nt={},Nt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Nt),"\u2508":(zt={},zt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",zt),"\u2509":(Kt={},Kt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Kt),"\u254e":(Vt={},Vt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Vt),"\u254f":(Gt={},Gt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Gt),"\u2506":(Xt={},Xt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Xt),"\u2507":(Yt={},Yt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Yt),"\u250a":(Jt={},Jt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Jt),"\u250b":(Zt={},Zt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Zt),"\u256d":($t={},$t[1]="C.5,1,.5,.5,1,.5",$t),"\u256e":(Qt={},Qt[1]="C.5,1,.5,.5,0,.5",Qt),"\u256f":(ei={},ei[1]="C.5,0,.5,.5,0,.5",ei),"\u2570":(ti={},ti[1]="C.5,0,.5,.5,1,.5",ti)},a.tryDrawCustomChar=function(P,B,ae,we,Le,Y){var ce=a.blockElementDefinitions[B];if(ce)return function(ee,he,Me,xe,Se,Ce){for(var ne=0;ne<he.length;ne++){var te=he[ne],G=Se/8,ue=Ce/8;ee.fillRect(Me+te.x*G,xe+te.y*ue,te.w*G,te.h*ue)}}(P,ce,ae,we,Le,Y),!0;var le=ai[B];if(le)return function(ee,he,Me,xe,Se,Ce){var ne,te=oi.get(he);te||(te=new Map,oi.set(he,te));var G=ee.fillStyle;if("string"!=typeof G)throw new Error('Unexpected fillStyle type "'+G+'"');var ue=te.get(G);if(!ue){var oe=he[0].length,de=he.length,pe=document.createElement("canvas");pe.width=oe,pe.height=de;var Et=ni.throwIfFalsy(pe.getContext("2d")),_e=new ImageData(oe,de),be=void 0,ve=void 0,ii=void 0,ri=void 0;if(G.startsWith("#"))be=parseInt(G.substr(1,2),16),ve=parseInt(G.substr(3,2),16),ii=parseInt(G.substr(5,2),16),ri=G.length>7&&parseInt(G.substr(7,2),16)||1;else{if(!G.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+G+'" when drawing pattern glyph');be=(ne=G.substring(5,G.length-1).split(",").map(function(hi){return parseFloat(hi)}))[0],ve=ne[1],ii=ne[2],ri=ne[3]}for(var ge=0;ge<de;ge++)for(var ye=0;ye<oe;ye++)_e.data[4*(ge*oe+ye)]=be,_e.data[4*(ge*oe+ye)+1]=ve,_e.data[4*(ge*oe+ye)+2]=ii,_e.data[4*(ge*oe+ye)+3]=he[ge][ye]*(255*ri);Et.putImageData(_e,0,0),ue=ni.throwIfFalsy(ee.createPattern(pe,null)),te.set(G,ue)}ee.fillStyle=ue,ee.fillRect(Me,xe,Se,Ce)}(P,le,ae,we,Le,Y),!0;var Ee=a.boxDrawingDefinitions[B];return!!Ee&&(function(ee,he,Me,xe,Se,Ce){ee.strokeStyle=ee.fillStyle;for(var ne=0,te=Object.entries(he);ne<te.length;ne++){var G=te[ne],ue=G[0],oe=G[1];ee.beginPath(),ee.lineWidth=window.devicePixelRatio*Number.parseInt(ue);for(var de=0,pe=("function"==typeof oe?oe(.15,.15/Ce*Se):oe).split(" ");de<pe.length;de++){var Et=pe[de],_e=Et[0],be=ci[_e];if(be){var ve=Et.substring(1).split(",");ve[0]&&ve[1]&&be(ee,li(ve,Se,Ce,Me,xe))}else console.error('Could not find drawing instructions for "'+_e+'"')}ee.stroke(),ee.closePath()}}(P,Ee,ae,we,Le,Y),!0)};var oi=new Map;function si(P,B,ae){return void 0===ae&&(ae=0),Math.max(Math.min(P,B),ae)}var ci={C:function(P,B){return P.bezierCurveTo(B[0],B[1],B[2],B[3],B[4],B[5])},L:function(P,B){return P.lineTo(B[0],B[1])},M:function(P,B){return P.moveTo(B[0],B[1])}};function li(P,B,ae,we,Le){var Y=P.map(function(Ee){return parseFloat(Ee)||parseInt(Ee)});if(Y.length<2)throw new Error("Too few arguments for instruction");for(var ce=0;ce<Y.length;ce+=2)Y[ce]*=B,0!==Y[ce]&&(Y[ce]=si(Math.round(Y[ce]+.5)-.5,B,0)),Y[ce]+=we;for(var le=1;le<Y.length;le+=2)Y[le]*=ae,0!==Y[le]&&(Y[le]=si(Math.round(Y[le]+.5)-.5,ae,0)),Y[le]+=Le;return Y}},3700:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GridCache=void 0;var g=function(){function h(){this.cache=[]}return h.prototype.resize=function(p,_){for(var u=0;u<p;u++){this.cache.length<=u&&this.cache.push([]);for(var S=this.cache[u].length;S<_;S++)this.cache[u].push(void 0);this.cache[u].length=_}this.cache.length=p},h.prototype.clear=function(){for(var p=0;p<this.cache.length;p++)for(var _=0;_<this.cache[p].length;_++)this.cache[p][_]=void 0},h}();a.GridCache=g},5098:function(H,a,g){var h,p=this&&this.__extends||(h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},u=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.LinkRenderLayer=void 0;var S=g(1546),d=g(8803),r=g(2040),o=g(2585),l=function(n){function t(e,i,s,c,f,v,b,y){var C=n.call(this,e,"link",i,!0,s,c,b,y)||this;return f.onShowLinkUnderline(function(m){return C._onShowLinkUnderline(m)}),f.onHideLinkUnderline(function(m){return C._onHideLinkUnderline(m)}),v.onShowLinkUnderline(function(m){return C._onShowLinkUnderline(m)}),v.onHideLinkUnderline(function(m){return C._onHideLinkUnderline(m)}),C}return p(t,n),t.prototype.resize=function(e){n.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(this._ctx.fillStyle=e.fg===d.INVERTED_DEFAULT_COLOR?this._colors.background.css:e.fg&&r.is256Color(e.fg)?this._colors.ansi[e.fg].css:this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var i=e.y1+1;i<e.y2;i++)this._fillBottomLineAtCells(0,i,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},_([u(6,o.IBufferService),u(7,o.IOptionsService)],t)}(S.BaseRenderLayer);a.LinkRenderLayer=l},3525:function(H,a,g){var h,p=this&&this.__extends||(h=function(f,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(b[C]=y[C])})(f,v)},function(f,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function b(){this.constructor=f}h(f,v),f.prototype=null===v?Object.create(v):(b.prototype=v.prototype,new b)}),_=this&&this.__decorate||function(f,v,b,y){var C,m=arguments.length,A=m<3?v:null===y?y=Object.getOwnPropertyDescriptor(v,b):y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(f,v,b,y);else for(var E=f.length-1;E>=0;E--)(C=f[E])&&(A=(m<3?C(A):m>3?C(v,b,A):C(v,b))||A);return m>3&&A&&Object.defineProperty(v,b,A),A},u=this&&this.__param||function(f,v){return function(b,y){v(b,y,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Renderer=void 0;var S=g(9596),d=g(4149),r=g(2512),o=g(5098),l=g(844),n=g(4725),t=g(2585),e=g(1420),i=g(8460),s=1,c=function(f){function v(b,y,C,m,A,E,x,w){var L=f.call(this)||this;return L._colors=b,L._screenElement=y,L._bufferService=E,L._charSizeService=x,L._optionsService=w,L._id=s++,L._onRequestRedraw=new i.EventEmitter,L._renderLayers=[A.createInstance(S.TextRenderLayer,L._screenElement,0,L._colors,L._optionsService.options.allowTransparency,L._id),A.createInstance(d.SelectionRenderLayer,L._screenElement,1,L._colors,L._id),A.createInstance(o.LinkRenderLayer,L._screenElement,2,L._colors,L._id,C,m),A.createInstance(r.CursorRenderLayer,L._screenElement,3,L._colors,L._id,L._onRequestRedraw)],L.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},L._devicePixelRatio=window.devicePixelRatio,L._updateDimensions(),L.onOptionsChanged(),L}return p(v,f),Object.defineProperty(v.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){for(var b=0,y=this._renderLayers;b<y.length;b++)y[b].dispose();f.prototype.dispose.call(this),e.removeTerminalFromCache(this._id)},v.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},v.prototype.setColors=function(b){this._colors=b;for(var y=0,C=this._renderLayers;y<C.length;y++){var m=C[y];m.setColors(this._colors),m.reset()}},v.prototype.onResize=function(b,y){this._updateDimensions();for(var C=0,m=this._renderLayers;C<m.length;C++)m[C].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},v.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},v.prototype.onBlur=function(){this._runOperation(function(b){return b.onBlur()})},v.prototype.onFocus=function(){this._runOperation(function(b){return b.onFocus()})},v.prototype.onSelectionChanged=function(b,y,C){void 0===C&&(C=!1),this._runOperation(function(m){return m.onSelectionChanged(b,y,C)})},v.prototype.onCursorMove=function(){this._runOperation(function(b){return b.onCursorMove()})},v.prototype.onOptionsChanged=function(){this._runOperation(function(b){return b.onOptionsChanged()})},v.prototype.clear=function(){this._runOperation(function(b){return b.reset()})},v.prototype._runOperation=function(b){for(var y=0,C=this._renderLayers;y<C.length;y++)b(C[y])},v.prototype.renderRows=function(b,y){for(var C=0,m=this._renderLayers;C<m.length;C++)m[C].onGridChanged(b,y)},v.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},_([u(4,t.IInstantiationService),u(5,t.IBufferService),u(6,n.ICharSizeService),u(7,t.IOptionsService)],v)}(l.Disposable);a.Renderer=c},1752:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.throwIfFalsy=void 0,a.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g}},4149:function(H,a,g){var h,p=this&&this.__extends||(h=function(o,l){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(o,l)},function(o,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function n(){this.constructor=o}h(o,l),o.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}),_=this&&this.__decorate||function(o,l,n,t){var e,i=arguments.length,s=i<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,l,n,t);else for(var c=o.length-1;c>=0;c--)(e=o[c])&&(s=(i<3?e(s):i>3?e(l,n,s):e(l,n))||s);return i>3&&s&&Object.defineProperty(l,n,s),s},u=this&&this.__param||function(o,l){return function(n,t){l(n,t,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionRenderLayer=void 0;var S=g(1546),d=g(2585),r=function(o){function l(n,t,e,i,s,c){var f=o.call(this,n,"selection",t,!0,e,i,s,c)||this;return f._clearState(),f}return p(l,o),l.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},l.prototype.resize=function(n){o.prototype.resize.call(this,n),this._clearState()},l.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},l.prototype.onSelectionChanged=function(n,t,e){if(this._didStateChange(n,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),n&&t){var i=n[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,c=Math.max(i,0),f=Math.min(s,this._bufferService.rows-1);if(c>=this._bufferService.rows||f<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var v=n[0];this._fillCells(v,c,t[0]-v,f-c+1)}else{this._fillCells(v=i===c?n[0]:0,c,(c===s?t[0]:this._bufferService.cols)-v,1);var m=Math.max(f-c-1,0);this._fillCells(0,c+1,this._bufferService.cols,m),c!==f&&this._fillCells(0,f,s===f?t[0]:this._bufferService.cols,1)}this._state.start=[n[0],n[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},l.prototype._didStateChange=function(n,t,e,i){return!this._areCoordinatesEqual(n,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||i!==this._state.ydisp},l.prototype._areCoordinatesEqual=function(n,t){return!(!n||!t)&&n[0]===t[0]&&n[1]===t[1]},_([u(4,d.IBufferService),u(5,d.IOptionsService)],l)}(S.BaseRenderLayer);a.SelectionRenderLayer=r},9596:function(H,a,g){var h,p=this&&this.__extends||(h=function(s,c){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(f[b]=v[b])})(s,c)},function(s,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=s}h(s,c),s.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)}),_=this&&this.__decorate||function(s,c,f,v){var b,y=arguments.length,C=y<3?c:null===v?v=Object.getOwnPropertyDescriptor(c,f):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C=Reflect.decorate(s,c,f,v);else for(var m=s.length-1;m>=0;m--)(b=s[m])&&(C=(y<3?b(C):y>3?b(c,f,C):b(c,f))||C);return y>3&&C&&Object.defineProperty(c,f,C),C},u=this&&this.__param||function(s,c){return function(f,v){c(f,v,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.TextRenderLayer=void 0;var S=g(3700),d=g(1546),r=g(3734),o=g(643),l=g(511),n=g(2585),t=g(4725),e=g(4269),i=function(s){function c(f,v,b,y,C,m,A,E){var x=s.call(this,f,"text",v,y,b,C,m,A)||this;return x._characterJoinerService=E,x._characterWidth=0,x._characterFont="",x._characterOverlapCache={},x._workCell=new l.CellData,x._state=new S.GridCache,x}return p(c,s),c.prototype.resize=function(f){s.prototype.resize.call(this,f);var v=this._getFont(!1,!1);this._characterWidth===f.scaledCharWidth&&this._characterFont===v||(this._characterWidth=f.scaledCharWidth,this._characterFont=v,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},c.prototype.reset=function(){this._state.clear(),this._clearAll()},c.prototype._forEachCell=function(f,v,b){for(var y=f;y<=v;y++)for(var C=y+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.lines.get(C),A=this._characterJoinerService.getJoinedCharacters(C),E=0;E<this._bufferService.cols;E++){m.loadCell(E,this._workCell);var x=this._workCell,w=!1,L=E;if(0!==x.getWidth()){if(A.length>0&&E===A[0][0]){w=!0;var R=A.shift();x=new e.JoinedCellData(this._workCell,m.translateToString(!0,R[0],R[1]),R[1]-R[0]),L=R[1]-1}!w&&this._isOverlapping(x)&&L<m.length-1&&m.getCodePoint(L+1)===o.NULL_CELL_CODE&&(x.content&=-12582913,x.content|=2<<22),b(x,E,y),E=L}}},c.prototype._drawBackground=function(f,v){var b=this,y=this._ctx,C=this._bufferService.cols,m=0,A=0,E=null;y.save(),this._forEachCell(f,v,function(x,w,L){var R=null;x.isInverse()?R=x.isFgDefault()?b._colors.foreground.css:x.isFgRGB()?"rgb("+r.AttributeData.toColorRGB(x.getFgColor()).join(",")+")":b._colors.ansi[x.getFgColor()].css:x.isBgRGB()?R="rgb("+r.AttributeData.toColorRGB(x.getBgColor()).join(",")+")":x.isBgPalette()&&(R=b._colors.ansi[x.getBgColor()].css),null===E&&(m=w,A=L),L!==A?(y.fillStyle=E||"",b._fillCells(m,A,C-m,1),m=w,A=L):E!==R&&(y.fillStyle=E||"",b._fillCells(m,A,w-m,1),m=w,A=L),E=R}),null!==E&&(y.fillStyle=E,this._fillCells(m,A,C-m,1)),y.restore()},c.prototype._drawForeground=function(f,v){var b=this;this._forEachCell(f,v,function(y,C,m){if(!y.isInvisible()&&(b._drawChars(y,C,m),y.isUnderline()||y.isStrikethrough())){if(b._ctx.save(),y.isInverse())if(y.isBgDefault())b._ctx.fillStyle=b._colors.background.css;else if(y.isBgRGB())b._ctx.fillStyle="rgb("+r.AttributeData.toColorRGB(y.getBgColor()).join(",")+")";else{var A=y.getBgColor();b._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&A<8&&(A+=8),b._ctx.fillStyle=b._colors.ansi[A].css}else if(y.isFgDefault())b._ctx.fillStyle=b._colors.foreground.css;else if(y.isFgRGB())b._ctx.fillStyle="rgb("+r.AttributeData.toColorRGB(y.getFgColor()).join(",")+")";else{var E=y.getFgColor();b._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&E<8&&(E+=8),b._ctx.fillStyle=b._colors.ansi[E].css}y.isStrikethrough()&&b._fillMiddleLineAtCells(C,m,y.getWidth()),y.isUnderline()&&b._fillBottomLineAtCells(C,m,y.getWidth()),b._ctx.restore()}})},c.prototype.onGridChanged=function(f,v){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,f,this._bufferService.cols,v-f+1),this._drawBackground(f,v),this._drawForeground(f,v))},c.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},c.prototype._isOverlapping=function(f){if(1!==f.getWidth()||f.getCode()<256)return!1;var v=f.getChars();if(this._characterOverlapCache.hasOwnProperty(v))return this._characterOverlapCache[v];this._ctx.save(),this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(v).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[v]=b,b},_([u(5,n.IBufferService),u(6,n.IOptionsService),u(7,t.ICharacterJoinerService)],c)}(d.BaseRenderLayer);a.TextRenderLayer=i},9616:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseCharAtlas=void 0;var g=function(){function h(){this._didWarmUp=!1}return h.prototype.dispose=function(){},h.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},h.prototype._doWarmUp=function(){},h.prototype.beginFrame=function(){},h}();a.BaseCharAtlas=g},1420:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeTerminalFromCache=a.acquireCharAtlas=void 0;var h=g(2040),p=g(1906),_=[];a.acquireCharAtlas=function(u,S,d,r,o){for(var l=h.generateConfig(r,o,u,d),n=0;n<_.length;n++){var t=(e=_[n]).ownedBy.indexOf(S);if(t>=0){if(h.configEquals(e.config,l))return e.atlas;1===e.ownedBy.length?(e.atlas.dispose(),_.splice(n,1)):e.ownedBy.splice(t,1);break}}for(n=0;n<_.length;n++){var e=_[n];if(h.configEquals(e.config,l))return e.ownedBy.push(S),e.atlas}var i={atlas:new p.DynamicCharAtlas(document,l),config:l,ownedBy:[S]};return _.push(i),i.atlas},a.removeTerminalFromCache=function(u){for(var S=0;S<_.length;S++){var d=_[S].ownedBy.indexOf(u);if(-1!==d){1===_[S].ownedBy.length?(_[S].atlas.dispose(),_.splice(S,1)):_[S].ownedBy.splice(d,1);break}}}},2040:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.is256Color=a.configEquals=a.generateConfig=void 0;var h=g(643);a.generateConfig=function(p,_,u,S){return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:_,fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight,fontWeightBold:u.fontWeightBold,allowTransparency:u.allowTransparency,colors:{foreground:S.foreground,background:S.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:S.ansi}}},a.configEquals=function(p,_){for(var u=0;u<p.colors.ansi.length;u++)if(p.colors.ansi[u].rgba!==_.colors.ansi[u].rgba)return!1;return p.devicePixelRatio===_.devicePixelRatio&&p.fontFamily===_.fontFamily&&p.fontSize===_.fontSize&&p.fontWeight===_.fontWeight&&p.fontWeightBold===_.fontWeightBold&&p.allowTransparency===_.allowTransparency&&p.scaledCharWidth===_.scaledCharWidth&&p.scaledCharHeight===_.scaledCharHeight&&p.colors.foreground===_.colors.foreground&&p.colors.background===_.colors.background},a.is256Color=function(p){return p<h.DEFAULT_COLOR}},8803:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR_ATLAS_CELL_SPACING=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0,a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.CHAR_ATLAS_CELL_SPACING=1},1906:function(H,a,g){var h,p=this&&this.__extends||(h=function(c,f){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(v[y]=b[y])})(c,f)},function(c,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=c}h(c,f),c.prototype=null===f?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(a,"__esModule",{value:!0}),a.NoneCharAtlas=a.DynamicCharAtlas=a.getGlyphCacheKey=void 0;var _=g(8803),u=g(9616),S=g(5680),d=g(7001),r=g(6114),o=g(1752),l=g(4774),n={css:"rgba(0, 0, 0, 0)",rgba:0};function t(c){return c.code<<21|c.bg<<12|c.fg<<3|(c.bold?0:4)+(c.dim?0:2)+(c.italic?0:1)}a.getGlyphCacheKey=t;var e=function(c){function f(v,b){var y=c.call(this)||this;y._config=b,y._drawToCacheCount=0,y._glyphsWaitingOnBitmap=[],y._bitmapCommitTimeout=null,y._bitmap=null,y._cacheCanvas=v.createElement("canvas"),y._cacheCanvas.width=1024,y._cacheCanvas.height=1024,y._cacheCtx=o.throwIfFalsy(y._cacheCanvas.getContext("2d",{alpha:!0}));var C=v.createElement("canvas");C.width=y._config.scaledCharWidth,C.height=y._config.scaledCharHeight,y._tmpCtx=o.throwIfFalsy(C.getContext("2d",{alpha:y._config.allowTransparency})),y._width=Math.floor(1024/y._config.scaledCharWidth),y._height=Math.floor(1024/y._config.scaledCharHeight);var m=y._width*y._height;return y._cacheMap=new d.LRUMap(m),y._cacheMap.prealloc(m),y}return p(f,c),f.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},f.prototype.beginFrame=function(){this._drawToCacheCount=0},f.prototype.draw=function(v,b,y,C){if(32===b.code)return!0;if(!this._canCache(b))return!1;var m=t(b),A=this._cacheMap.get(m);if(null!=A)return this._drawFromCache(v,A,y,C),!0;if(this._drawToCacheCount<100){var E;E=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var x=this._drawToCache(b,E);return this._cacheMap.set(m,x),this._drawFromCache(v,x,y,C),!0}return!1},f.prototype._canCache=function(v){return v.code<256},f.prototype._toCoordinateX=function(v){return v%this._width*this._config.scaledCharWidth},f.prototype._toCoordinateY=function(v){return Math.floor(v/this._width)*this._config.scaledCharHeight},f.prototype._drawFromCache=function(v,b,y,C){if(!b.isEmpty){var m=this._toCoordinateX(b.index),A=this._toCoordinateY(b.index);v.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,m,A,this._config.scaledCharWidth,this._config.scaledCharHeight,y,C,this._config.scaledCharWidth,this._config.scaledCharHeight)}},f.prototype._getColorFromAnsiIndex=function(v){return v<this._config.colors.ansi.length?this._config.colors.ansi[v]:S.DEFAULT_ANSI_COLORS[v]},f.prototype._getBackgroundColor=function(v){return this._config.allowTransparency?n:v.bg===_.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:v.bg<256?this._getColorFromAnsiIndex(v.bg):this._config.colors.background},f.prototype._getForegroundColor=function(v){return v.fg===_.INVERTED_DEFAULT_COLOR?l.color.opaque(this._config.colors.background):v.fg<256?this._getColorFromAnsiIndex(v.fg):this._config.colors.foreground},f.prototype._drawToCache=function(v,b){this._drawToCacheCount++,this._tmpCtx.save();var y=this._getBackgroundColor(v);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=y.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(v.italic?"italic":"")+" "+(v.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(v).css,v.dim&&(this._tmpCtx.globalAlpha=_.DIM_OPACITY),this._tmpCtx.fillText(v.chars,0,this._config.scaledCharHeight);var A=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),E=!1;if(this._config.allowTransparency||(E=s(A,y)),E&&"_"===v.chars&&!this._config.allowTransparency)for(var x=1;x<=5&&(this._tmpCtx.fillText(v.chars,0,this._config.scaledCharHeight-x),E=s(A=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),y));x++);this._tmpCtx.restore();var w=this._toCoordinateX(b),L=this._toCoordinateY(b);this._cacheCtx.putImageData(A,w,L);var R={index:b,isEmpty:E,inBitmap:!1};return this._addGlyphToBitmap(R),R},f.prototype._addGlyphToBitmap=function(v){var b=this;!("createImageBitmap"in window)||r.isFirefox||r.isSafari||(this._glyphsWaitingOnBitmap.push(v),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))},f.prototype._generateBitmap=function(){var v=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(y){v._bitmap=y;for(var C=0;C<b.length;C++)b[C].inBitmap=!0}),this._bitmapCommitTimeout=null},f}(u.BaseCharAtlas);a.DynamicCharAtlas=e;var i=function(c){function f(v,b){return c.call(this)||this}return p(f,c),f.prototype.draw=function(v,b,y,C){return!1},f}(u.BaseCharAtlas);function s(c,f){for(var v=!0,b=f.rgba>>>24,y=f.rgba>>>16&255,C=f.rgba>>>8&255,m=0;m<c.data.length;m+=4)c.data[m]===b&&c.data[m+1]===y&&c.data[m+2]===C?c.data[m+3]=0:v=!1;return v}a.NoneCharAtlas=i},7001:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LRUMap=void 0;var g=function(){function h(p){this.capacity=p,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return h.prototype._unlinkNode=function(p){var _=p.prev,u=p.next;p===this._head&&(this._head=u),p===this._tail&&(this._tail=_),null!==_&&(_.next=u),null!==u&&(u.prev=_)},h.prototype._appendNode=function(p){var _=this._tail;null!==_&&(_.next=p),p.prev=_,p.next=null,this._tail=p,null===this._head&&(this._head=p)},h.prototype.prealloc=function(p){for(var _=this._nodePool,u=0;u<p;u++)_.push({prev:null,next:null,key:null,value:null})},h.prototype.get=function(p){var _=this._map[p];return void 0!==_?(this._unlinkNode(_),this._appendNode(_),_.value):null},h.prototype.peekValue=function(p){var _=this._map[p];return void 0!==_?_.value:null},h.prototype.peek=function(){var p=this._head;return null===p?null:p.value},h.prototype.set=function(p,_){var u=this._map[p];if(void 0!==u)this._unlinkNode(u=this._map[p]),u.value=_;else if(this.size>=this.capacity)this._unlinkNode(u=this._head),delete this._map[u.key],u.key=p,u.value=_,this._map[p]=u;else{var S=this._nodePool;S.length>0?((u=S.pop()).key=p,u.value=_):u={prev:null,next:null,key:p,value:_},this._map[p]=u,this.size++}this._appendNode(u)},h}();a.LRUMap=g},1296:function(H,a,g){var h,p=this&&this.__extends||(h=function(y,C){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,A){m.__proto__=A}||function(m,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(m[E]=A[E])})(y,C)},function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function m(){this.constructor=y}h(y,C),y.prototype=null===C?Object.create(C):(m.prototype=C.prototype,new m)}),_=this&&this.__decorate||function(y,C,m,A){var E,x=arguments.length,w=x<3?C:null===A?A=Object.getOwnPropertyDescriptor(C,m):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(y,C,m,A);else for(var L=y.length-1;L>=0;L--)(E=y[L])&&(w=(x<3?E(w):x>3?E(C,m,w):E(C,m))||w);return x>3&&w&&Object.defineProperty(C,m,w),w},u=this&&this.__param||function(y,C){return function(m,A){C(m,A,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;var S=g(3787),d=g(8803),r=g(844),o=g(4725),l=g(2585),n=g(8460),t=g(4774),e=g(9631),i="xterm-dom-renderer-owner-",s="xterm-fg-",c="xterm-bg-",f="xterm-focus",v=1,b=function(y){function C(m,A,E,x,w,L,R,k,j,W){var F=y.call(this)||this;return F._colors=m,F._element=A,F._screenElement=E,F._viewportElement=x,F._linkifier=w,F._linkifier2=L,F._charSizeService=k,F._optionsService=j,F._bufferService=W,F._terminalClass=v++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=R.createInstance(S.DomRendererRowFactory,document,F._colors),F._element.classList.add(i+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F._linkifier2.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier2.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F}return p(C,y),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return(new n.EventEmitter).event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),y.prototype.dispose.call(this)},C.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var m=0,A=this._rowElements;m<A.length;m++){var E=A[m];E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.setColors=function(m){this._colors=m,this._injectCss()},C.prototype._injectCss=function(){var m=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var A=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";A+=this._terminalSelector+" span:not(."+S.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+S.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+S.ITALIC_CLASS+" { font-style: italic;}",A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",A+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",A+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+":not(."+S.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",A+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(E,x){A+=m._terminalSelector+" ."+s+x+" { color: "+E.css+"; }"+m._terminalSelector+" ."+c+x+" { background-color: "+E.css+"; }"}),A+=this._terminalSelector+" ."+s+d.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+c+d.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=A},C.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},C.prototype._refreshRowElements=function(m,A){for(var E=this._rowElements.length;E<=A;E++){var x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())},C.prototype.onResize=function(m,A){this._refreshRowElements(m,A),this._updateDimensions()},C.prototype.onCharSizeChanged=function(){this._updateDimensions()},C.prototype.onBlur=function(){this._rowContainer.classList.remove(f)},C.prototype.onFocus=function(){this._rowContainer.classList.add(f)},C.prototype.onSelectionChanged=function(m,A,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(m&&A){var x=m[1]-this._bufferService.buffer.ydisp,w=A[1]-this._bufferService.buffer.ydisp,L=Math.max(x,0),R=Math.min(w,this._bufferService.rows-1);if(!(L>=this._bufferService.rows||R<0)){var k=document.createDocumentFragment();E?k.appendChild(this._createSelectionElement(L,m[0],A[0],R-L+1)):(k.appendChild(this._createSelectionElement(L,x===L?m[0]:0,L===w?A[0]:this._bufferService.cols)),k.appendChild(this._createSelectionElement(L+1,0,this._bufferService.cols,R-L-1)),L!==R&&k.appendChild(this._createSelectionElement(R,0,w===R?A[0]:this._bufferService.cols))),this._selectionContainer.appendChild(k)}}},C.prototype._createSelectionElement=function(m,A,E,x){void 0===x&&(x=1);var w=document.createElement("div");return w.style.height=x*this.dimensions.actualCellHeight+"px",w.style.top=m*this.dimensions.actualCellHeight+"px",w.style.left=A*this.dimensions.actualCellWidth+"px",w.style.width=this.dimensions.actualCellWidth*(E-A)+"px",w},C.prototype.onCursorMove=function(){},C.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},C.prototype.clear=function(){for(var m=0,A=this._rowElements;m<A.length;m++)A[m].innerText=""},C.prototype.renderRows=function(m,A){for(var E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,x=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),w=this._optionsService.options.cursorBlink,L=m;L<=A;L++){var R=this._rowElements[L];R.innerText="";var k=L+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(k);R.appendChild(this._rowFactory.createRow(j,k,k===E,this._optionsService.options.cursorStyle,x,w,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(C.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),C.prototype._onLinkHover=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!0)},C.prototype._onLinkLeave=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!1)},C.prototype._setCellUnderline=function(m,A,E,x,w,L){for(;m!==A||E!==x;){var R=this._rowElements[E];if(!R)return;var k=R.children[m];k&&(k.style.textDecoration=L?"underline":"none"),++m>=w&&(m=0,E++)}},_([u(6,l.IInstantiationService),u(7,o.ICharSizeService),u(8,l.IOptionsService),u(9,l.IBufferService)],C)}(r.Disposable);a.DomRenderer=b},3787:function(H,a,g){var h=this&&this.__decorate||function(e,i,s,c){var f,v=arguments.length,b=v<3?i:null===c?c=Object.getOwnPropertyDescriptor(i,s):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,i,s,c);else for(var y=e.length-1;y>=0;y--)(f=e[y])&&(b=(v<3?f(b):v>3?f(i,s,b):f(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},p=this&&this.__param||function(e,i){return function(s,c){i(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=a.CURSOR_STYLE_UNDERLINE_CLASS=a.CURSOR_STYLE_BAR_CLASS=a.CURSOR_STYLE_BLOCK_CLASS=a.CURSOR_BLINK_CLASS=a.CURSOR_CLASS=a.STRIKETHROUGH_CLASS=a.UNDERLINE_CLASS=a.ITALIC_CLASS=a.DIM_CLASS=a.BOLD_CLASS=void 0;var _=g(8803),u=g(643),S=g(511),d=g(2585),r=g(4774),o=g(4725),l=g(4269);a.BOLD_CLASS="xterm-bold",a.DIM_CLASS="xterm-dim",a.ITALIC_CLASS="xterm-italic",a.UNDERLINE_CLASS="xterm-underline",a.STRIKETHROUGH_CLASS="xterm-strikethrough",a.CURSOR_CLASS="xterm-cursor",a.CURSOR_BLINK_CLASS="xterm-cursor-blink",a.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",a.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",a.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var n=function(){function e(i,s,c,f){this._document=i,this._colors=s,this._characterJoinerService=c,this._optionsService=f,this._workCell=new S.CellData}return e.prototype.setColors=function(i){this._colors=i},e.prototype.createRow=function(i,s,c,f,v,b,y,C){for(var m=this._document.createDocumentFragment(),A=this._characterJoinerService.getJoinedCharacters(s),E=0,x=Math.min(i.length,C)-1;x>=0;x--)if(i.loadCell(x,this._workCell).getCode()!==u.NULL_CELL_CODE||c&&x===v){E=x+1;break}for(x=0;x<E;x++){i.loadCell(x,this._workCell);var w=this._workCell.getWidth();if(0!==w){var L=!1,R=x,k=this._workCell;if(A.length>0&&x===A[0][0]){L=!0;var j=A.shift();k=new l.JoinedCellData(this._workCell,i.translateToString(!0,j[0],j[1]),j[1]-j[0]),R=j[1]-1,w=k.getWidth()}var W=this._document.createElement("span");if(w>1&&(W.style.width=y*w+"px"),L&&(W.style.display="inline",v>=x&&v<=R&&(v=x)),c&&x===v)switch(W.classList.add(a.CURSOR_CLASS),b&&W.classList.add(a.CURSOR_BLINK_CLASS),f){case"bar":W.classList.add(a.CURSOR_STYLE_BAR_CLASS);break;case"underline":W.classList.add(a.CURSOR_STYLE_UNDERLINE_CLASS);break;default:W.classList.add(a.CURSOR_STYLE_BLOCK_CLASS)}k.isBold()&&W.classList.add(a.BOLD_CLASS),k.isItalic()&&W.classList.add(a.ITALIC_CLASS),k.isDim()&&W.classList.add(a.DIM_CLASS),k.isUnderline()&&W.classList.add(a.UNDERLINE_CLASS),W.textContent=k.isInvisible()?u.WHITESPACE_CELL_CHAR:k.getChars()||u.WHITESPACE_CELL_CHAR,k.isStrikethrough()&&W.classList.add(a.STRIKETHROUGH_CLASS);var F=k.getFgColor(),N=k.getFgColorMode(),K=k.getBgColor(),M=k.getBgColorMode(),T=!!k.isInverse();if(T){var D=F;F=K,K=D;var I=N;N=M,M=I}switch(N){case 16777216:case 33554432:k.isBold()&&F<8&&this._optionsService.options.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(W,this._colors.background,this._colors.ansi[F])||W.classList.add("xterm-fg-"+F);break;case 50331648:var O=r.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(W,this._colors.background,O)||this._addStyle(W,"color:#"+t(F.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(W,this._colors.background,this._colors.foreground)||T&&W.classList.add("xterm-fg-"+_.INVERTED_DEFAULT_COLOR)}switch(M){case 16777216:case 33554432:W.classList.add("xterm-bg-"+K);break;case 50331648:this._addStyle(W,"background-color:#"+t(K.toString(16),"0",6));break;case 0:default:T&&W.classList.add("xterm-bg-"+_.INVERTED_DEFAULT_COLOR)}m.appendChild(W),x=R}}return m},e.prototype._applyMinimumContrast=function(i,s,c){if(1===this._optionsService.options.minimumContrastRatio)return!1;var f=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===f&&(f=r.color.ensureContrastRatio(s,c,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,f??null)),!!f&&(this._addStyle(i,"color:"+f.css),!0)},e.prototype._addStyle=function(i,s){i.setAttribute("style",""+(i.getAttribute("style")||"")+s+";")},h([p(2,o.ICharacterJoinerService),p(3,d.IOptionsService)],e)}();function t(e,i,s){for(;e.length<s;)e=i+e;return e}a.DomRendererRowFactory=n},456:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0;var g=function(){function h(p){this._bufferService=p,this.isSelectAllActive=!1,this.selectionStartLength=0}return h.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(h.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var p=this.selectionStart[0]+this.selectionStartLength;return p>this._bufferService.cols?[p%this._bufferService.cols,this.selectionStart[1]+Math.floor(p/this._bufferService.cols)]:[p,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),h.prototype.areSelectionValuesReversed=function(){var p=this.selectionStart,_=this.selectionEnd;return!(!p||!_)&&(p[1]>_[1]||p[1]===_[1]&&p[0]>_[0])},h.prototype.onTrim=function(p){return this.selectionStart&&(this.selectionStart[1]-=p),this.selectionEnd&&(this.selectionEnd[1]-=p),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},h}();a.SelectionModel=g},428:function(H,a,g){var h=this&&this.__decorate||function(r,o,l,n){var t,e=arguments.length,i=e<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,o,l,n);else for(var s=r.length-1;s>=0;s--)(t=r[s])&&(i=(e<3?t(i):e>3?t(o,l,i):t(o,l))||i);return e>3&&i&&Object.defineProperty(o,l,i),i},p=this&&this.__param||function(r,o){return function(l,n){o(l,n,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;var _=g(2585),u=g(8460),S=function(){function r(o,l,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new u.EventEmitter,this._measureStrategy=new d(o,l,this._optionsService)}return Object.defineProperty(r.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),r.prototype.measure=function(){var o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())},h([p(2,_.IOptionsService)],r)}();a.CharSizeService=S;var d=function(){function r(o,l,n){this._document=o,this._parentElement=l,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return r.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var o=this._measureElement.getBoundingClientRect();return 0!==o.width&&0!==o.height&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result},r}()},4269:function(H,a,g){var h,p=this&&this.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),_=this&&this.__decorate||function(t,e,i,s){var c,f=arguments.length,v=f<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)v=Reflect.decorate(t,e,i,s);else for(var b=t.length-1;b>=0;b--)(c=t[b])&&(v=(f<3?c(v):f>3?c(e,i,v):c(e,i))||v);return f>3&&v&&Object.defineProperty(e,i,v),v},u=this&&this.__param||function(t,e){return function(i,s){e(i,s,t)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;var S=g(3734),d=g(643),r=g(511),o=g(2585),l=function(t){function e(i,s,c){var f=t.call(this)||this;return f.content=0,f.combinedData="",f.fg=i.fg,f.bg=i.bg,f.combinedData=s,f._width=c,f}return p(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(i){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(S.AttributeData);a.JoinedCellData=l;var n=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new r.CellData}return t.prototype.register=function(e){var i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id},t.prototype.deregister=function(e){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var i=this._bufferService.buffer.lines.get(e);if(!i||0===i.length)return[];for(var s=[],c=i.translateToString(!0),f=0,v=0,b=0,y=i.getFg(0),C=i.getBg(0),m=0;m<i.getTrimmedLength();m++)if(i.loadCell(m,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==y||this._workCell.bg!==C){if(m-f>1)for(var A=this._getJoinedRanges(c,b,v,i,f),E=0;E<A.length;E++)s.push(A[E]);f=m,b=v,y=this._workCell.fg,C=this._workCell.bg}v+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-f>1)for(A=this._getJoinedRanges(c,b,v,i,f),E=0;E<A.length;E++)s.push(A[E]);return s},t.prototype._getJoinedRanges=function(e,i,s,c,f){for(var v=e.substring(i,s),b=this._characterJoiners[0].handler(v),y=1;y<this._characterJoiners.length;y++)for(var C=this._characterJoiners[y].handler(v),m=0;m<C.length;m++)t._mergeRanges(b,C[m]);return this._stringRangesToCellRanges(b,c,f),b},t.prototype._stringRangesToCellRanges=function(e,i,s){var c=0,f=!1,v=0,b=e[c];if(b){for(var y=s;y<this._bufferService.cols;y++){var C=i.getWidth(y),m=i.getString(y).length||d.WHITESPACE_CELL_CHAR.length;if(0!==C){if(!f&&b[0]<=v&&(b[0]=y,f=!0),b[1]<=v){if(b[1]=y,!(b=e[++c]))break;b[0]<=v?(b[0]=y,f=!0):f=!1}v+=m}}b&&(b[1]=this._bufferService.cols)}},t._mergeRanges=function(e,i){for(var s=!1,c=0;c<e.length;c++){var f=e[c];if(s){if(i[1]<=f[0])return e[c-1][1]=i[1],e;if(i[1]<=f[1])return e[c-1][1]=Math.max(i[1],f[1]),e.splice(c,1),e;e.splice(c,1),c--}else{if(i[1]<=f[0])return e.splice(c,0,i),e;if(i[1]<=f[1])return f[0]=Math.min(i[0],f[0]),e;i[0]<f[1]&&(f[0]=Math.min(i[0],f[0]),s=!0)}}return s?e[e.length-1][1]=i[1]:e.push(i),e},t=_([u(0,o.IBufferService)],t)}();a.CharacterJoinerService=n},5114:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;var g=function(){function h(p){this._textarea=p}return Object.defineProperty(h.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),h}();a.CoreBrowserService=g},8934:function(H,a,g){var h=this&&this.__decorate||function(d,r,o,l){var n,t=arguments.length,e=t<3?r:null===l?l=Object.getOwnPropertyDescriptor(r,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(d,r,o,l);else for(var i=d.length-1;i>=0;i--)(n=d[i])&&(e=(t<3?n(e):t>3?n(r,o,e):n(r,o))||e);return t>3&&e&&Object.defineProperty(r,o,e),e},p=this&&this.__param||function(d,r){return function(o,l){r(o,l,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;var _=g(4725),u=g(9806),S=function(){function d(r,o){this._renderService=r,this._charSizeService=o}return d.prototype.getCoords=function(r,o,l,n,t){return u.getCoords(r,o,l,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},d.prototype.getRawByteCoords=function(r,o,l,n){var t=this.getCoords(r,o,l,n);return u.getRawByteCoords(t)},h([p(0,_.IRenderService),p(1,_.ICharSizeService)],d)}();a.MouseService=S},3230:function(H,a,g){var h,p=this&&this.__extends||(h=function(i,s){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])})(i,s)},function(i,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function c(){this.constructor=i}h(i,s),i.prototype=null===s?Object.create(s):(c.prototype=s.prototype,new c)}),_=this&&this.__decorate||function(i,s,c,f){var v,b=arguments.length,y=b<3?s:null===f?f=Object.getOwnPropertyDescriptor(s,c):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(i,s,c,f);else for(var C=i.length-1;C>=0;C--)(v=i[C])&&(y=(b<3?v(y):b>3?v(s,c,y):v(s,c))||y);return b>3&&y&&Object.defineProperty(s,c,y),y},u=this&&this.__param||function(i,s){return function(c,f){s(c,f,i)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;var S=g(6193),d=g(8460),r=g(844),o=g(5596),l=g(3656),n=g(2585),t=g(4725),e=function(i){function s(c,f,v,b,y,C){var m=i.call(this)||this;if(m._renderer=c,m._rowCount=f,m._charSizeService=y,m._isPaused=!1,m._needsFullRefresh=!1,m._isNextRenderRedrawOnly=!0,m._needsSelectionRefresh=!1,m._canvasWidth=0,m._canvasHeight=0,m._selectionState={start:void 0,end:void 0,columnSelectMode:!1},m._onDimensionsChange=new d.EventEmitter,m._onRender=new d.EventEmitter,m._onRefreshRequest=new d.EventEmitter,m.register({dispose:function(){return m._renderer.dispose()}}),m._renderDebouncer=new S.RenderDebouncer(function(E,x){return m._renderRows(E,x)}),m.register(m._renderDebouncer),m._screenDprMonitor=new o.ScreenDprMonitor,m._screenDprMonitor.setListener(function(){return m.onDevicePixelRatioChange()}),m.register(m._screenDprMonitor),m.register(C.onResize(function(E){return m._fullRefresh()})),m.register(b.onOptionChange(function(){return m._renderer.onOptionsChanged()})),m.register(m._charSizeService.onCharSizeChange(function(){return m.onCharSizeChanged()})),m._renderer.onRequestRedraw(function(E){return m.refreshRows(E.start,E.end,!0)}),m.register(l.addDisposableDomListener(window,"resize",function(){return m.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var A=new IntersectionObserver(function(E){return m._onIntersectionChange(E[E.length-1])},{threshold:0});A.observe(v),m.register({dispose:function(){return A.disconnect()}})}return m}return p(s,i),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(c){this._isPaused=void 0===c.isIntersecting?0===c.intersectionRatio:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(c,f,v){void 0===v&&(v=!1),this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,f,this._rowCount))},s.prototype._renderRows=function(c,f){this._renderer.renderRows(c,f),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:c,end:f}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(c,f){this._rowCount=f,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){i.prototype.dispose.call(this)},s.prototype.setRenderer=function(c){var f=this;this._renderer.dispose(),this._renderer=c,this._renderer.onRequestRedraw(function(v){return f.refreshRows(v.start,v.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.setColors=function(c){this._renderer.setColors(c),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(c,f){this._renderer.onResize(c,f),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(c,f,v){this._selectionState.start=c,this._selectionState.end=f,this._selectionState.columnSelectMode=v,this._renderer.onSelectionChanged(c,f,v)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},_([u(3,n.IOptionsService),u(4,t.ICharSizeService),u(5,n.IBufferService)],s)}(r.Disposable);a.RenderService=e},9312:function(H,a,g){var h,p=this&&this.__extends||(h=function(b,y){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,m){C.__proto__=m}||function(C,m){for(var A in m)Object.prototype.hasOwnProperty.call(m,A)&&(C[A]=m[A])})(b,y)},function(b,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function C(){this.constructor=b}h(b,y),b.prototype=null===y?Object.create(y):(C.prototype=y.prototype,new C)}),_=this&&this.__decorate||function(b,y,C,m){var A,E=arguments.length,x=E<3?y:null===m?m=Object.getOwnPropertyDescriptor(y,C):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(b,y,C,m);else for(var w=b.length-1;w>=0;w--)(A=b[w])&&(x=(E<3?A(x):E>3?A(y,C,x):A(y,C))||x);return E>3&&x&&Object.defineProperty(y,C,x),x},u=this&&this.__param||function(b,y){return function(C,m){y(C,m,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;var S=g(6114),d=g(456),r=g(511),o=g(8460),l=g(4725),n=g(2585),t=g(9806),e=g(9504),i=g(844),s=g(4841),c=String.fromCharCode(160),f=new RegExp(c,"g"),v=function(b){function y(C,m,A,E,x,w,L,R){var k=b.call(this)||this;return k._element=C,k._screenElement=m,k._linkifier=A,k._bufferService=E,k._coreService=x,k._mouseService=w,k._optionsService=L,k._renderService=R,k._dragScrollAmount=0,k._enabled=!0,k._workCell=new r.CellData,k._mouseDownTimeStamp=0,k._oldHasSelection=!1,k._oldSelectionStart=void 0,k._oldSelectionEnd=void 0,k._onLinuxMouseSelection=k.register(new o.EventEmitter),k._onRedrawRequest=k.register(new o.EventEmitter),k._onSelectionChange=k.register(new o.EventEmitter),k._onRequestScrollLines=k.register(new o.EventEmitter),k._mouseMoveListener=function(j){return k._onMouseMove(j)},k._mouseUpListener=function(j){return k._onMouseUp(j)},k._coreService.onUserInput(function(){k.hasSelection&&k.clearSelection()}),k._trimListener=k._bufferService.buffer.lines.onTrim(function(j){return k._onTrim(j)}),k.register(k._bufferService.buffers.onBufferActivate(function(j){return k._onBufferActivate(j)})),k.enable(),k._model=new d.SelectionModel(k._bufferService),k._activeSelectionMode=0,k}return p(y,b),Object.defineProperty(y.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._removeMouseDownListeners()},y.prototype.reset=function(){this.clearSelection()},y.prototype.disable=function(){this.clearSelection(),this._enabled=!1},y.prototype.enable=function(){this._enabled=!0},Object.defineProperty(y.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hasSelection",{get:function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!C||!m||C[0]===m[0]&&C[1]===m[1])},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionText",{get:function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!C||!m)return"";var A=this._bufferService.buffer,E=[];if(3===this._activeSelectionMode){if(C[0]===m[0])return"";for(var x=C[1];x<=m[1];x++){var w=A.translateBufferLineToString(x,!0,C[0],m[0]);E.push(w)}}else{for(E.push(A.translateBufferLineToString(C[1],!0,C[0],C[1]===m[1]?m[0]:void 0)),x=C[1]+1;x<=m[1]-1;x++){var R=A.lines.get(x);w=A.translateBufferLineToString(x,!0),R&&R.isWrapped?E[E.length-1]+=w:E.push(w)}C[1]!==m[1]&&(R=A.lines.get(m[1]),w=A.translateBufferLineToString(m[1],!0,0,m[0]),R&&R.isWrapped?E[E.length-1]+=w:E.push(w))}return E.map(function(k){return k.replace(f," ")}).join(S.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),y.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},y.prototype.refresh=function(C){var m=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return m._refresh()})),S.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},y.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},y.prototype._isClickInSelection=function(C){var m=this._getMouseBufferCoords(C),A=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(A&&E&&m)&&this._areCoordsInSelection(m,A,E)},y.prototype._areCoordsInSelection=function(C,m,A){return C[1]>m[1]&&C[1]<A[1]||m[1]===A[1]&&C[1]===m[1]&&C[0]>=m[0]&&C[0]<A[0]||m[1]<A[1]&&C[1]===A[1]&&C[0]<A[0]||m[1]<A[1]&&C[1]===m[1]&&C[0]>=m[0]},y.prototype._selectWordAtCursor=function(C,m){var A,E,x=null===(E=null===(A=this._linkifier.currentLink)||void 0===A?void 0:A.link)||void 0===E?void 0:E.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=s.getRangeLength(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var w=this._getMouseBufferCoords(C);return!!w&&(this._selectWordAt(w,m),this._model.selectionEnd=void 0,!0)},y.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},y.prototype.selectLines=function(C,m){this._model.clearSelection(),C=Math.max(C,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()},y.prototype._onTrim=function(C){this._model.onTrim(C)&&this.refresh()},y.prototype._getMouseBufferCoords=function(C){var m=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(m)return m[0]--,m[1]--,m[1]+=this._bufferService.buffer.ydisp,m},y.prototype._getMouseEventScrollAmount=function(C){var m=t.getCoordsRelativeToElement(C,this._screenElement)[1],A=this._renderService.dimensions.canvasHeight;return m>=0&&m<=A?0:(m>A&&(m-=A),m=Math.min(Math.max(m,-50),50),(m/=50)/Math.abs(m)+Math.round(14*m))},y.prototype.shouldForceSelection=function(C){return S.isMac?C.altKey&&this._optionsService.options.macOptionClickForcesSelection:C.shiftKey},y.prototype.onMouseDown=function(C){if(this._mouseDownTimeStamp=C.timeStamp,(2!==C.button||!this.hasSelection)&&0===C.button){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._onIncrementalClick(C):1===C.detail?this._onSingleClick(C):2===C.detail?this._onDoubleClick(C):3===C.detail&&this._onTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}},y.prototype._addMouseDownListeners=function(){var C=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return C._dragScroll()},50)},y.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},y.prototype._onIncrementalClick=function(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))},y.prototype._onSingleClick=function(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),this._model.selectionStart){this._model.selectionEnd=void 0;var m=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);m&&m.length!==this._model.selectionStart[0]&&0===m.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},y.prototype._onDoubleClick=function(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)},y.prototype._onTripleClick=function(C){var m=this._getMouseBufferCoords(C);m&&(this._activeSelectionMode=2,this._selectLineAt(m[1]))},y.prototype.shouldColumnSelect=function(C){return C.altKey&&!(S.isMac&&this._optionsService.options.macOptionClickForcesSelection)},y.prototype._onMouseMove=function(C){if(C.stopImmediatePropagation(),this._model.selectionStart){var m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){var E=A.lines.get(this._model.selectionEnd[1]);E&&0===E.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},y.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var C=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}},y.prototype._onMouseUp=function(C){var m=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&m<500&&C.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var A=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&void 0!==A[0]&&void 0!==A[1]){var E=e.moveToCellSequence(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()},y.prototype._fireEventIfSelectionChanged=function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd,A=!(!C||!m||C[0]===m[0]&&C[1]===m[1]);A?C&&m&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&m[0]===this._oldSelectionEnd[0]&&m[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,m,A)):this._oldHasSelection&&this._fireOnSelectionChange(C,m,A)},y.prototype._fireOnSelectionChange=function(C,m,A){this._oldSelectionStart=C,this._oldSelectionEnd=m,this._oldHasSelection=A,this._onSelectionChange.fire()},y.prototype._onBufferActivate=function(C){var m=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(function(A){return m._onTrim(A)})},y.prototype._convertViewportColToCharacterIndex=function(C,m){for(var A=m[0],E=0;m[0]>=E;E++){var x=C.loadCell(E,this._workCell).getChars().length;0===this._workCell.getWidth()?A--:x>1&&m[0]!==E&&(A+=x-1)}return A},y.prototype.setSelection=function(C,m,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,m],this._model.selectionStartLength=A,this.refresh()},y.prototype.rightClickSelect=function(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},y.prototype._getWordAt=function(C,m,A,E){if(void 0===A&&(A=!0),void 0===E&&(E=!0),!(C[0]>=this._bufferService.cols)){var x=this._bufferService.buffer,w=x.lines.get(C[1]);if(w){var L=x.translateBufferLineToString(C[1],!1),R=this._convertViewportColToCharacterIndex(w,C),k=R,j=C[0]-R,W=0,F=0,N=0,K=0;if(" "===L.charAt(R)){for(;R>0&&" "===L.charAt(R-1);)R--;for(;k<L.length&&" "===L.charAt(k+1);)k++}else{var M=C[0],T=C[0];0===w.getWidth(M)&&(W++,M--),2===w.getWidth(T)&&(F++,T++);var D=w.getString(T).length;for(D>1&&(K+=D-1,k+=D-1);M>0&&R>0&&!this._isCharWordSeparator(w.loadCell(M-1,this._workCell));){w.loadCell(M-1,this._workCell);var I=this._workCell.getChars().length;0===this._workCell.getWidth()?(W++,M--):I>1&&(N+=I-1,R-=I-1),R--,M--}for(;T<w.length&&k+1<L.length&&!this._isCharWordSeparator(w.loadCell(T+1,this._workCell));){w.loadCell(T+1,this._workCell);var O=this._workCell.getChars().length;2===this._workCell.getWidth()?(F++,T++):O>1&&(K+=O-1,k+=O-1),k++,T++}}k++;var q=R+j-W+N,z=Math.min(this._bufferService.cols,k-R+W+F-N-K);if(m||""!==L.slice(R,k).trim()){if(A&&0===q&&32!==w.getCodePoint(0)){var J=x.lines.get(C[1]-1);if(J&&w.isWrapped&&32!==J.getCodePoint(this._bufferService.cols-1)){var Q=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(Q){var ie=this._bufferService.cols-Q.start;q-=ie,z+=ie}}}if(E&&q+z===this._bufferService.cols&&32!==w.getCodePoint(this._bufferService.cols-1)){var U=x.lines.get(C[1]+1);if(U&&U.isWrapped&&32!==U.getCodePoint(0)){var X=this._getWordAt([0,C[1]+1],!1,!1,!0);X&&(z+=X.length)}}return{start:q,length:z}}}}},y.prototype._selectWordAt=function(C,m){var A=this._getWordAt(C,m);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[A.start,C[1]],this._model.selectionStartLength=A.length}},y.prototype._selectToWordAt=function(C){var m=this._getWordAt(C,!0);if(m){for(var A=C[1];m.start<0;)m.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,A]}},y.prototype._isCharWordSeparator=function(C){return 0!==C.getWidth()&&this._optionsService.options.wordSeparator.indexOf(C.getChars())>=0},y.prototype._selectLineAt=function(C){var m=this._bufferService.buffer.getWrappedRangeForLine(C);this._model.selectionStart=[0,m.first],this._model.selectionEnd=[this._bufferService.cols,m.last],this._model.selectionStartLength=0},_([u(3,n.IBufferService),u(4,n.ICoreService),u(5,l.IMouseService),u(6,n.IOptionsService),u(7,l.IRenderService)],y)}(i.Disposable);a.SelectionService=v},4725:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ICharacterJoinerService=a.ISoundService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;var h=g(8343);a.ICharSizeService=h.createDecorator("CharSizeService"),a.ICoreBrowserService=h.createDecorator("CoreBrowserService"),a.IMouseService=h.createDecorator("MouseService"),a.IRenderService=h.createDecorator("RenderService"),a.ISelectionService=h.createDecorator("SelectionService"),a.ISoundService=h.createDecorator("SoundService"),a.ICharacterJoinerService=h.createDecorator("CharacterJoinerService")},357:function(H,a,g){var h=this&&this.__decorate||function(S,d,r,o){var l,n=arguments.length,t=n<3?d:null===o?o=Object.getOwnPropertyDescriptor(d,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(S,d,r,o);else for(var e=S.length-1;e>=0;e--)(l=S[e])&&(t=(n<3?l(t):n>3?l(d,r,t):l(d,r))||t);return n>3&&t&&Object.defineProperty(d,r,t),t},p=this&&this.__param||function(S,d){return function(r,o){d(r,o,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SoundService=void 0;var _=g(2585),u=function(){function S(d){this._optionsService=d}return Object.defineProperty(S,"audioContext",{get:function(){if(!S._audioContext){var d=window.AudioContext||window.webkitAudioContext;if(!d)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;S._audioContext=new d}return S._audioContext},enumerable:!1,configurable:!0}),S.prototype.playBellSound=function(){var d=S.audioContext;if(d){var r=d.createBufferSource();d.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(o){r.buffer=o,r.connect(d.destination),r.start(0)})}},S.prototype._base64ToArrayBuffer=function(d){for(var r=window.atob(d),o=r.length,l=new Uint8Array(o),n=0;n<o;n++)l[n]=r.charCodeAt(n);return l.buffer},S.prototype._removeMimeType=function(d){return d.split(",")[1]},S=h([p(0,_.IOptionsService)],S)}();a.SoundService=u},6349:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;var h=g(8460),p=function(){function _(u){this._maxLength=u,this.onDeleteEmitter=new h.EventEmitter,this.onInsertEmitter=new h.EventEmitter,this.onTrimEmitter=new h.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(_.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLength",{get:function(){return this._maxLength},set:function(u){if(this._maxLength!==u){for(var S=new Array(u),d=0;d<Math.min(u,this.length);d++)S[d]=this._array[this._getCyclicIndex(d)];this._array=S,this._maxLength=u,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._length},set:function(u){if(u>this._length)for(var S=this._length;S<u;S++)this._array[S]=void 0;this._length=u},enumerable:!1,configurable:!0}),_.prototype.get=function(u){return this._array[this._getCyclicIndex(u)]},_.prototype.set=function(u,S){this._array[this._getCyclicIndex(u)]=S},_.prototype.push=function(u){this._array[this._getCyclicIndex(this._length)]=u,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},_.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(_.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),_.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},_.prototype.splice=function(u,S){for(var d=[],r=2;r<arguments.length;r++)d[r-2]=arguments[r];if(S){for(var o=u;o<this._length-S;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+S)];this._length-=S,this.onDeleteEmitter.fire({index:u,amount:S})}for(o=this._length-1;o>=u;o--)this._array[this._getCyclicIndex(o+d.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<d.length;o++)this._array[this._getCyclicIndex(u+o)]=d[o];if(d.length&&this.onInsertEmitter.fire({index:u,amount:d.length}),this._length+d.length>this._maxLength){var l=this._length+d.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=d.length},_.prototype.trimStart=function(u){u>this._length&&(u=this._length),this._startIndex+=u,this._length-=u,this.onTrimEmitter.fire(u)},_.prototype.shiftElements=function(u,S,d){if(!(S<=0)){if(u<0||u>=this._length)throw new Error("start argument out of range");if(u+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(var r=S-1;r>=0;r--)this.set(u+r+d,this.get(u+r));var o=u+S+d-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(r=0;r<S;r++)this.set(u+r+d,this.get(u+r))}},_.prototype._getCyclicIndex=function(u){return(this._startIndex+u)%this._maxLength},_}();a.CircularList=p},1439:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function g(h,p){if(void 0===p&&(p=5),"object"!=typeof h)return h;var _=Array.isArray(h)?[]:{};for(var u in h)_[u]=p<=1?h[u]:h[u]&&g(h[u],p-1);return _}},8969:function(H,a,g){var h,p=this&&this.__extends||(h=function(C,m){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var x in E)Object.prototype.hasOwnProperty.call(E,x)&&(A[x]=E[x])})(C,m)},function(C,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function A(){this.constructor=C}h(C,m),C.prototype=null===m?Object.create(m):(A.prototype=m.prototype,new A)});Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;var _=g(844),u=g(2585),S=g(4348),d=g(7866),r=g(744),o=g(7302),l=g(6975),n=g(8460),t=g(1753),e=g(3730),i=g(1480),s=g(7994),c=g(9282),f=g(5435),v=g(5981),b=!1,y=function(C){function m(A){var E=C.call(this)||this;return E._onBinary=new n.EventEmitter,E._onData=new n.EventEmitter,E._onLineFeed=new n.EventEmitter,E._onResize=new n.EventEmitter,E._onScroll=new n.EventEmitter,E._instantiationService=new S.InstantiationService,E.optionsService=new o.OptionsService(A),E._instantiationService.setService(u.IOptionsService,E.optionsService),E._bufferService=E.register(E._instantiationService.createInstance(r.BufferService)),E._instantiationService.setService(u.IBufferService,E._bufferService),E._logService=E._instantiationService.createInstance(d.LogService),E._instantiationService.setService(u.ILogService,E._logService),E.coreService=E.register(E._instantiationService.createInstance(l.CoreService,function(){return E.scrollToBottom()})),E._instantiationService.setService(u.ICoreService,E.coreService),E.coreMouseService=E._instantiationService.createInstance(t.CoreMouseService),E._instantiationService.setService(u.ICoreMouseService,E.coreMouseService),E._dirtyRowService=E._instantiationService.createInstance(e.DirtyRowService),E._instantiationService.setService(u.IDirtyRowService,E._dirtyRowService),E.unicodeService=E._instantiationService.createInstance(i.UnicodeService),E._instantiationService.setService(u.IUnicodeService,E.unicodeService),E._charsetService=E._instantiationService.createInstance(s.CharsetService),E._instantiationService.setService(u.ICharsetService,E._charsetService),E._inputHandler=new f.InputHandler(E._bufferService,E._charsetService,E.coreService,E._dirtyRowService,E._logService,E.optionsService,E.coreMouseService,E.unicodeService),E.register(n.forwardEvent(E._inputHandler.onLineFeed,E._onLineFeed)),E.register(E._inputHandler),E.register(n.forwardEvent(E._bufferService.onResize,E._onResize)),E.register(n.forwardEvent(E.coreService.onData,E._onData)),E.register(n.forwardEvent(E.coreService.onBinary,E._onBinary)),E.register(E.optionsService.onOptionChange(function(x){return E._updateOptions(x)})),E.register(E._bufferService.onScroll(function(x){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E.register(E._inputHandler.onScroll(function(x){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E._writeBuffer=new v.WriteBuffer(function(x,w){return E._inputHandler.parse(x,w)}),E}return p(m,C),Object.defineProperty(m.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){var A=this;return this._onScrollApi||(this._onScrollApi=new n.EventEmitter,this.register(this._onScroll.event(function(E){var x;null===(x=A._onScrollApi)||void 0===x||x.fire(E.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var A;this._isDisposed||(C.prototype.dispose.call(this),null===(A=this._windowsMode)||void 0===A||A.dispose(),this._windowsMode=void 0)},m.prototype.write=function(A,E){this._writeBuffer.write(A,E)},m.prototype.writeSync=function(A,E){this._logService.logLevel<=u.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(A,E)},m.prototype.resize=function(A,E){isNaN(A)||isNaN(E)||(A=Math.max(A,r.MINIMUM_COLS),E=Math.max(E,r.MINIMUM_ROWS),this._bufferService.resize(A,E))},m.prototype.scroll=function(A,E){void 0===E&&(E=!1),this._bufferService.scroll(A,E)},m.prototype.scrollLines=function(A,E,x){this._bufferService.scrollLines(A,E,x)},m.prototype.scrollPages=function(A){this._bufferService.scrollPages(A)},m.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},m.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},m.prototype.scrollToLine=function(A){this._bufferService.scrollToLine(A)},m.prototype.registerEscHandler=function(A,E){return this._inputHandler.registerEscHandler(A,E)},m.prototype.registerDcsHandler=function(A,E){return this._inputHandler.registerDcsHandler(A,E)},m.prototype.registerCsiHandler=function(A,E){return this._inputHandler.registerCsiHandler(A,E)},m.prototype.registerOscHandler=function(A,E){return this._inputHandler.registerOscHandler(A,E)},m.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},m.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},m.prototype._updateOptions=function(A){var E;switch(A){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(E=this._windowsMode)||void 0===E||E.dispose(),this._windowsMode=void 0)}},m.prototype._enableWindowsMode=function(){var A=this;if(!this._windowsMode){var E=[];E.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},function(){return c.updateWindowsModeWrappedState(A._bufferService),!1})),this._windowsMode={dispose:function(){for(var x=0,w=E;x<w.length;x++)w[x].dispose()}}}},m}(_.Disposable);a.CoreTerminal=y},8460:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0;var g=function(){function h(){this._listeners=[],this._disposed=!1}return Object.defineProperty(h.prototype,"event",{get:function(){var p=this;return this._event||(this._event=function(_){return p._listeners.push(_),{dispose:function(){if(!p._disposed)for(var u=0;u<p._listeners.length;u++)if(p._listeners[u]===_)return void p._listeners.splice(u,1)}}}),this._event},enumerable:!1,configurable:!0}),h.prototype.fire=function(p,_){for(var u=[],S=0;S<this._listeners.length;S++)u.push(this._listeners[S]);for(S=0;S<u.length;S++)u[S].call(void 0,p,_)},h.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},h}();a.EventEmitter=g,a.forwardEvent=function(h,p){return h(function(_){return p.fire(_)})}},5435:function(H,a,g){var h,p=this&&this.__extends||(h=function(E,x){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,L){w.__proto__=L}||function(w,L){for(var R in L)Object.prototype.hasOwnProperty.call(L,R)&&(w[R]=L[R])})(E,x)},function(E,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function w(){this.constructor=E}h(E,x),E.prototype=null===x?Object.create(x):(w.prototype=x.prototype,new w)});Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;var _,E,u=g(2584),S=g(7116),d=g(2015),r=g(844),o=g(8273),l=g(482),n=g(8437),t=g(8460),e=g(643),i=g(511),s=g(3734),c=g(2585),f=g(6242),v=g(6351),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function C(E,x){if(E>24)return x.setWinLines||!1;switch(E){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}(E=_=a.WindowsOptionsReportType||(a.WindowsOptionsReportType={}))[E.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",E[E.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";var m=function(){function E(x,w,L,R){this._bufferService=x,this._coreService=w,this._logService=L,this._optionsService=R,this._data=new Uint32Array(0)}return E.prototype.hook=function(x){this._data=new Uint32Array(0)},E.prototype.put=function(x,w,L){this._data=o.concat(this._data,x.subarray(w,L))},E.prototype.unhook=function(x){if(!x)return this._data=new Uint32Array(0),!0;var w=l.utf32ToString(this._data);switch(this._data=new Uint32Array(0),w){case'"q':this._coreService.triggerDataEvent(u.C0.ESC+'P1$r0"q'+u.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(u.C0.ESC+'P1$r61;1"p'+u.C0.ESC+"\\");break;case"r":this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+u.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(u.C0.ESC+"P1$r0m"+u.C0.ESC+"\\");break;case" q":var R={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+(R-=this._optionsService.options.cursorBlink?1:0)+" q"+u.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",w),this._coreService.triggerDataEvent(u.C0.ESC+"P0$r"+u.C0.ESC+"\\")}return!0},E}(),A=function(E){function x(w,L,R,k,j,W,F,N,K){void 0===K&&(K=new d.EscapeSequenceParser);var M=E.call(this)||this;M._bufferService=w,M._charsetService=L,M._coreService=R,M._dirtyRowService=k,M._logService=j,M._optionsService=W,M._coreMouseService=F,M._unicodeService=N,M._parser=K,M._parseBuffer=new Uint32Array(4096),M._stringDecoder=new l.StringToUtf32,M._utf8Decoder=new l.Utf8ToUtf32,M._workCell=new i.CellData,M._windowTitle="",M._iconName="",M._windowTitleStack=[],M._iconNameStack=[],M._curAttrData=n.DEFAULT_ATTR_DATA.clone(),M._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),M._onRequestBell=new t.EventEmitter,M._onRequestRefreshRows=new t.EventEmitter,M._onRequestReset=new t.EventEmitter,M._onRequestSyncScrollBar=new t.EventEmitter,M._onRequestWindowsOptionsReport=new t.EventEmitter,M._onA11yChar=new t.EventEmitter,M._onA11yTab=new t.EventEmitter,M._onCursorMove=new t.EventEmitter,M._onLineFeed=new t.EventEmitter,M._onScroll=new t.EventEmitter,M._onTitleChange=new t.EventEmitter,M._onAnsiColorChange=new t.EventEmitter,M._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},M.register(M._parser),M._activeBuffer=M._bufferService.buffer,M.register(M._bufferService.buffers.onBufferActivate(function(O){return M._activeBuffer=O.activeBuffer})),M._parser.setCsiHandlerFallback(function(O,q){M._logService.debug("Unknown CSI code: ",{identifier:M._parser.identToString(O),params:q.toArray()})}),M._parser.setEscHandlerFallback(function(O){M._logService.debug("Unknown ESC code: ",{identifier:M._parser.identToString(O)})}),M._parser.setExecuteHandlerFallback(function(O){M._logService.debug("Unknown EXECUTE code: ",{code:O})}),M._parser.setOscHandlerFallback(function(O,q,z){M._logService.debug("Unknown OSC code: ",{identifier:O,action:q,data:z})}),M._parser.setDcsHandlerFallback(function(O,q,z){"HOOK"===q&&(z=z.toArray()),M._logService.debug("Unknown DCS code: ",{identifier:M._parser.identToString(O),action:q,payload:z})}),M._parser.setPrintHandler(function(O,q,z){return M.print(O,q,z)}),M._parser.registerCsiHandler({final:"@"},function(O){return M.insertChars(O)}),M._parser.registerCsiHandler({intermediates:" ",final:"@"},function(O){return M.scrollLeft(O)}),M._parser.registerCsiHandler({final:"A"},function(O){return M.cursorUp(O)}),M._parser.registerCsiHandler({intermediates:" ",final:"A"},function(O){return M.scrollRight(O)}),M._parser.registerCsiHandler({final:"B"},function(O){return M.cursorDown(O)}),M._parser.registerCsiHandler({final:"C"},function(O){return M.cursorForward(O)}),M._parser.registerCsiHandler({final:"D"},function(O){return M.cursorBackward(O)}),M._parser.registerCsiHandler({final:"E"},function(O){return M.cursorNextLine(O)}),M._parser.registerCsiHandler({final:"F"},function(O){return M.cursorPrecedingLine(O)}),M._parser.registerCsiHandler({final:"G"},function(O){return M.cursorCharAbsolute(O)}),M._parser.registerCsiHandler({final:"H"},function(O){return M.cursorPosition(O)}),M._parser.registerCsiHandler({final:"I"},function(O){return M.cursorForwardTab(O)}),M._parser.registerCsiHandler({final:"J"},function(O){return M.eraseInDisplay(O)}),M._parser.registerCsiHandler({prefix:"?",final:"J"},function(O){return M.eraseInDisplay(O)}),M._parser.registerCsiHandler({final:"K"},function(O){return M.eraseInLine(O)}),M._parser.registerCsiHandler({prefix:"?",final:"K"},function(O){return M.eraseInLine(O)}),M._parser.registerCsiHandler({final:"L"},function(O){return M.insertLines(O)}),M._parser.registerCsiHandler({final:"M"},function(O){return M.deleteLines(O)}),M._parser.registerCsiHandler({final:"P"},function(O){return M.deleteChars(O)}),M._parser.registerCsiHandler({final:"S"},function(O){return M.scrollUp(O)}),M._parser.registerCsiHandler({final:"T"},function(O){return M.scrollDown(O)}),M._parser.registerCsiHandler({final:"X"},function(O){return M.eraseChars(O)}),M._parser.registerCsiHandler({final:"Z"},function(O){return M.cursorBackwardTab(O)}),M._parser.registerCsiHandler({final:"`"},function(O){return M.charPosAbsolute(O)}),M._parser.registerCsiHandler({final:"a"},function(O){return M.hPositionRelative(O)}),M._parser.registerCsiHandler({final:"b"},function(O){return M.repeatPrecedingCharacter(O)}),M._parser.registerCsiHandler({final:"c"},function(O){return M.sendDeviceAttributesPrimary(O)}),M._parser.registerCsiHandler({prefix:">",final:"c"},function(O){return M.sendDeviceAttributesSecondary(O)}),M._parser.registerCsiHandler({final:"d"},function(O){return M.linePosAbsolute(O)}),M._parser.registerCsiHandler({final:"e"},function(O){return M.vPositionRelative(O)}),M._parser.registerCsiHandler({final:"f"},function(O){return M.hVPosition(O)}),M._parser.registerCsiHandler({final:"g"},function(O){return M.tabClear(O)}),M._parser.registerCsiHandler({final:"h"},function(O){return M.setMode(O)}),M._parser.registerCsiHandler({prefix:"?",final:"h"},function(O){return M.setModePrivate(O)}),M._parser.registerCsiHandler({final:"l"},function(O){return M.resetMode(O)}),M._parser.registerCsiHandler({prefix:"?",final:"l"},function(O){return M.resetModePrivate(O)}),M._parser.registerCsiHandler({final:"m"},function(O){return M.charAttributes(O)}),M._parser.registerCsiHandler({final:"n"},function(O){return M.deviceStatus(O)}),M._parser.registerCsiHandler({prefix:"?",final:"n"},function(O){return M.deviceStatusPrivate(O)}),M._parser.registerCsiHandler({intermediates:"!",final:"p"},function(O){return M.softReset(O)}),M._parser.registerCsiHandler({intermediates:" ",final:"q"},function(O){return M.setCursorStyle(O)}),M._parser.registerCsiHandler({final:"r"},function(O){return M.setScrollRegion(O)}),M._parser.registerCsiHandler({final:"s"},function(O){return M.saveCursor(O)}),M._parser.registerCsiHandler({final:"t"},function(O){return M.windowOptions(O)}),M._parser.registerCsiHandler({final:"u"},function(O){return M.restoreCursor(O)}),M._parser.registerCsiHandler({intermediates:"'",final:"}"},function(O){return M.insertColumns(O)}),M._parser.registerCsiHandler({intermediates:"'",final:"~"},function(O){return M.deleteColumns(O)}),M._parser.setExecuteHandler(u.C0.BEL,function(){return M.bell()}),M._parser.setExecuteHandler(u.C0.LF,function(){return M.lineFeed()}),M._parser.setExecuteHandler(u.C0.VT,function(){return M.lineFeed()}),M._parser.setExecuteHandler(u.C0.FF,function(){return M.lineFeed()}),M._parser.setExecuteHandler(u.C0.CR,function(){return M.carriageReturn()}),M._parser.setExecuteHandler(u.C0.BS,function(){return M.backspace()}),M._parser.setExecuteHandler(u.C0.HT,function(){return M.tab()}),M._parser.setExecuteHandler(u.C0.SO,function(){return M.shiftOut()}),M._parser.setExecuteHandler(u.C0.SI,function(){return M.shiftIn()}),M._parser.setExecuteHandler(u.C1.IND,function(){return M.index()}),M._parser.setExecuteHandler(u.C1.NEL,function(){return M.nextLine()}),M._parser.setExecuteHandler(u.C1.HTS,function(){return M.tabSet()}),M._parser.registerOscHandler(0,new f.OscHandler(function(O){return M.setTitle(O),M.setIconName(O),!0})),M._parser.registerOscHandler(1,new f.OscHandler(function(O){return M.setIconName(O)})),M._parser.registerOscHandler(2,new f.OscHandler(function(O){return M.setTitle(O)})),M._parser.registerOscHandler(4,new f.OscHandler(function(O){return M.setAnsiColor(O)})),M._parser.registerEscHandler({final:"7"},function(){return M.saveCursor()}),M._parser.registerEscHandler({final:"8"},function(){return M.restoreCursor()}),M._parser.registerEscHandler({final:"D"},function(){return M.index()}),M._parser.registerEscHandler({final:"E"},function(){return M.nextLine()}),M._parser.registerEscHandler({final:"H"},function(){return M.tabSet()}),M._parser.registerEscHandler({final:"M"},function(){return M.reverseIndex()}),M._parser.registerEscHandler({final:"="},function(){return M.keypadApplicationMode()}),M._parser.registerEscHandler({final:">"},function(){return M.keypadNumericMode()}),M._parser.registerEscHandler({final:"c"},function(){return M.fullReset()}),M._parser.registerEscHandler({final:"n"},function(){return M.setgLevel(2)}),M._parser.registerEscHandler({final:"o"},function(){return M.setgLevel(3)}),M._parser.registerEscHandler({final:"|"},function(){return M.setgLevel(3)}),M._parser.registerEscHandler({final:"}"},function(){return M.setgLevel(2)}),M._parser.registerEscHandler({final:"~"},function(){return M.setgLevel(1)}),M._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return M.selectDefaultCharset()}),M._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return M.selectDefaultCharset()});var T=function(O){D._parser.registerEscHandler({intermediates:"(",final:O},function(){return M.selectCharset("("+O)}),D._parser.registerEscHandler({intermediates:")",final:O},function(){return M.selectCharset(")"+O)}),D._parser.registerEscHandler({intermediates:"*",final:O},function(){return M.selectCharset("*"+O)}),D._parser.registerEscHandler({intermediates:"+",final:O},function(){return M.selectCharset("+"+O)}),D._parser.registerEscHandler({intermediates:"-",final:O},function(){return M.selectCharset("-"+O)}),D._parser.registerEscHandler({intermediates:".",final:O},function(){return M.selectCharset("."+O)}),D._parser.registerEscHandler({intermediates:"/",final:O},function(){return M.selectCharset("/"+O)})},D=this;for(var I in S.CHARSETS)T(I);return M._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return M.screenAlignmentPattern()}),M._parser.setErrorHandler(function(O){return M._logService.error("Parsing error: ",O),O}),M._parser.registerDcsHandler({intermediates:"$",final:"q"},new m(M._bufferService,M._coreService,M._logService,M._optionsService)),M}return p(x,E),Object.defineProperty(x.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),x.prototype.dispose=function(){E.prototype.dispose.call(this)},x.prototype._preserveStack=function(w,L,R,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=R,this._parseStack.position=k},x.prototype._logSlowResolvingAsync=function(w){this._logService.logLevel<=c.LogLevelEnum.WARN&&Promise.race([w,new Promise(function(L,R){return setTimeout(function(){return R("#SLOW_TIMEOUT")},5e3)})]).catch(function(L){if("#SLOW_TIMEOUT"!==L)throw L;console.warn("async parser handler taking longer than 5000 ms")})},x.prototype.parse=function(w,L){var R,k=this._activeBuffer.x,j=this._activeBuffer.y,W=0,F=this._parseStack.paused;if(F){if(R=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(R),R;k=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>y&&(W=this._parseStack.position+y)}if(this._logService.debug("parsing data",w),this._parseBuffer.length<w.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(w.length,y))),F||this._dirtyRowService.clearRange(),w.length>y)for(var N=W;N<w.length;N+=y){var K=N+y<w.length?N+y:w.length,M="string"==typeof w?this._stringDecoder.decode(w.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(w.subarray(N,K),this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,M))return this._preserveStack(k,j,M,N),this._logSlowResolvingAsync(R),R}else if(!F&&(M="string"==typeof w?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer),R=this._parser.parse(this._parseBuffer,M)))return this._preserveStack(k,j,M,0),this._logSlowResolvingAsync(R),R;this._activeBuffer.x===k&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},x.prototype.print=function(w,L,R){var k,j,W=this._charsetService.charset,F=this._optionsService.options.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,T=this._curAttrData,D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&R-L>0&&2===D.getWidth(this._activeBuffer.x-1)&&D.setCellFromCodePoint(this._activeBuffer.x-1,0,1,T.fg,T.bg,T.extended);for(var I=L;I<R;++I){if(j=this._unicodeService.wcwidth(k=w[I]),k<127&&W){var O=W[String.fromCharCode(k)];O&&(k=O.charCodeAt(0))}if(F&&this._onA11yChar.fire(l.stringFromCodePoint(k)),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=N)if(K){for(;this._activeBuffer.x<N;)D.setCellFromCodePoint(this._activeBuffer.x++,0,1,T.fg,T.bg,T.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,2===j)continue;if(M&&(D.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(T),T),2===D.getWidth(N-1)&&D.setCellFromCodePoint(N-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,T.fg,T.bg,T.extended)),D.setCellFromCodePoint(this._activeBuffer.x++,k,j,T.fg,T.bg,T.extended),j>0)for(;--j;)D.setCellFromCodePoint(this._activeBuffer.x++,0,0,T.fg,T.bg,T.extended)}else D.getWidth(this._activeBuffer.x-1)?D.addCodepointToCell(this._activeBuffer.x-1,k):D.addCodepointToCell(this._activeBuffer.x-2,k)}R-L>0&&(D.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<N&&R-L>0&&0===D.getWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&D.setCellFromCodePoint(this._activeBuffer.x,0,1,T.fg,T.bg,T.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype.registerCsiHandler=function(w,L){var R=this;return this._parser.registerCsiHandler(w,"t"!==w.final||w.prefix||w.intermediates?L:function(k){return!C(k.params[0],R._optionsService.options.windowOptions)||L(k)})},x.prototype.registerDcsHandler=function(w,L){return this._parser.registerDcsHandler(w,new v.DcsHandler(L))},x.prototype.registerEscHandler=function(w,L){return this._parser.registerEscHandler(w,L)},x.prototype.registerOscHandler=function(w,L){return this._parser.registerOscHandler(w,new f.OscHandler(L))},x.prototype.bell=function(){return this._onRequestBell.fire(),!0},x.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},x.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},x.prototype.backspace=function(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===w?void 0:w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},x.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0},x.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},x.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},x.prototype._restrictCursor=function(w){void 0===w&&(w=this._bufferService.cols-1),this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype._setCursor=function(w,L){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=w,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype._moveCursor=function(w,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+L)},x.prototype.cursorUp=function(w){var L=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,L>=0?-Math.min(L,w.params[0]||1):-(w.params[0]||1)),!0},x.prototype.cursorDown=function(w){var L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,L>=0?Math.min(L,w.params[0]||1):w.params[0]||1),!0},x.prototype.cursorForward=function(w){return this._moveCursor(w.params[0]||1,0),!0},x.prototype.cursorBackward=function(w){return this._moveCursor(-(w.params[0]||1),0),!0},x.prototype.cursorNextLine=function(w){return this.cursorDown(w),this._activeBuffer.x=0,!0},x.prototype.cursorPrecedingLine=function(w){return this.cursorUp(w),this._activeBuffer.x=0,!0},x.prototype.cursorCharAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},x.prototype.cursorPosition=function(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0},x.prototype.charPosAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},x.prototype.hPositionRelative=function(w){return this._moveCursor(w.params[0]||1,0),!0},x.prototype.linePosAbsolute=function(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0},x.prototype.vPositionRelative=function(w){return this._moveCursor(0,w.params[0]||1),!0},x.prototype.hVPosition=function(w){return this.cursorPosition(w),!0},x.prototype.tabClear=function(w){var L=w.params[0];return 0===L?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===L&&(this._activeBuffer.tabs={}),!0},x.prototype.cursorForwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=w.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},x.prototype.cursorBackwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=w.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},x.prototype._eraseInBufferLine=function(w,L,R,k){void 0===k&&(k=!1);var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);j.replaceCells(L,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k&&(j.isWrapped=!1)},x.prototype._resetBufferLine=function(w){var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);L.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1},x.prototype.eraseInDisplay=function(w){var L;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(this._dirtyRowService.markDirty(L=this._activeBuffer.y),this._eraseInBufferLine(L++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);L<this._bufferService.rows;L++)this._resetBufferLine(L);this._dirtyRowService.markDirty(L);break;case 1:for(this._dirtyRowService.markDirty(L=this._activeBuffer.y),this._eraseInBufferLine(L,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(L+1).isWrapped=!1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 2:for(this._dirtyRowService.markDirty((L=this._bufferService.rows)-1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 3:var R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0},x.prototype.eraseInLine=function(w){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},x.prototype.insertLines=function(w){this._restrictCursor();var L=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var R=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;L--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},x.prototype.deleteLines=function(w){this._restrictCursor();var L=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var R,k=this._activeBuffer.ybase+this._activeBuffer.y;for(R=this._bufferService.rows-1+this._activeBuffer.ybase-(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom);L--;)this._activeBuffer.lines.splice(k,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},x.prototype.insertChars=function(w){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.deleteChars=function(w){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.scrollUp=function(w){for(var L=w.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollDown=function(w){for(var L=w.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollLeft=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=w.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);k.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollRight=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=w.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);k.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.insertColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=w.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);k.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.deleteColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=w.params[0]||1,R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);k.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.eraseChars=function(w){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.repeatPrecedingCharacter=function(w){if(!this._parser.precedingCodepoint)return!0;for(var L=w.params[0]||1,R=new Uint32Array(L),k=0;k<L;++k)R[k]=this._parser.precedingCodepoint;return this.print(R,0,R.length),!0},x.prototype.sendDeviceAttributesPrimary=function(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0},x.prototype.sendDeviceAttributesSecondary=function(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0},x.prototype._is=function(w){return 0===(this._optionsService.options.termName+"").indexOf(w)},x.prototype.setMode=function(w){for(var L=0;L<w.length;L++)switch(w.params[L]){case 4:this._coreService.modes.insertMode=!0}return!0},x.prototype.setModePrivate=function(w){for(var L=0;L<w.length;L++)switch(w.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),this._charsetService.setgCharset(1,S.DEFAULT_CHARSET),this._charsetService.setgCharset(2,S.DEFAULT_CHARSET),this._charsetService.setgCharset(3,S.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},x.prototype.resetMode=function(w){for(var L=0;L<w.length;L++)switch(w.params[L]){case 4:this._coreService.modes.insertMode=!1}return!0},x.prototype.resetModePrivate=function(w){for(var L=0;L<w.length;L++)switch(w.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===w.params[L]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},x.prototype._updateAttrColor=function(w,L,R,k,j){return 2===L?(w|=50331648,w&=-16777216,w|=s.AttributeData.fromColorRGB([R,k,j])):5===L&&(w&=-50331904,w|=33554432|255&R),w},x.prototype._extractColor=function(w,L,R){var k=[0,0,-1,0,0,0],j=0,W=0;do{if(k[W+j]=w.params[L+W],w.hasSubParams(L+W)){var F=w.getSubParams(L+W),N=0;do{5===k[1]&&(j=1),k[W+N+1+j]=F[N]}while(++N<F.length&&N+W+1+j<k.length);break}if(5===k[1]&&W+j>=2||2===k[1]&&W+j>=5)break;k[1]&&(j=1)}while(++W+L<w.length&&W+j<k.length);for(N=2;N<k.length;++N)-1===k[N]&&(k[N]=0);switch(k[0]){case 38:R.fg=this._updateAttrColor(R.fg,k[1],k[3],k[4],k[5]);break;case 48:R.bg=this._updateAttrColor(R.bg,k[1],k[3],k[4],k[5]);break;case 58:R.extended=R.extended.clone(),R.extended.underlineColor=this._updateAttrColor(R.extended.underlineColor,k[1],k[3],k[4],k[5])}return W},x.prototype._processUnderline=function(w,L){L.extended=L.extended.clone(),(!~w||w>5)&&(w=1),L.extended.underlineStyle=w,L.fg|=268435456,0===w&&(L.fg&=-268435457),L.updateExtended()},x.prototype.charAttributes=function(w){if(1===w.length&&0===w.params[0])return this._curAttrData.fg=n.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=n.DEFAULT_ATTR_DATA.bg,!0;for(var L,R=w.length,k=this._curAttrData,j=0;j<R;j++)(L=w.params[j])>=30&&L<=37?(k.fg&=-50331904,k.fg|=16777216|L-30):L>=40&&L<=47?(k.bg&=-50331904,k.bg|=16777216|L-40):L>=90&&L<=97?(k.fg&=-50331904,k.fg|=16777224|L-90):L>=100&&L<=107?(k.bg&=-50331904,k.bg|=16777224|L-100):0===L?(k.fg=n.DEFAULT_ATTR_DATA.fg,k.bg=n.DEFAULT_ATTR_DATA.bg):1===L?k.fg|=134217728:3===L?k.bg|=67108864:4===L?(k.fg|=268435456,this._processUnderline(w.hasSubParams(j)?w.getSubParams(j)[0]:1,k)):5===L?k.fg|=536870912:7===L?k.fg|=67108864:8===L?k.fg|=1073741824:9===L?k.fg|=2147483648:2===L?k.bg|=134217728:21===L?this._processUnderline(2,k):22===L?(k.fg&=-134217729,k.bg&=-134217729):23===L?k.bg&=-67108865:24===L?k.fg&=-268435457:25===L?k.fg&=-536870913:27===L?k.fg&=-67108865:28===L?k.fg&=-1073741825:29===L?k.fg&=2147483647:39===L?(k.fg&=-67108864,k.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):49===L?(k.bg&=-67108864,k.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):38===L||48===L||58===L?j+=this._extractColor(w,j,k):59===L?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):100===L?(k.fg&=-67108864,k.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",L);return!0},x.prototype.deviceStatus=function(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(u.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(u.C0.ESC+"["+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R")}return!0},x.prototype.deviceStatusPrivate=function(w){switch(w.params[0]){case 6:this._coreService.triggerDataEvent(u.C0.ESC+"[?"+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R")}return!0},x.prototype.softReset=function(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},x.prototype.setCursorStyle=function(w){var L=w.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=L%2==1,!0},x.prototype.setScrollRegion=function(w){var L,R=w.params[0]||1;return(w.length<2||(L=w.params[1])>this._bufferService.rows||0===L)&&(L=this._bufferService.rows),L>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=L-1,this._setCursor(0,0)),!0},x.prototype.windowOptions=function(w){if(!C(w.params[0],this._optionsService.options.windowOptions))return!0;var L=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:2!==L&&this._onRequestWindowsOptionsReport.fire(_.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(_.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(u.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==L&&2!==L||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==L&&1!==L||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==L&&2!==L||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==L&&1!==L||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},x.prototype.saveCursor=function(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},x.prototype.restoreCursor=function(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},x.prototype.setTitle=function(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0},x.prototype.setIconName=function(w){return this._iconName=w,!0},x.prototype._parseAnsiColorChange=function(w){for(var L,R={colors:[]},k=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;null!==(L=k.exec(w));)R.colors.push({colorIndex:parseInt(L[1]),red:parseInt(L[2],16),green:parseInt(L[3],16),blue:parseInt(L[4],16)});return 0===R.colors.length?null:R},x.prototype.setAnsiColor=function(w){var L=this._parseAnsiColorChange(w);return L?this._onAnsiColorChange.fire(L):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+w),!0},x.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},x.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},x.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},x.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),!0},x.prototype.selectCharset=function(w){return 2!==w.length?(this.selectDefaultCharset(),!0):("/"===w[0]||this._charsetService.setgCharset(b[w[0]],S.CHARSETS[w[1]]||S.DEFAULT_CHARSET),!0)},x.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},x.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},x.prototype.reverseIndex=function(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0},x.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},x.prototype.reset=function(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()},x.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},x.prototype.setgLevel=function(w){return this._charsetService.setgLevel(w),!0},x.prototype.screenAlignmentPattern=function(){var w=new i.CellData;w.content=1<<22|"E".charCodeAt(0),w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(var L=0;L<this._bufferService.rows;++L){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+L);k&&(k.fill(w),k.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},x}(r.Disposable);a.InputHandler=A},844:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.Disposable=void 0;var g=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0;for(var _=0,u=this._disposables;_<u.length;_++)u[_].dispose();this._disposables.length=0},p.prototype.register=function(_){return this._disposables.push(_),_},p.prototype.unregister=function(_){var u=this._disposables.indexOf(_);-1!==u&&this._disposables.splice(u,1)},p}();function h(p){for(var _=0,u=p;_<u.length;_++)u[_].dispose();p.length=0}a.Disposable=g,a.disposeArray=h,a.getDisposeArrayDisposable=function(p){return{dispose:function(){return h(p)}}}},6114:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.isSafari=a.isFirefox=void 0;var g="undefined"==typeof navigator,h=g?"node":navigator.userAgent,p=g?"node":navigator.platform;a.isFirefox=h.includes("Firefox"),a.isSafari=/^((?!chrome|android).)*safari/i.test(h),a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),a.isIpad="iPad"===p,a.isIphone="iPhone"===p,a.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),a.isLinux=p.indexOf("Linux")>=0},8273:(H,a)=>{function g(h,p,_,u){if(void 0===_&&(_=0),void 0===u&&(u=h.length),_>=h.length)return h;u=u>=h.length?h.length:(h.length+u)%h.length;for(var S=_=(h.length+_)%h.length;S<u;++S)h[S]=p;return h}Object.defineProperty(a,"__esModule",{value:!0}),a.concat=a.fillFallback=a.fill=void 0,a.fill=function(h,p,_,u){return h.fill?h.fill(p,_,u):g(h,p,_,u)},a.fillFallback=g,a.concat=function(h,p){var _=new h.constructor(h.length+p.length);return _.set(h),_.set(p,h.length),_}},9282:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;var h=g(643);a.updateWindowsModeWrappedState=function(p){var _=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),u=null==_?void 0:_.get(p.cols-1),S=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);S&&u&&(S.isWrapped=u[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&u[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;var g=function(){function p(){this.fg=0,this.bg=0,this.extended=new h}return p.toColorRGB=function(_){return[_>>>16&255,_>>>8&255,255&_]},p.fromColorRGB=function(_){return(255&_[0])<<16|(255&_[1])<<8|255&_[2]},p.prototype.clone=function(){var _=new p;return _.fg=this.fg,_.bg=this.bg,_.extended=this.extended.clone(),_},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.isStrikethrough=function(){return 2147483648&this.fg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},p.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},p.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},p.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},p.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},p.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},p.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},p.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},p.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},p.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},p.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},p.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},p.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},p.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},p}();a.AttributeData=g;var h=function(){function p(_,u){void 0===_&&(_=0),void 0===u&&(u=-1),this.underlineStyle=_,this.underlineColor=u}return p.prototype.clone=function(){return new p(this.underlineStyle,this.underlineColor)},p.prototype.isEmpty=function(){return 0===this.underlineStyle},p}();a.ExtendedAttrs=h},9092:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferStringIterator=a.Buffer=a.MAX_BUFFER_SIZE=void 0;var h=g(6349),p=g(8437),_=g(511),u=g(643),S=g(4634),d=g(4863),r=g(7116),o=g(3734);a.MAX_BUFFER_SIZE=4294967295;var l=function(){function t(e,i,s){this._hasScrollback=e,this._optionsService=i,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,i){return new p.BufferLine(this._bufferService.cols,this.getNullCell(e),i)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.options.scrollback;return i>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:i},t.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=p.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,i){var s=this.getNullCell(p.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(i);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<e)for(var f=0;f<this.lines.length;f++)this.lines.get(f).resize(e,s);var v=0;if(this._rows<i)for(var b=this._rows;b<i;b++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+v+1?(this.ybase--,v++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(e,s)));else for(b=this._rows;b>i;b--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var y=this.lines.length-c;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=c}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),v&&(this.y+=v),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(f=0;f<this.lines.length;f++)this.lines.get(f).resize(e,s);this._cols=e,this._rows=i},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))},t.prototype._reflowLarger=function(e,i){var s=S.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(s.length>0){var c=S.reflowLargerCreateNewLayout(this.lines,s);S.reflowLargerApplyNewLayout(this.lines,c.layout),this._reflowLargerAdjustViewport(e,i,c.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,i,s){for(var c=this.getNullCell(p.DEFAULT_ATTR_DATA),f=s;f-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new p.BufferLine(e,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},t.prototype._reflowSmaller=function(e,i){for(var s=this.getNullCell(p.DEFAULT_ATTR_DATA),c=[],f=0,v=this.lines.length-1;v>=0;v--){var b=this.lines.get(v);if(!(!b||!b.isWrapped&&b.getTrimmedLength()<=e)){for(var y=[b];b.isWrapped&&v>0;)b=this.lines.get(--v),y.unshift(b);var C=this.ybase+this.y;if(!(C>=v&&C<v+y.length)){var m,A=y[y.length-1].getTrimmedLength(),E=S.reflowSmallerGetNewLineLengths(y,this._cols,e),x=E.length-y.length;m=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+x):Math.max(0,this.lines.length-this.lines.maxLength+x);for(var w=[],L=0;L<x;L++){var R=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);w.push(R)}w.length>0&&(c.push({start:v+y.length+f,newLines:w}),f+=w.length),y.push.apply(y,w);var k=E.length-1,j=E[k];0===j&&(j=E[--k]);for(var W=y.length-x-1,F=A;W>=0;){var N=Math.min(F,j);if(y[k].copyCellsFrom(y[W],F-N,j-N,N,!0),0==(j-=N)&&(j=E[--k]),0==(F-=N)){W--;var K=Math.max(W,0);F=S.getWrappedLineTrimmedLength(y,K,this._cols)}}for(L=0;L<y.length;L++)E[L]<e&&y[L].setCell(E[L],s);for(var M=x-m;M-- >0;)0===this.ybase?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+f)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+x,this.ybase+i-1)}}}if(c.length>0){var T=[],D=[];for(L=0;L<this.lines.length;L++)D.push(this.lines.get(L));var I=this.lines.length,O=I-1,q=0,z=c[q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+f);var J=0;for(L=Math.min(this.lines.maxLength-1,I+f-1);L>=0;L--)if(z&&z.start>O+J){for(var Q=z.newLines.length-1;Q>=0;Q--)this.lines.set(L--,z.newLines[Q]);L++,T.push({index:O+1,amount:z.newLines.length}),J+=z.newLines.length,z=c[++q]}else this.lines.set(L,D[O--]);var ie=0;for(L=T.length-1;L>=0;L--)T[L].index+=ie,this.lines.onInsertEmitter.fire(T[L]),ie+=T[L].amount;var U=Math.max(0,I+f-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}},t.prototype.stringIndexToBufferIndex=function(e,i,s){for(void 0===s&&(s=!1);i;){var c=this.lines.get(e);if(!c)return[-1,-1];for(var f=s?c.getTrimmedLength():c.length,v=0;v<f;++v)if(c.get(v)[u.CHAR_DATA_WIDTH_INDEX]&&(i-=c.get(v)[u.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[e,v];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,i,s,c){void 0===s&&(s=0);var f=this.lines.get(e);return f?f.translateToString(i,s,c):""},t.prototype.getWrappedRangeForLine=function(e){for(var i=e,s=e;i>0&&this.lines.get(i).isWrapped;)i--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:i,last:s}},t.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.addMarker=function(e){var i=this,s=new d.Marker(e);return this.markers.push(s),s.register(this.lines.onTrim(function(c){s.line-=c,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(c){s.line>=c.index&&(s.line+=c.amount)})),s.register(this.lines.onDelete(function(c){s.line>=c.index&&s.line<c.index+c.amount&&s.dispose(),s.line>c.index&&(s.line-=c.amount)})),s.register(s.onDispose(function(){return i._removeMarker(s)})),s},t.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,i,s,c,f){return new n(this,e,i,s,c,f)},t}();a.Buffer=l;var n=function(){function t(e,i,s,c,f,v){void 0===s&&(s=0),void 0===c&&(c=e.lines.length),void 0===f&&(f=0),void 0===v&&(v=0),this._buffer=e,this._trimRight=i,this._startIndex=s,this._endIndex=c,this._startOverscan=f,this._endOverscan=v,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var i="",s=e.first;s<=e.last;++s)i+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=e.last+1,{range:e,content:i}},t}();a.BufferStringIterator=n},8437:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;var h=g(482),p=g(643),_=g(511),u=g(3734);a.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);var S=function(){function d(r,o,l){void 0===l&&(l=!1),this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);for(var n=o||_.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),t=0;t<r;++t)this.setCell(t,n);this.length=r}return d.prototype.get=function(r){var o=this._data[3*r+0],l=2097151&o;return[this._data[3*r+1],2097152&o?this._combined[r]:l?h.stringFromCodePoint(l):"",o>>22,2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):l]},d.prototype.set=function(r,o){this._data[3*r+1]=o[p.CHAR_DATA_ATTR_INDEX],o[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=o[1],this._data[3*r+0]=2097152|r|o[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=o[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[p.CHAR_DATA_WIDTH_INDEX]<<22},d.prototype.getWidth=function(r){return this._data[3*r+0]>>22},d.prototype.hasWidth=function(r){return 12582912&this._data[3*r+0]},d.prototype.getFg=function(r){return this._data[3*r+1]},d.prototype.getBg=function(r){return this._data[3*r+2]},d.prototype.hasContent=function(r){return 4194303&this._data[3*r+0]},d.prototype.getCodePoint=function(r){var o=this._data[3*r+0];return 2097152&o?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&o},d.prototype.isCombined=function(r){return 2097152&this._data[3*r+0]},d.prototype.getString=function(r){var o=this._data[3*r+0];return 2097152&o?this._combined[r]:2097151&o?h.stringFromCodePoint(2097151&o):""},d.prototype.loadCell=function(r,o){var l=3*r;return o.content=this._data[l+0],o.fg=this._data[l+1],o.bg=this._data[l+2],2097152&o.content&&(o.combinedData=this._combined[r]),268435456&o.bg&&(o.extended=this._extendedAttrs[r]),o},d.prototype.setCell=function(r,o){2097152&o.content&&(this._combined[r]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[r]=o.extended),this._data[3*r+0]=o.content,this._data[3*r+1]=o.fg,this._data[3*r+2]=o.bg},d.prototype.setCellFromCodePoint=function(r,o,l,n,t,e){268435456&t&&(this._extendedAttrs[r]=e),this._data[3*r+0]=o|l<<22,this._data[3*r+1]=n,this._data[3*r+2]=t},d.prototype.addCodepointToCell=function(r,o){var l=this._data[3*r+0];2097152&l?this._combined[r]+=h.stringFromCodePoint(o):(2097151&l?(this._combined[r]=h.stringFromCodePoint(2097151&l)+h.stringFromCodePoint(o),l&=-2097152,l|=2097152):l=o|1<<22,this._data[3*r+0]=l)},d.prototype.insertCells=function(r,o,l,n){if((r%=this.length)&&2===this.getWidth(r-1)&&this.setCellFromCodePoint(r-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs),o<this.length-r){for(var t=new _.CellData,e=this.length-r-o-1;e>=0;--e)this.setCell(r+o+e,this.loadCell(r+e,t));for(e=0;e<o;++e)this.setCell(r+e,l)}else for(e=r;e<this.length;++e)this.setCell(e,l);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs)},d.prototype.deleteCells=function(r,o,l,n){if(o<this.length-(r%=this.length)){for(var t=new _.CellData,e=0;e<this.length-r-o;++e)this.setCell(r+e,this.loadCell(r+o+e,t));for(e=this.length-o;e<this.length;++e)this.setCell(e,l)}else for(e=r;e<this.length;++e)this.setCell(e,l);r&&2===this.getWidth(r-1)&&this.setCellFromCodePoint(r-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs),0!==this.getWidth(r)||this.hasContent(r)||this.setCellFromCodePoint(r,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs)},d.prototype.replaceCells=function(r,o,l,n){for(r&&2===this.getWidth(r-1)&&this.setCellFromCodePoint(r-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs),o<this.length&&2===this.getWidth(o-1)&&this.setCellFromCodePoint(o,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new u.ExtendedAttrs);r<o&&r<this.length;)this.setCell(r++,l)},d.prototype.resize=function(r,o){if(r!==this.length){if(r>this.length){var l=new Uint32Array(3*r);this.length&&l.set(3*r<this._data.length?this._data.subarray(0,3*r):this._data),this._data=l;for(var n=this.length;n<r;++n)this.setCell(n,o)}else if(r){(l=new Uint32Array(3*r)).set(this._data.subarray(0,3*r)),this._data=l;var t=Object.keys(this._combined);for(n=0;n<t.length;n++){var e=parseInt(t[n],10);e>=r&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=r}},d.prototype.fill=function(r){this._combined={},this._extendedAttrs={};for(var o=0;o<this.length;++o)this.setCell(o,r)},d.prototype.copyFrom=function(r){for(var o in this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={},r._combined)this._combined[o]=r._combined[o];for(var o in this._extendedAttrs={},r._extendedAttrs)this._extendedAttrs[o]=r._extendedAttrs[o];this.isWrapped=r.isWrapped},d.prototype.clone=function(){var r=new d(0);for(var o in r._data=new Uint32Array(this._data),r.length=this.length,this._combined)r._combined[o]=this._combined[o];for(var o in this._extendedAttrs)r._extendedAttrs[o]=this._extendedAttrs[o];return r.isWrapped=this.isWrapped,r},d.prototype.getTrimmedLength=function(){for(var r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0},d.prototype.copyCellsFrom=function(r,o,l,n,t){var e=r._data;if(t)for(var i=n-1;i>=0;i--)for(var s=0;s<3;s++)this._data[3*(l+i)+s]=e[3*(o+i)+s];else for(i=0;i<n;i++)for(s=0;s<3;s++)this._data[3*(l+i)+s]=e[3*(o+i)+s];var c=Object.keys(r._combined);for(s=0;s<c.length;s++){var f=parseInt(c[s],10);f>=o&&(this._combined[f-o+l]=r._combined[f])}},d.prototype.translateToString=function(r,o,l){void 0===r&&(r=!1),void 0===o&&(o=0),void 0===l&&(l=this.length),r&&(l=Math.min(l,this.getTrimmedLength()));for(var n="";o<l;){var t=this._data[3*o+0],e=2097151&t;n+=2097152&t?this._combined[o]:e?h.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,o+=t>>22||1}return n},d}();a.BufferLine=S},4841:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(g,h){if(g.start.y>g.end.y)throw new Error("Buffer range end ("+g.end.x+", "+g.end.y+") cannot be before start ("+g.start.x+", "+g.start.y+")");return h*(g.end.y-g.start.y)+(g.end.x-g.start.x+1)}},4634:(H,a)=>{function g(h,p,_){if(p===h.length-1)return h[p].getTrimmedLength();var u=!h[p].hasContent(_-1)&&1===h[p].getWidth(_-1),S=2===h[p+1].getWidth(0);return u&&S?_-1:_}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(h,p,_,u,S){for(var d=[],r=0;r<h.length-1;r++){var o=r,l=h.get(++o);if(l.isWrapped){for(var n=[h.get(r)];o<h.length&&l.isWrapped;)n.push(l),l=h.get(++o);if(u>=r&&u<o)r+=n.length-1;else{for(var t=0,e=g(n,t,p),i=1,s=0;i<n.length;){var c=g(n,i,p),b=Math.min(c-s,_-e);n[t].copyCellsFrom(n[i],s,e,b,!1),(e+=b)===_&&(t++,e=0),(s+=b)===c&&(i++,s=0),0===e&&0!==t&&2===n[t-1].getWidth(_-1)&&(n[t].copyCellsFrom(n[t-1],_-1,e++,1,!1),n[t-1].setCell(_-1,S))}n[t].replaceCells(e,_,S);for(var y=0,C=n.length-1;C>0&&(C>t||0===n[C].getTrimmedLength());C--)y++;y>0&&(d.push(r+n.length-y),d.push(y)),r+=n.length-1}}}return d},a.reflowLargerCreateNewLayout=function(h,p){for(var _=[],u=0,S=p[u],d=0,r=0;r<h.length;r++)if(S===r){var o=p[++u];h.onDeleteEmitter.fire({index:r-d,amount:o}),r+=o-1,d+=o,S=p[++u]}else _.push(r);return{layout:_,countRemoved:d}},a.reflowLargerApplyNewLayout=function(h,p){for(var _=[],u=0;u<p.length;u++)_.push(h.get(p[u]));for(u=0;u<_.length;u++)h.set(u,_[u]);h.length=p.length},a.reflowSmallerGetNewLineLengths=function(h,p,_){for(var u=[],S=h.map(function(e,i){return g(h,i,p)}).reduce(function(e,i){return e+i}),d=0,r=0,o=0;o<S;){if(S-o<_){u.push(S-o);break}d+=_;var l=g(h,r,p);d>l&&(d-=l,r++);var n=2===h[r].getWidth(d-1);n&&d--;var t=n?_-1:_;u.push(t),o+=t}return u},a.getWrappedLineTrimmedLength=g},5295:function(H,a,g){var h,p=this&&this.__extends||(h=function(d,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o[n]=l[n])})(d,r)},function(d,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=d}h(d,r),d.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;var _=g(9092),u=g(8460),S=function(d){function r(o,l){var n=d.call(this)||this;return n._optionsService=o,n._bufferService=l,n._onBufferActivate=n.register(new u.EventEmitter),n.reset(),n}return p(r,d),Object.defineProperty(r.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this._normal=new _.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(r.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),r.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},r.prototype.activateAltBuffer=function(o){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(o),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},r.prototype.resize=function(o,l){this._normal.resize(o,l),this._alt.resize(o,l)},r.prototype.setupTabStops=function(o){this._normal.setupTabStops(o),this._alt.setupTabStops(o)},r}(g(844).Disposable);a.BufferSet=S},511:function(H,a,g){var h,p=this&&this.__extends||(h=function(r,o){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(l[t]=n[t])})(r,o)},function(r,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function l(){this.constructor=r}h(r,o),r.prototype=null===o?Object.create(o):(l.prototype=o.prototype,new l)});Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;var _=g(482),u=g(643),S=g(3734),d=function(r){function o(){var l=null!==r&&r.apply(this,arguments)||this;return l.content=0,l.fg=0,l.bg=0,l.extended=new S.ExtendedAttrs,l.combinedData="",l}return p(o,r),o.fromCharData=function(l){var n=new o;return n.setFromCharData(l),n},o.prototype.isCombined=function(){return 2097152&this.content},o.prototype.getWidth=function(){return this.content>>22},o.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?_.stringFromCodePoint(2097151&this.content):""},o.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},o.prototype.setFromCharData=function(l){this.fg=l[u.CHAR_DATA_ATTR_INDEX],this.bg=0;var n=!1;if(l[u.CHAR_DATA_CHAR_INDEX].length>2)n=!0;else if(2===l[u.CHAR_DATA_CHAR_INDEX].length){var t=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|l[u.CHAR_DATA_WIDTH_INDEX]<<22:n=!0}else n=!0}else this.content=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[u.CHAR_DATA_WIDTH_INDEX]<<22;n&&(this.combinedData=l[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|l[u.CHAR_DATA_WIDTH_INDEX]<<22)},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(S.AttributeData);a.CellData=d},643:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=256,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:function(H,a,g){var h,p=this&&this.__extends||(h=function(S,d){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])})(S,d)},function(S,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function r(){this.constructor=S}h(S,d),S.prototype=null===d?Object.create(d):(r.prototype=d.prototype,new r)});Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;var _=g(8460),u=function(S){function d(r){var o=S.call(this)||this;return o.line=r,o._id=d._nextId++,o.isDisposed=!1,o._onDispose=new _.EventEmitter,o}return p(d,S),Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),d.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),S.prototype.dispose.call(this))},d._nextId=1,d}(g(844).Disposable);a.Marker=u},7116:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},a.CHARSETS.A={"#":"\xa3"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},a.CHARSETS.C=a.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},a.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},a.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},a.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},a.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},a.CHARSETS.E=a.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},a.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},a.CHARSETS.H=a.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},a.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(H,a)=>{var g,h;Object.defineProperty(a,"__esModule",{value:!0}),a.C1=a.C0=void 0,(h=a.C0||(a.C0={})).NUL="\0",h.SOH="\x01",h.STX="\x02",h.ETX="\x03",h.EOT="\x04",h.ENQ="\x05",h.ACK="\x06",h.BEL="\x07",h.BS="\b",h.HT="\t",h.LF="\n",h.VT="\v",h.FF="\f",h.CR="\r",h.SO="\x0e",h.SI="\x0f",h.DLE="\x10",h.DC1="\x11",h.DC2="\x12",h.DC3="\x13",h.DC4="\x14",h.NAK="\x15",h.SYN="\x16",h.ETB="\x17",h.CAN="\x18",h.EM="\x19",h.SUB="\x1a",h.ESC="\x1b",h.FS="\x1c",h.GS="\x1d",h.RS="\x1e",h.US="\x1f",h.SP=" ",h.DEL="\x7f",(g=a.C1||(a.C1={})).PAD="\x80",g.HOP="\x81",g.BPH="\x82",g.NBH="\x83",g.IND="\x84",g.NEL="\x85",g.SSA="\x86",g.ESA="\x87",g.HTS="\x88",g.HTJ="\x89",g.VTS="\x8a",g.PLD="\x8b",g.PLU="\x8c",g.RI="\x8d",g.SS2="\x8e",g.SS3="\x8f",g.DCS="\x90",g.PU1="\x91",g.PU2="\x92",g.STS="\x93",g.CCH="\x94",g.MW="\x95",g.SPA="\x96",g.EPA="\x97",g.SOS="\x98",g.SGCI="\x99",g.SCI="\x9a",g.CSI="\x9b",g.ST="\x9c",g.OSC="\x9d",g.PM="\x9e",g.APC="\x9f"},7399:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;var h=g(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(_,u,S,d){var r={type:0,cancel:!1,key:void 0},o=(_.shiftKey?1:0)|(_.altKey?2:0)|(_.ctrlKey?4:0)|(_.metaKey?8:0);switch(_.keyCode){case 0:"UIKeyInputUpArrow"===_.key?r.key=u?h.C0.ESC+"OA":h.C0.ESC+"[A":"UIKeyInputLeftArrow"===_.key?r.key=u?h.C0.ESC+"OD":h.C0.ESC+"[D":"UIKeyInputRightArrow"===_.key?r.key=u?h.C0.ESC+"OC":h.C0.ESC+"[C":"UIKeyInputDownArrow"===_.key&&(r.key=u?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(_.shiftKey){r.key=h.C0.BS;break}if(_.altKey){r.key=h.C0.ESC+h.C0.DEL;break}r.key=h.C0.DEL;break;case 9:if(_.shiftKey){r.key=h.C0.ESC+"[Z";break}r.key=h.C0.HT,r.cancel=!0;break;case 13:r.key=_.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,r.cancel=!0;break;case 27:r.key=h.C0.ESC,_.altKey&&(r.key=h.C0.ESC+h.C0.ESC),r.cancel=!0;break;case 37:if(_.metaKey)break;o?(r.key=h.C0.ESC+"[1;"+(o+1)+"D",r.key===h.C0.ESC+"[1;3D"&&(r.key=h.C0.ESC+(S?"b":"[1;5D"))):r.key=u?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(_.metaKey)break;o?(r.key=h.C0.ESC+"[1;"+(o+1)+"C",r.key===h.C0.ESC+"[1;3C"&&(r.key=h.C0.ESC+(S?"f":"[1;5C"))):r.key=u?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(_.metaKey)break;o?(r.key=h.C0.ESC+"[1;"+(o+1)+"A",S||r.key!==h.C0.ESC+"[1;3A"||(r.key=h.C0.ESC+"[1;5A")):r.key=u?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(_.metaKey)break;o?(r.key=h.C0.ESC+"[1;"+(o+1)+"B",S||r.key!==h.C0.ESC+"[1;3B"||(r.key=h.C0.ESC+"[1;5B")):r.key=u?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:_.shiftKey||_.ctrlKey||(r.key=h.C0.ESC+"[2~");break;case 46:r.key=o?h.C0.ESC+"[3;"+(o+1)+"~":h.C0.ESC+"[3~";break;case 36:r.key=o?h.C0.ESC+"[1;"+(o+1)+"H":u?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:r.key=o?h.C0.ESC+"[1;"+(o+1)+"F":u?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:_.shiftKey?r.type=2:r.key=h.C0.ESC+"[5~";break;case 34:_.shiftKey?r.type=3:r.key=h.C0.ESC+"[6~";break;case 112:r.key=o?h.C0.ESC+"[1;"+(o+1)+"P":h.C0.ESC+"OP";break;case 113:r.key=o?h.C0.ESC+"[1;"+(o+1)+"Q":h.C0.ESC+"OQ";break;case 114:r.key=o?h.C0.ESC+"[1;"+(o+1)+"R":h.C0.ESC+"OR";break;case 115:r.key=o?h.C0.ESC+"[1;"+(o+1)+"S":h.C0.ESC+"OS";break;case 116:r.key=o?h.C0.ESC+"[15;"+(o+1)+"~":h.C0.ESC+"[15~";break;case 117:r.key=o?h.C0.ESC+"[17;"+(o+1)+"~":h.C0.ESC+"[17~";break;case 118:r.key=o?h.C0.ESC+"[18;"+(o+1)+"~":h.C0.ESC+"[18~";break;case 119:r.key=o?h.C0.ESC+"[19;"+(o+1)+"~":h.C0.ESC+"[19~";break;case 120:r.key=o?h.C0.ESC+"[20;"+(o+1)+"~":h.C0.ESC+"[20~";break;case 121:r.key=o?h.C0.ESC+"[21;"+(o+1)+"~":h.C0.ESC+"[21~";break;case 122:r.key=o?h.C0.ESC+"[23;"+(o+1)+"~":h.C0.ESC+"[23~";break;case 123:r.key=o?h.C0.ESC+"[24;"+(o+1)+"~":h.C0.ESC+"[24~";break;default:if(!_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)if(S&&!d||!_.altKey||_.metaKey)!S||_.altKey||_.ctrlKey||_.shiftKey||!_.metaKey?_.key&&!_.ctrlKey&&!_.altKey&&!_.metaKey&&_.keyCode>=48&&1===_.key.length?r.key=_.key:_.key&&_.ctrlKey&&"_"===_.key&&(r.key=h.C0.US):65===_.keyCode&&(r.type=1);else{var l=p[_.keyCode],n=l&&l[_.shiftKey?1:0];n?r.key=h.C0.ESC+n:_.keyCode>=65&&_.keyCode<=90&&(r.key=h.C0.ESC+String.fromCharCode(_.ctrlKey?_.keyCode-64:_.keyCode+32))}else _.keyCode>=65&&_.keyCode<=90?r.key=String.fromCharCode(_.keyCode-64):32===_.keyCode?r.key=h.C0.NUL:_.keyCode>=51&&_.keyCode<=55?r.key=String.fromCharCode(_.keyCode-51+27):56===_.keyCode?r.key=h.C0.DEL:219===_.keyCode?r.key=h.C0.ESC:220===_.keyCode?r.key=h.C0.FS:221===_.keyCode&&(r.key=h.C0.GS)}return r}},482:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(p){return p>65535?(p-=65536,String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):String.fromCharCode(p)},a.utf32ToString=function(p,_,u){void 0===_&&(_=0),void 0===u&&(u=p.length);for(var S="",d=_;d<u;++d){var r=p[d];r>65535?(r-=65536,S+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):S+=String.fromCharCode(r)}return S};var g=function(){function p(){this._interim=0}return p.prototype.clear=function(){this._interim=0},p.prototype.decode=function(_,u){var S=_.length;if(!S)return 0;var d=0,r=0;this._interim&&(56320<=(n=_.charCodeAt(r++))&&n<=57343?u[d++]=1024*(this._interim-55296)+n-56320+65536:(u[d++]=this._interim,u[d++]=n),this._interim=0);for(var o=r;o<S;++o){var l=_.charCodeAt(o);if(55296<=l&&l<=56319){if(++o>=S)return this._interim=l,d;var n;56320<=(n=_.charCodeAt(o))&&n<=57343?u[d++]=1024*(l-55296)+n-56320+65536:(u[d++]=l,u[d++]=n)}else 65279!==l&&(u[d++]=l)}return d},p}();a.StringToUtf32=g;var h=function(){function p(){this.interim=new Uint8Array(3)}return p.prototype.clear=function(){this.interim.fill(0)},p.prototype.decode=function(_,u){var S=_.length;if(!S)return 0;var d,r,o,l,n=0,t=0,e=0;if(this.interim[0]){var i=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;for(var c=0,f=void 0;(f=63&this.interim[++c])&&c<4;)s<<=6,s|=f;for(var v=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,b=v-c;e<b;){if(e>=S)return 0;if(128!=(192&(f=_[e++]))){e--,i=!0;break}this.interim[c++]=f,s<<=6,s|=63&f}i||(2===v?s<128?e--:u[n++]=s:3===v?s<2048||s>=55296&&s<=57343||65279===s||(u[n++]=s):s<65536||s>1114111||(u[n++]=s)),this.interim.fill(0)}for(var y=S-4,C=e;C<S;){for(;!(!(C<y)||128&(d=_[C])||128&(r=_[C+1])||128&(o=_[C+2])||128&(l=_[C+3]));)u[n++]=d,u[n++]=r,u[n++]=o,u[n++]=l,C+=4;if((d=_[C++])<128)u[n++]=d;else if(192==(224&d)){if(C>=S)return this.interim[0]=d,n;if(128!=(192&(r=_[C++]))){C--;continue}if((t=(31&d)<<6|63&r)<128){C--;continue}u[n++]=t}else if(224==(240&d)){if(C>=S)return this.interim[0]=d,n;if(128!=(192&(r=_[C++]))){C--;continue}if(C>=S)return this.interim[0]=d,this.interim[1]=r,n;if(128!=(192&(o=_[C++]))){C--;continue}if((t=(15&d)<<12|(63&r)<<6|63&o)<2048||t>=55296&&t<=57343||65279===t)continue;u[n++]=t}else if(240==(248&d)){if(C>=S)return this.interim[0]=d,n;if(128!=(192&(r=_[C++]))){C--;continue}if(C>=S)return this.interim[0]=d,this.interim[1]=r,n;if(128!=(192&(o=_[C++]))){C--;continue}if(C>=S)return this.interim[0]=d,this.interim[1]=r,this.interim[2]=o,n;if(128!=(192&(l=_[C++]))){C--;continue}if((t=(7&d)<<18|(63&r)<<12|(63&o)<<6|63&l)<65536||t>1114111)continue;u[n++]=t}}return n},p}();a.Utf8ToUtf32=h},225:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;var h,p=g(8273),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],S=function(){function d(){if(this.version="6",!h){h=new Uint8Array(65536),p.fill(h,1),h[0]=0,p.fill(h,0,1,32),p.fill(h,0,127,160),p.fill(h,2,4352,4448),h[9001]=2,h[9002]=2,p.fill(h,2,11904,42192),h[12351]=1,p.fill(h,2,44032,55204),p.fill(h,2,63744,64256),p.fill(h,2,65040,65050),p.fill(h,2,65072,65136),p.fill(h,2,65280,65377),p.fill(h,2,65504,65511);for(var r=0;r<_.length;++r)p.fill(h,0,_[r][0],_[r][1]+1)}}return d.prototype.wcwidth=function(r){return r<32?0:r<127?1:r<65536?h[r]:function(o,l){var n,t=0,e=l.length-1;if(o<l[0][0]||o>l[e][1])return!1;for(;e>=t;)if(o>l[n=t+e>>1][1])t=n+1;else{if(!(o<l[n][0]))return!0;e=n-1}return!1}(r,u)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1},d}();a.UnicodeV6=S},5981:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;var g="undefined"==typeof queueMicrotask?function(p){Promise.resolve().then(p)}:queueMicrotask,h=function(){function p(_){this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return p.prototype.writeSync=function(_,u){if(void 0!==u&&this._syncCalls>u)this._syncCalls=0;else if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);var d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},p.prototype.write=function(_,u){var S=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return S._innerWrite()})),this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(u)},p.prototype._innerWrite=function(_,u){var S=this;void 0===_&&(_=0),void 0===u&&(u=!0);for(var d=_||Date.now();this._writeBuffer.length>this._bufferOffset;){var r=this._writeBuffer[this._bufferOffset],o=this._action(r,u);if(o)return void o.catch(function(n){return g(function(){throw n}),Promise.resolve(!1)}).then(function(n){return Date.now()-d>=12?setTimeout(function(){return S._innerWrite(0,n)}):S._innerWrite(d,n)});var l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return S._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},p}();a.WriteBuffer=h},5770:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;var h=g(482),p=g(8742),_=g(5770),u=[],S=function(){function o(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return o.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=u},o.prototype.registerHandler=function(l,n){void 0===this._handlers[l]&&(this._handlers[l]=[]);var t=this._handlers[l];return t.push(n),{dispose:function(){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}}},o.prototype.clearHandler=function(l){this._handlers[l]&&delete this._handlers[l]},o.prototype.setHandlerFallback=function(l){this._handlerFb=l},o.prototype.reset=function(){if(this._active.length)for(var l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0},o.prototype.hook=function(l,n){if(this.reset(),this._ident=l,this._active=this._handlers[l]||u,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(n);else this._handlerFb(this._ident,"HOOK",n)},o.prototype.put=function(l,n,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(l,n,t);else this._handlerFb(this._ident,"PUT",h.utf32ToString(l,n,t))},o.prototype.unhook=function(l,n){if(void 0===n&&(n=!0),this._active.length){var t=!1,e=this._active.length-1,i=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=n,i=this._stack.fallThrough,this._stack.paused=!1),!i&&!1===t){for(;e>=0&&!0!==(t=this._active[e].unhook(l));e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",l);this._active=u,this._ident=0},o}();a.DcsParser=S;var d=new p.Params;d.addParam(0);var r=function(){function o(l){this._handler=l,this._data="",this._params=d,this._hitLimit=!1}return o.prototype.hook=function(l){this._params=l.length>1||l.params[0]?l.clone():d,this._data="",this._hitLimit=!1},o.prototype.put=function(l,n,t){this._hitLimit||(this._data+=h.utf32ToString(l,n,t),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},o.prototype.unhook=function(l){var n=this,t=!1;if(this._hitLimit)t=!1;else if(l&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return n._params=d,n._data="",n._hitLimit=!1,e});return this._params=d,this._data="",this._hitLimit=!1,t},o}();a.DcsHandler=r},2015:function(H,a,g){var h,p=this&&this.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;var _=g(844),u=g(8273),S=g(8742),d=g(6242),r=g(6351),o=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,i){u.fill(this.table,e<<4|i)},t.prototype.add=function(e,i,s,c){this.table[i<<8|e]=s<<4|c},t.prototype.addMany=function(e,i,s,c){for(var f=0;f<e.length;f++)this.table[i<<8|e[f]]=s<<4|c},t}();a.TransitionTable=o;var l=160;a.VT500_TRANSITION_TABLE=function(){var t=new o(4095),e=Array.apply(null,Array(256)).map(function(b,y){return y}),i=function(b,y){return e.slice(b,y)},s=i(32,127),c=i(0,24);c.push(25),c.push.apply(c,i(28,32));var f,v=i(0,14);for(f in t.setDefault(1,0),t.addMany(s,0,2,0),v)t.addMany([24,26,153,154],f,3,0),t.addMany(i(128,144),f,3,0),t.addMany(i(144,152),f,3,0),t.add(156,f,0,0),t.add(27,f,11,1),t.add(157,f,4,8),t.addMany([152,158,159],f,0,7),t.add(155,f,11,3),t.add(144,f,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(i(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(i(64,127),3,7,0),t.addMany(i(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(i(48,60),4,8,4),t.addMany(i(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(i(32,64),6,0,6),t.add(127,6,0,6),t.addMany(i(64,127),6,0,0),t.addMany(i(32,48),3,9,5),t.addMany(i(32,48),5,9,5),t.addMany(i(48,64),5,0,6),t.addMany(i(64,127),5,7,0),t.addMany(i(32,48),4,9,5),t.addMany(i(32,48),1,9,2),t.addMany(i(32,48),2,9,2),t.addMany(i(48,127),2,10,0),t.addMany(i(48,80),1,10,0),t.addMany(i(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(i(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(i(28,32),9,0,9),t.addMany(i(32,48),9,9,12),t.addMany(i(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(i(32,128),11,0,11),t.addMany(i(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(i(28,32),10,0,10),t.addMany(i(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(i(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(i(28,32),12,0,12),t.addMany(i(32,48),12,9,12),t.addMany(i(48,64),12,0,11),t.addMany(i(64,127),12,12,13),t.addMany(i(64,127),10,12,13),t.addMany(i(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(l,0,2,0),t.add(l,8,5,8),t.add(l,6,0,6),t.add(l,11,0,11),t.add(l,13,13,13),t}();var n=function(t){function e(i){void 0===i&&(i=a.VT500_TRANSITION_TABLE);var s=t.call(this)||this;return s._transitions=i,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new S.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(c,f,v){},s._executeHandlerFb=function(c){},s._csiHandlerFb=function(c,f){},s._escHandlerFb=function(c){},s._errorHandlerFb=function(c){return c},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new d.OscParser,s._dcsParser=new r.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return p(e,t),e.prototype._identifier=function(i,s){void 0===s&&(s=[64,126]);var c=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((c=i.prefix.charCodeAt(0))&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var f=0;f<i.intermediates.length;++f){var v=i.intermediates.charCodeAt(f);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=v}}if(1!==i.final.length)throw new Error("final must be a single byte");var b=i.final.charCodeAt(0);if(s[0]>b||b>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(c<<=8)|b},e.prototype.identToString=function(i){for(var s=[];i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(i){this._printHandler=i},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(i,s){var c=this._identifier(i,[48,126]);void 0===this._escHandlers[c]&&(this._escHandlers[c]=[]);var f=this._escHandlers[c];return f.push(s),{dispose:function(){var v=f.indexOf(s);-1!==v&&f.splice(v,1)}}},e.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},e.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},e.prototype.setExecuteHandler=function(i,s){this._executeHandlers[i.charCodeAt(0)]=s},e.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},e.prototype.registerCsiHandler=function(i,s){var c=this._identifier(i);void 0===this._csiHandlers[c]&&(this._csiHandlers[c]=[]);var f=this._csiHandlers[c];return f.push(s),{dispose:function(){var v=f.indexOf(s);-1!==v&&f.splice(v,1)}}},e.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},e.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},e.prototype.registerDcsHandler=function(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)},e.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},e.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},e.prototype.registerOscHandler=function(i,s){return this._oscParser.registerHandler(i,s)},e.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},e.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},e.prototype.setErrorHandler=function(i){this._errorHandler=i},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(i,s,c,f,v){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=c,this._parseStack.transition=f,this._parseStack.chunkPos=v},e.prototype.parse=function(i,s,c){var f,v=0,b=0,y=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,y=this._parseStack.chunkPos+1;else{if(void 0===c||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var C=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===c&&m>-1)for(;m>=0&&!0!==(f=C[m](this._params));m--)if(f instanceof Promise)return this._parseStack.handlerPos=m,f;this._parseStack.handlers=[];break;case 4:if(!1===c&&m>-1)for(;m>=0&&!0!==(f=C[m]());m--)if(f instanceof Promise)return this._parseStack.handlerPos=m,f;this._parseStack.handlers=[];break;case 6:if(f=this._dcsParser.unhook(24!==(v=i[this._parseStack.chunkPos])&&26!==v,c))return f;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(f=this._oscParser.end(24!==(v=i[this._parseStack.chunkPos])&&26!==v,c))return f;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,y=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var A=y;A<s;++A){switch((b=this._transitions.table[this.currentState<<8|((v=i[A])<160?v:l)])>>4){case 2:for(var E=A+1;;++E){if(E>=s||(v=i[E])<32||v>126&&v<l){this._printHandler(i,A,E),A=E-1;break}if(++E>=s||(v=i[E])<32||v>126&&v<l){this._printHandler(i,A,E),A=E-1;break}if(++E>=s||(v=i[E])<32||v>126&&v<l){this._printHandler(i,A,E),A=E-1;break}if(++E>=s||(v=i[E])<32||v>126&&v<l){this._printHandler(i,A,E),A=E-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:A,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var x=(C=this._csiHandlers[this._collect<<8|v])?C.length-1:-1;x>=0&&!0!==(f=C[x](this._params));x--)if(f instanceof Promise)return this._preserveStack(3,C,x,b,A),f;x<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do{switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}}while(++A<s&&(v=i[A])>47&&v<60);A--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:for(var w=this._escHandlers[this._collect<<8|v],L=w?w.length-1:-1;L>=0&&!0!==(f=w[L]());L--)if(f instanceof Promise)return this._preserveStack(4,w,L,b,A),f;L<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(var R=A+1;;++R)if(R>=s||24===(v=i[R])||26===v||27===v||v>127&&v<l){this._dcsParser.put(i,A,R),A=R-1;break}break;case 14:if(f=this._dcsParser.unhook(24!==v&&26!==v))return this._preserveStack(6,[],0,b,A),f;27===v&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var k=A+1;;k++)if(k>=s||(v=i[k])<32||v>127&&v<l){this._oscParser.put(i,A,k),A=k-1;break}break;case 6:if(f=this._oscParser.end(24!==v&&26!==v))return this._preserveStack(5,[],0,b,A),f;27===v&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}},e}(_.Disposable);a.EscapeSequenceParser=n},6242:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;var h=g(5770),p=g(482),_=[],u=function(){function d(){this._state=0,this._active=_,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return d.prototype.registerHandler=function(r,o){void 0===this._handlers[r]&&(this._handlers[r]=[]);var l=this._handlers[r];return l.push(o),{dispose:function(){var n=l.indexOf(o);-1!==n&&l.splice(n,1)}}},d.prototype.clearHandler=function(r){this._handlers[r]&&delete this._handlers[r]},d.prototype.setHandlerFallback=function(r){this._handlerFb=r},d.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},d.prototype.reset=function(){if(2===this._state)for(var r=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;r>=0;--r)this._active[r].end(!1);this._stack.paused=!1,this._active=_,this._id=-1,this._state=0},d.prototype._start=function(){if(this._active=this._handlers[this._id]||_,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].start();else this._handlerFb(this._id,"START")},d.prototype._put=function(r,o,l){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(r,o,l);else this._handlerFb(this._id,"PUT",p.utf32ToString(r,o,l))},d.prototype.start=function(){this.reset(),this._state=1},d.prototype.put=function(r,o,l){if(3!==this._state){if(1===this._state)for(;o<l;){var n=r[o++];if(59===n){this._state=2,this._start();break}if(n<48||57<n)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+n-48}2===this._state&&l-o>0&&this._put(r,o,l)}},d.prototype.end=function(r,o){if(void 0===o&&(o=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var l=!1,n=this._active.length-1,t=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,l=o,t=this._stack.fallThrough,this._stack.paused=!1),!t&&!1===l){for(;n>=0&&!0!==(l=this._active[n].end(r));n--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,l;n--}for(;n>=0;n--)if((l=this._active[n].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,l}else this._handlerFb(this._id,"END",r);this._active=_,this._id=-1,this._state=0}},d}();a.OscParser=u;var S=function(){function d(r){this._handler=r,this._data="",this._hitLimit=!1}return d.prototype.start=function(){this._data="",this._hitLimit=!1},d.prototype.put=function(r,o,l){this._hitLimit||(this._data+=p.utf32ToString(r,o,l),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},d.prototype.end=function(r){var o=this,l=!1;if(this._hitLimit)l=!1;else if(r&&(l=this._handler(this._data))instanceof Promise)return l.then(function(n){return o._data="",o._hitLimit=!1,n});return this._data="",this._hitLimit=!1,l},d}();a.OscHandler=S},8742:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;var g=2147483647,h=function(){function p(_,u){if(void 0===_&&(_=32),void 0===u&&(u=32),this.maxLength=_,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(_),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(_),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(_){var u=new p;if(!_.length)return u;for(var S=_[0]instanceof Array?1:0;S<_.length;++S){var d=_[S];if(d instanceof Array)for(var r=0;r<d.length;++r)u.addSubParam(d[r]);else u.addParam(d)}return u},p.prototype.clone=function(){var _=new p(this.maxLength,this.maxSubParamsLength);return _.params.set(this.params),_.length=this.length,_._subParams.set(this._subParams),_._subParamsLength=this._subParamsLength,_._subParamsIdx.set(this._subParamsIdx),_._rejectDigits=this._rejectDigits,_._rejectSubDigits=this._rejectSubDigits,_._digitIsSub=this._digitIsSub,_},p.prototype.toArray=function(){for(var _=[],u=0;u<this.length;++u){_.push(this.params[u]);var S=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-S>0&&_.push(Array.prototype.slice.call(this._subParams,S,d))}return _},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(_){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=_>g?g:_}},p.prototype.addSubParam=function(_){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=_>g?g:_,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(_){return(255&this._subParamsIdx[_])-(this._subParamsIdx[_]>>8)>0},p.prototype.getSubParams=function(_){var u=this._subParamsIdx[_]>>8,S=255&this._subParamsIdx[_];return S-u>0?this._subParams.subarray(u,S):null},p.prototype.getSubParamsAll=function(){for(var _={},u=0;u<this.length;++u){var S=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-S>0&&(_[u]=this._subParams.slice(S,d))}return _},p.prototype.addDigit=function(_){var u;if(!(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var S=this._digitIsSub?this._subParams:this.params,d=S[u-1];S[u-1]=~d?Math.min(10*d+_,g):_}},p}();a.Params=h},5741:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0;var g=function(){function h(){this._addons=[]}return h.prototype.dispose=function(){for(var p=this._addons.length-1;p>=0;p--)this._addons[p].instance.dispose()},h.prototype.loadAddon=function(p,_){var u=this,S={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(S),_.dispose=function(){return u._wrappedAddonDispose(S)},_.activate(p)},h.prototype._wrappedAddonDispose=function(p){if(!p.isDisposed){for(var _=-1,u=0;u<this._addons.length;u++)if(this._addons[u]===p){_=u;break}if(-1===_)throw new Error("Could not dispose an addon that has not been loaded");p.isDisposed=!0,p.dispose.apply(p.instance),this._addons.splice(_,1)}},h}();a.AddonManager=g},8771:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;var h=g(3785),p=g(511),_=function(){function u(S,d){this._buffer=S,this.type=d}return u.prototype.init=function(S){return this._buffer=S,this},Object.defineProperty(u.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),u.prototype.getLine=function(S){var d=this._buffer.lines.get(S);if(d)return new h.BufferLineApiView(d)},u.prototype.getNullCell=function(){return new p.CellData},u}();a.BufferApiView=_},3785:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;var h=g(511),p=function(){function _(u){this._line=u}return Object.defineProperty(_.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),_.prototype.getCell=function(u,S){if(!(u<0||u>=this._line.length))return S?(this._line.loadCell(u,S),S):this._line.loadCell(u,new h.CellData)},_.prototype.translateToString=function(u,S,d){return this._line.translateToString(u,S,d)},_}();a.BufferLineApiView=p},8285:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;var h=g(8771),p=g(8460),_=function(){function u(S){var d=this;this._core=S,this._onBufferChange=new p.EventEmitter,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return d._onBufferChange.fire(d.active)})}return Object.defineProperty(u.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),u}();a.BufferNamespaceApi=_},7975:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0;var g=function(){function h(p){this._core=p}return h.prototype.registerCsiHandler=function(p,_){return this._core.registerCsiHandler(p,function(u){return _(u.toArray())})},h.prototype.addCsiHandler=function(p,_){return this.registerCsiHandler(p,_)},h.prototype.registerDcsHandler=function(p,_){return this._core.registerDcsHandler(p,function(u,S){return _(u,S.toArray())})},h.prototype.addDcsHandler=function(p,_){return this.registerDcsHandler(p,_)},h.prototype.registerEscHandler=function(p,_){return this._core.registerEscHandler(p,_)},h.prototype.addEscHandler=function(p,_){return this.registerEscHandler(p,_)},h.prototype.registerOscHandler=function(p,_){return this._core.registerOscHandler(p,_)},h.prototype.addOscHandler=function(p,_){return this.registerOscHandler(p,_)},h}();a.ParserApi=g},7090:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0;var g=function(){function h(p){this._core=p}return h.prototype.register=function(p){this._core.unicodeService.register(p)},Object.defineProperty(h.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(p){this._core.unicodeService.activeVersion=p},enumerable:!1,configurable:!0}),h}();a.UnicodeApi=g},744:function(H,a,g){var h,p=this&&this.__extends||(h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},u=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;var S=g(2585),d=g(5295),r=g(8460),o=g(844);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;var l=function(n){function t(e){var i=n.call(this)||this;return i._optionsService=e,i.isUserScrolling=!1,i._onResize=new r.EventEmitter,i._onScroll=new r.EventEmitter,i.cols=Math.max(e.options.cols||0,a.MINIMUM_COLS),i.rows=Math.max(e.options.rows||0,a.MINIMUM_ROWS),i.buffers=new d.BufferSet(e,i),i}return p(t,n),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){n.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,i){this.cols=e,this.rows=i,this.buffers.resize(e,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:i})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,i){void 0===i&&(i=!1);var s,c=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=c.getBlankLine(e,i),this._cachedBlankLine=s),s.isWrapped=i;var f=c.ybase+c.scrollTop,v=c.ybase+c.scrollBottom;if(0===c.scrollTop){var b=c.lines.isFull;v===c.lines.length-1?b?c.lines.recycle().copyFrom(s):c.lines.push(s.clone()):c.lines.splice(v+1,0,s.clone()),b?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else c.lines.shiftElements(f+1,v-f+1-1,-1),c.lines.set(v,s.clone());this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)},t.prototype.scrollLines=function(e,i,s){var c=this.buffer;if(e<0){if(0===c.ydisp)return;this.isUserScrolling=!0}else e+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);var f=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+e,c.ybase),0),f!==c.ydisp&&(i||this._onScroll.fire(c.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var i=e-this.buffer.ydisp;0!==i&&this.scrollLines(i)},_([u(0,S.IOptionsService)],t)}(o.Disposable);a.BufferService=l},7994:(H,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0;var g=function(){function h(){this.glevel=0,this._charsets=[]}return h.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},h.prototype.setgLevel=function(p){this.glevel=p,this.charset=this._charsets[p]},h.prototype.setgCharset=function(p,_){this._charsets[p]=_,this.glevel===p&&(this.charset=_)},h}();a.CharsetService=g},1753:function(H,a,g){var h=this&&this.__decorate||function(n,t,e,i){var s,c=arguments.length,f=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,e,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(f=(c<3?s(f):c>3?s(t,e,f):s(t,e))||f);return c>3&&f&&Object.defineProperty(t,e,f),f},p=this&&this.__param||function(n,t){return function(e,i){t(e,i,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;var _=g(2585),u=g(8460),S={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(n){return 4!==n.button&&1===n.action&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)}},VT200:{events:19,restrict:function(n){return 32!==n.action}},DRAG:{events:23,restrict:function(n){return 32!==n.action||3!==n.button}},ANY:{events:31,restrict:function(n){return!0}}};function d(n,t){var e=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return 4===n.button?(e|=64,e|=n.action):(e|=3&n.button,4&n.button&&(e|=64),8&n.button&&(e|=128),32===n.action?e|=32:0!==n.action||t||(e|=3)),e}var r=String.fromCharCode,o={DEFAULT:function(n){var t=[d(n,!1)+32,n.col+32,n.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"\x1b[M"+r(t[0])+r(t[1])+r(t[2])},SGR:function(n){var t=0===n.action&&4!==n.button?"m":"M";return"\x1b[<"+d(n,!0)+";"+n.col+";"+n.row+t}},l=function(){function n(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new u.EventEmitter,this._lastEvent=null;for(var i=0,s=Object.keys(S);i<s.length;i++){var c=s[i];this.addProtocol(c,S[c])}for(var f=0,v=Object.keys(o);f<v.length;f++){var b=v[f];this.addEncoding(b,o[b])}this.reset()}return n.prototype.addProtocol=function(t,e){this._protocols[t]=e},n.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(n.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(n.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),n.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||4===t.button&&32===t.action||3===t.button&&32!==t.action||4!==t.button&&(2===t.action||3===t.action)||(t.col++,t.row++,32===t.action&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},n.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},n.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},h([p(0,_.IBufferService),p(1,_.ICoreService)],n)}();a.CoreMouseService=l},6975:function(H,a,g){var h,p=this&&this.__extends||(h=function(e,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])})(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}h(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(e,i,s,c){var f,v=arguments.length,b=v<3?i:null===c?c=Object.getOwnPropertyDescriptor(i,s):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(e,i,s,c);else for(var y=e.length-1;y>=0;y--)(f=e[y])&&(b=(v<3?f(b):v>3?f(i,s,b):f(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},u=this&&this.__param||function(e,i){return function(s,c){i(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;var S=g(2585),d=g(8460),r=g(1439),o=g(844),l=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function i(s,c,f,v){var b=e.call(this)||this;return b._bufferService=c,b._logService=f,b._optionsService=v,b.isCursorInitialized=!1,b.isCursorHidden=!1,b._onData=b.register(new d.EventEmitter),b._onUserInput=b.register(new d.EventEmitter),b._onBinary=b.register(new d.EventEmitter),b._scrollToBottom=s,b.register({dispose:function(){return b._scrollToBottom=void 0}}),b.modes=r.clone(l),b.decPrivateModes=r.clone(n),b}return p(i,e),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=r.clone(l),this.decPrivateModes=r.clone(n)},i.prototype.triggerDataEvent=function(s,c){if(void 0===c&&(c=!1),!this._optionsService.options.disableStdin){var f=this._bufferService.buffer;f.ybase!==f.ydisp&&this._scrollToBottom(),c&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(v){return v.charCodeAt(0)})}),this._onData.fire(s)}},i.prototype.triggerBinaryEvent=function(s){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(c){return c.charCodeAt(0)})}),this._onBinary.fire(s))},_([u(1,S.IBufferService),u(2,S.ILogService),u(3,S.IOptionsService)],i)}(o.Disposable);a.CoreService=t},3730:function(H,a,g){var h=this&&this.__decorate||function(S,d,r,o){var l,n=arguments.length,t=n<3?d:null===o?o=Object.getOwnPropertyDescriptor(d,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(S,d,r,o);else for(var e=S.length-1;e>=0;e--)(l=S[e])&&(t=(n<3?l(t):n>3?l(d,r,t):l(d,r))||t);return n>3&&t&&Object.defineProperty(d,r,t),t},p=this&&this.__param||function(S,d){return function(r,o){d(r,o,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DirtyRowService=void 0;var _=g(2585),u=function(){function S(d){this._bufferService=d,this.clearRange()}return Object.defineProperty(S.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),S.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},S.prototype.markDirty=function(d){d<this._start?this._start=d:d>this._end&&(this._end=d)},S.prototype.markRangeDirty=function(d,r){if(d>r){var o=d;d=r,r=o}d<this._start&&(this._start=d),r>this._end&&(this._end=r)},S.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},h([p(0,_.IBufferService)],S)}();a.DirtyRowService=u},4348:function(H,a,g){var h=this&&this.__spreadArray||function(d,r){for(var o=0,l=r.length,n=d.length;o<l;o++,n++)d[n]=r[o];return d};Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;var p=g(2585),_=g(8343),u=function(){function d(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];this._entries=new Map;for(var l=0,n=r;l<n.length;l++){var t=n[l];this.set(t[0],t[1])}}return d.prototype.set=function(r,o){var l=this._entries.get(r);return this._entries.set(r,o),l},d.prototype.forEach=function(r){this._entries.forEach(function(o,l){return r(l,o)})},d.prototype.has=function(r){return this._entries.has(r)},d.prototype.get=function(r){return this._entries.get(r)},d}();a.ServiceCollection=u;var S=function(){function d(){this._services=new u,this._services.set(p.IInstantiationService,this)}return d.prototype.setService=function(r,o){this._services.set(r,o)},d.prototype.getService=function(r){return this._services.get(r)},d.prototype.createInstance=function(r){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];for(var n=_.getServiceDependencies(r).sort(function(v,b){return v.index-b.index}),t=[],e=0,i=n;e<i.length;e++){var s=i[e],c=this._services.get(s.id);if(!c)throw new Error("[createInstance] "+r.name+" depends on UNKNOWN service "+s.id+".");t.push(c)}var f=n.length>0?n[0].index:o.length;if(o.length!==f)throw new Error("[createInstance] First service dependency of "+r.name+" at position "+(f+1)+" conflicts with "+o.length+" static arguments");return new(r.bind.apply(r,h([void 0],h(h([],o),t))))},d}();a.InstantiationService=S},7866:function(H,a,g){var h=this&&this.__decorate||function(r,o,l,n){var t,e=arguments.length,i=e<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,o,l,n);else for(var s=r.length-1;s>=0;s--)(t=r[s])&&(i=(e<3?t(i):e>3?t(o,l,i):t(o,l))||i);return e>3&&i&&Object.defineProperty(o,l,i),i},p=this&&this.__param||function(r,o){return function(l,n){o(l,n,r)}},_=this&&this.__spreadArray||function(r,o){for(var l=0,n=o.length,t=r.length;l<n;l++,t++)r[t]=o[l];return r};Object.defineProperty(a,"__esModule",{value:!0}),a.LogService=void 0;var u=g(2585),S={debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},d=function(){function r(o){var l=this;this._optionsService=o,this.logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){"logLevel"===n&&l._updateLogLevel()})}return r.prototype._updateLogLevel=function(){this.logLevel=S[this._optionsService.options.logLevel]},r.prototype._evalLazyOptionalParams=function(o){for(var l=0;l<o.length;l++)"function"==typeof o[l]&&(o[l]=o[l]())},r.prototype._log=function(o,l,n){this._evalLazyOptionalParams(n),o.call.apply(o,_([console,"xterm.js: "+l],n))},r.prototype.debug=function(o){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.DEBUG&&this._log(console.log,o,l)},r.prototype.info=function(o){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.INFO&&this._log(console.info,o,l)},r.prototype.warn=function(o){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.WARN&&this._log(console.warn,o,l)},r.prototype.error=function(o){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.ERROR&&this._log(console.error,o,l)},h([p(0,u.IOptionsService)],r)}();a.LogService=d},7302:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=a.DEFAULT_BELL_SOUND=void 0;var h=g(8460),p=g(6114),_=g(1439);a.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",a.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:a.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var u=["normal","bold","100","200","300","400","500","600","700","800","900"],S=["cols","rows"],d=function(){function r(o){this._onOptionChange=new h.EventEmitter,this.options=_.clone(a.DEFAULT_OPTIONS);for(var l=0,n=Object.keys(o);l<n.length;l++){var t=n[l];if(t in this.options)try{this.options[t]=this._sanitizeAndValidateOption(t,o[t])}catch(i){console.error(i)}}}return Object.defineProperty(r.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),r.prototype.setOption=function(o,l){if(!(o in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');if(S.includes(o))throw new Error('Option "'+o+'" can only be set in the constructor');this.options[o]!==l&&(l=this._sanitizeAndValidateOption(o,l),this.options[o]!==l&&(this.options[o]=l,this._onOptionChange.fire(o)))},r.prototype._sanitizeAndValidateOption=function(o,l){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":l||(l=a.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof l&&1<=l&&l<=1e3)break;l=u.includes(l)?l:a.DEFAULT_OPTIONS[o];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(o+" cannot be less than 1, value: "+l);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+l);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+l);case"rows":case"cols":if(!l&&0!==l)throw new Error(o+" must be numeric, value: "+l)}return l},r.prototype.getOption=function(o){if(!(o in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return this.options[o]},r}();a.OptionsService=d},8343:(H,a)=>{function g(h,p,_){p.di$target===p?p.di$dependencies.push({id:h,index:_}):(p.di$dependencies=[{id:h,index:_}],p.di$target=p)}Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0,a.serviceRegistry=new Map,a.getServiceDependencies=function(h){return h.di$dependencies||[]},a.createDecorator=function(h){if(a.serviceRegistry.has(h))return a.serviceRegistry.get(h);var p=function(_,u,S){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");g(p,_,S)};return p.toString=function(){return h},a.serviceRegistry.set(h,p),p}},2585:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IUnicodeService=a.LogLevelEnum=a.IOptionsService=a.ILogService=a.IInstantiationService=a.IDirtyRowService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;var h,p=g(8343);a.IBufferService=p.createDecorator("BufferService"),a.ICoreMouseService=p.createDecorator("CoreMouseService"),a.ICoreService=p.createDecorator("CoreService"),a.ICharsetService=p.createDecorator("CharsetService"),a.IDirtyRowService=p.createDecorator("DirtyRowService"),a.IInstantiationService=p.createDecorator("InstantiationService"),a.ILogService=p.createDecorator("LogService"),a.IOptionsService=p.createDecorator("OptionsService"),(h=a.LogLevelEnum||(a.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",a.IUnicodeService=p.createDecorator("UnicodeService")},1480:(H,a,g)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;var h=g(8460),p=g(225),_=function(){function u(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter;var S=new p.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}return Object.defineProperty(u.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"activeVersion",{get:function(){return this._active},set:function(S){if(!this._providers[S])throw new Error('unknown Unicode version "'+S+'"');this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)},enumerable:!1,configurable:!0}),u.prototype.register=function(S){this._providers[S.version]=S},u.prototype.wcwidth=function(S){return this._activeProvider.wcwidth(S)},u.prototype.getStringCellWidth=function(S){for(var d=0,r=S.length,o=0;o<r;++o){var l=S.charCodeAt(o);if(55296<=l&&l<=56319){if(++o>=r)return d+this.wcwidth(l);var n=S.charCodeAt(o);56320<=n&&n<=57343?l=1024*(l-55296)+n-56320+65536:d+=this.wcwidth(n)}d+=this.wcwidth(l)}return d},u}();a.UnicodeService=_}},V={};function Z(H){var a=V[H];if(void 0!==a)return a.exports;var g=V[H]={exports:{}};return fe[H].call(g.exports,g,g.exports,Z),g.exports}var $={};return(()=>{var H=$;Object.defineProperty(H,"__esModule",{value:!0}),H.Terminal=void 0;var a=Z(3236),g=Z(9042),h=Z(7975),p=Z(7090),_=Z(5741),u=Z(8285),S=function(){function d(r){this._core=new a.Terminal(r),this._addonManager=new _.AddonManager}return d.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(d.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"unicode",{get:function(){return this._checkProposedApi(),new p.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new u.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"modes",{get:function(){var r=this._core.coreService.decPrivateModes,o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}},enumerable:!1,configurable:!0}),d.prototype.blur=function(){this._core.blur()},d.prototype.focus=function(){this._core.focus()},d.prototype.resize=function(r,o){this._verifyIntegers(r,o),this._core.resize(r,o)},d.prototype.open=function(r){this._core.open(r)},d.prototype.attachCustomKeyEventHandler=function(r){this._core.attachCustomKeyEventHandler(r)},d.prototype.registerLinkMatcher=function(r,o,l){return this._checkProposedApi(),this._core.registerLinkMatcher(r,o,l)},d.prototype.deregisterLinkMatcher=function(r){this._checkProposedApi(),this._core.deregisterLinkMatcher(r)},d.prototype.registerLinkProvider=function(r){return this._checkProposedApi(),this._core.registerLinkProvider(r)},d.prototype.registerCharacterJoiner=function(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)},d.prototype.deregisterCharacterJoiner=function(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)},d.prototype.registerMarker=function(r){return this._checkProposedApi(),this._verifyIntegers(r),this._core.addMarker(r)},d.prototype.addMarker=function(r){return this.registerMarker(r)},d.prototype.hasSelection=function(){return this._core.hasSelection()},d.prototype.select=function(r,o,l){this._verifyIntegers(r,o,l),this._core.select(r,o,l)},d.prototype.getSelection=function(){return this._core.getSelection()},d.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},d.prototype.clearSelection=function(){this._core.clearSelection()},d.prototype.selectAll=function(){this._core.selectAll()},d.prototype.selectLines=function(r,o){this._verifyIntegers(r,o),this._core.selectLines(r,o)},d.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},d.prototype.scrollLines=function(r){this._verifyIntegers(r),this._core.scrollLines(r)},d.prototype.scrollPages=function(r){this._verifyIntegers(r),this._core.scrollPages(r)},d.prototype.scrollToTop=function(){this._core.scrollToTop()},d.prototype.scrollToBottom=function(){this._core.scrollToBottom()},d.prototype.scrollToLine=function(r){this._verifyIntegers(r),this._core.scrollToLine(r)},d.prototype.clear=function(){this._core.clear()},d.prototype.write=function(r,o){this._core.write(r,o)},d.prototype.writeUtf8=function(r,o){this._core.write(r,o)},d.prototype.writeln=function(r,o){this._core.write(r),this._core.write("\r\n",o)},d.prototype.paste=function(r){this._core.paste(r)},d.prototype.getOption=function(r){return this._core.optionsService.getOption(r)},d.prototype.setOption=function(r,o){this._core.optionsService.setOption(r,o)},d.prototype.refresh=function(r,o){this._verifyIntegers(r,o),this._core.refresh(r,o)},d.prototype.reset=function(){this._core.reset()},d.prototype.loadAddon=function(r){return this._addonManager.loadAddon(this,r)},Object.defineProperty(d,"strings",{get:function(){return g},enumerable:!1,configurable:!0}),d.prototype._verifyIntegers=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var l=0,n=r;l<n.length;l++){var t=n[l];if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}},d}();H.Terminal=S})(),$})()},3719:(Ae,fe,V)=>{"use strict";V.r(fe),V.d(fe,{ShellModule:()=>x});var Z=V(2057),$=V(1121),H=V(5073),a=V(1504),g=V(126),h=V(8239),p=V(3815),_=V(4448),u=V(9765),S=V(6782),d=V(5544),r=V(3891),o=V(7575),l=V(2245),n=V(4328),t=V(4788),e=V(3069),i=V(7347),s=V(1260),c=V(4751),f=V(7935);const v=["anchor"];function b(w,L){if(1&w&&(t.\u0275\u0275i18nStart(0,2,2),t.\u0275\u0275element(1,"mat-option",8),t.\u0275\u0275i18nEnd()),2&w){const R=L.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("value",R),t.\u0275\u0275i18nExp(R),t.\u0275\u0275i18nApply(0)}}function y(w,L){if(1&w){const R=t.\u0275\u0275getCurrentView();t.\u0275\u0275i18nStart(0,2,1),t.\u0275\u0275elementStart(1,"mat-select",6),t.\u0275\u0275listener("ngModelChange",function(j){return t.\u0275\u0275restoreView(R),t.\u0275\u0275nextContext().onPodContainerChange(j)})("ngModelChange",function(j){return t.\u0275\u0275restoreView(R),t.\u0275\u0275nextContext().selectedContainer=j}),t.\u0275\u0275template(2,b,2,2,"mat-option",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275i18nEnd()}if(2&w){const R=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngModel",R.selectedContainer),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",R.containers)}}let C=(()=>{class w{constructor(R,k,j,W,F,N){this.containers_=R,this.utility_=k,this.activatedRoute_=j,this.matSnackBar_=W,this.cdr_=F,this._router=N,this.connected_=!1,this.connSubject_=new _.t(100),this.incommingMessage$_=new u.xQ,this.endpoint_=o.wE.resource(o._z.pod,!0),this.unsubscribe_=new u.xQ,this.keyEvent$_=new _.t(2),this.namespace_=this.activatedRoute_.snapshot.params.resourceNamespace,this.podName=this.activatedRoute_.snapshot.params.resourceName;const K=this.endpoint_.child(this.podName,o._z.container,this.namespace_);this.containers_.get(K).pipe((0,S.R)(this.unsubscribe_)).subscribe(M=>{this.containers=M.containers,this.containers.length>0&&!this.selectedContainer&&this.onPodContainerChange(this.containers[0])})}ngAfterViewInit(){this.activatedRoute_.paramMap.pipe((0,S.R)(this.unsubscribe_)).subscribe(R=>{const k=R.get("containerName");this.conn_&&this.connected_&&this.disconnect(),k&&(this.selectedContainer=k,this.setupConnection(),this.initTerm())})}ngOnDestroy(){this.unsubscribe_.next(),this.unsubscribe_.complete(),this.conn_&&this.conn_.close(),this.connSubject_&&this.connSubject_.complete(),this.term&&this.term.dispose(),this.incommingMessage$_.complete()}onPodContainerChange(R){this._router.navigate([`/shell/${this.namespace_}/${this.podName}/${R}`],{queryParamsHandling:"preserve"})}disconnect(){this.conn_&&this.conn_.close(),this.connSubject_&&(this.connSubject_.complete(),this.connSubject_=new _.t(100)),this.term&&this.term.dispose(),this.incommingMessage$_.complete(),this.incommingMessage$_=new u.xQ}initTerm(){this.connSubject_&&(this.connSubject_.complete(),this.connSubject_=new _.t(100)),this.term&&this.term.dispose(),this.term=new d.Terminal({fontSize:14,fontFamily:'Consolas, "Courier New", monospace',bellStyle:"sound",cursorBlink:!0});const R=new r.FitAddon;this.term.loadAddon(R),this.term.open(this.anchorRef.nativeElement),this.debouncedFit_=(0,p.debounce)(()=>{R.fit(),this.cdr_.markForCheck()},100),this.debouncedFit_(),window.addEventListener("resize",()=>this.debouncedFit_()),this.connSubject_.pipe((0,S.R)(this.unsubscribe_)).subscribe(k=>{this.handleConnectionMessage(k)}),this.term.onData(this.onTerminalSendString.bind(this)),this.term.onResize(this.onTerminalResize.bind(this)),this.term.onKey(k=>{this.keyEvent$_.next(k.domEvent)}),this.cdr_.markForCheck()}setupConnection(){var R=this;return(0,h.Z)(function*(){if(!(R.selectedContainer&&R.podName&&R.namespace_)||R.connecting_)return;R.connecting_=!0,R.connectionClosed_=!1;const k=`${o.wE.utility(o.b$.shell).shell(R.namespace_,R.podName)}/${R.selectedContainer}`,{id:j}=yield R.utility_.shell(k).toPromise();R.conn_=new SockJS(`api/sockjs?${j}`),R.conn_.onopen=R.onConnectionOpen.bind(R,j),R.conn_.onmessage=R.onConnectionMessage.bind(R),R.conn_.onclose=R.onConnectionClose.bind(R),R.cdr_.markForCheck()})()}onConnectionOpen(R){const k={Op:"bind",SessionID:R};this.conn_.send(JSON.stringify(k)),this.connSubject_.next(k),this.connected_=!0,this.connecting_=!1,this.connectionClosed_=!1,this.onTerminalResize(),this.term.focus(),this.cdr_.markForCheck()}handleConnectionMessage(R){"stdout"===R.Op&&this.term.write(R.Data),"toast"===R.Op&&this.matSnackBar_.open(R.Data,null,{duration:3e3}),this.incommingMessage$_.next(R),this.cdr_.markForCheck()}onConnectionMessage(R){const k=JSON.parse(R.data);this.connSubject_.next(k)}onConnectionClose(R){!this.connected_||(this.conn_.close(),this.connected_=!1,this.connecting_=!1,this.connectionClosed_=!0,this.matSnackBar_.open(R.reason,null,{duration:3e3}),this.cdr_.markForCheck())}onTerminalSendString(R){this.connected_&&this.conn_.send(JSON.stringify({Op:"stdin",Data:R,Cols:this.term.cols,Rows:this.term.rows}))}onTerminalResize(){this.connected_&&this.conn_.send(JSON.stringify({Op:"resize",Cols:this.term.cols,Rows:this.term.rows}))}}return w.\u0275fac=function(R){return new(R||w)(t.\u0275\u0275directiveInject(l.p),t.\u0275\u0275directiveInject(n.t),t.\u0275\u0275directiveInject(a.ActivatedRoute),t.\u0275\u0275directiveInject(e.ux),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(a.Router))},w.\u0275cmp=t.\u0275\u0275defineComponent({type:w,selectors:[["kd-shell"]],viewQuery:function(R,k){if(1&R&&t.\u0275\u0275viewQuery(v,7),2&R){let j;t.\u0275\u0275queryRefresh(j=t.\u0275\u0275loadQuery())&&(k.anchorRef=j.first)}},decls:6,vars:3,consts:function(){let L;return L="\n    " + "\ufffd0\ufffd" + "\uC758\n    " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "\n      " + "\ufffd*2:2\ufffd\ufffd#1:2\ufffd" + "\n        " + "\ufffd0:2\ufffd" + "\n      " + "\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd" + "\n    " + "\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd" + "\uC5D0 \uC178 \uC778\n  ",[[1,"kd-shell-content-card",3,"expandable"],["title","",1,"kd-shell-content-card-title"],L,["class","kd-shell-toolbar-select",3,"ngModel","ngModelChange",4,"ngIf"],["content","",1,"xterm-anchor"],["anchor",""],[1,"kd-shell-toolbar-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(R,k){1&R&&(t.\u0275\u0275elementStart(0,"kd-card",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275i18nStart(2,2),t.\u0275\u0275template(3,y,3,2,"mat-select",3),t.\u0275\u0275i18nEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"div",4,5),t.\u0275\u0275elementEnd()),2&R&&(t.\u0275\u0275property("expandable",!1),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",(null==k.containers?null:k.containers.length)>0),t.\u0275\u0275i18nExp(k.podName),t.\u0275\u0275i18nApply(2))},directives:[i.A,Z.NgIf,s.gD,c.NgControlStatus,c.NgModel,Z.NgForOf,f.ey],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 56px);width:100%}.kd-shell-content-card[_ngcontent-%COMP%]{box-sizing:border-box;display:block;height:100%;width:100%}.kd-shell-content-card[_ngcontent-%COMP%]   .kd-shell-content-card-title[_ngcontent-%COMP%]{display:inline}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card{display:flex;flex-flow:column;height:100%}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card>mat-card-title+div{display:flex;flex:1;flex-flow:column}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content{display:flex;flex:1;flex-flow:column;background:#000;padding:0}.kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content>div, .kd-shell-content-card[_ngcontent-%COMP%]     mat-card mat-card-content .xterm-anchor{display:flex;flex:1;flex-flow:column}.kd-shell-toolbar-select[_ngcontent-%COMP%]{width:180px}.kd-shell-toolbar-select[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{font-size:20px;min-width:160px}"]}),w})();const m={path:":resourceNamespace/:resourceName/:containerName",component:C,data:{breadcrumb:"Shell",parent:g.iO}},A={path:":resourceNamespace/:resourceName",component:C,data:{breadcrumb:"Shell",parent:g.iO}};let E=(()=>{class w{}return w.\u0275fac=function(R){return new(R||w)},w.\u0275mod=t.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=t.\u0275\u0275defineInjector({imports:[[a.RouterModule.forChild([A,m])],a.RouterModule]}),w})(),x=(()=>{class w{}return w.\u0275fac=function(R){return new(R||w)},w.\u0275mod=t.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=t.\u0275\u0275defineInjector({imports:[[Z.CommonModule,H.m,$.K,E]]}),w})()}}]);