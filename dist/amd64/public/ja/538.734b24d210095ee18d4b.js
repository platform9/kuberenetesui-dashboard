"use strict";(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[538],{780:(J,l,o)=>{o.r(l),o.d(l,{SecretModule:()=>k});var T=o(1121),O=o(5073),a=o(1504),h=o(3621),g=o(7176),N=o(9765),M=o(6782),E=o(4489),S=o(1495),f=o(5387),C=o(7575),A=o(2245),e=o(4788),m=o(2787),I=o(958),v=o(7347),c=o(2057),u=o(1870),p=o(8497),U=o(3778),D=o(592),y=o(6833),x=o(3263),P=o(4372),d=o(4751),F=o(2895);function G(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"mat-form-field",2),e.\u0275\u0275elementStart(2,"textarea",3),e.\u0275\u0275listener("ngModelChange",function(r){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().text=r}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",4),e.\u0275\u0275elementStart(4,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().update()}),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().cancel()}),e.\u0275\u0275i18n(7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.text)}}let H=(()=>{class n{constructor(t,_,r){this.dialog_=t,this.http_=_,this.decoder_=r,this.onClose=new e.EventEmitter,this.text="",this.editing_=!1}set editing(t){this.editing_=t,this.updateText_()}get editing(){return this.editing_}set secret(t){this.secret_=t}get secret(){return this.secret_}ngOnInit(){this.updateText_()}update(){const t=u.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.get(t).toPromise().then(_=>{const r=this.encode_(this.text);_.data[this.key]=this.encode_(this.text);const s=u.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.put(s,_,{headers:this.getHttpHeaders_(),responseType:"text"}).subscribe(()=>{this.secret_.data[this.key]=r,this.onClose.emit(!0)},this.handleErrorResponse_.bind(this))})}cancel(){this.onClose.emit(!0)}updateText_(){this.text=this.secret&&this.key?this.decoder_.base64(this.secret.data[this.key]):""}encode_(t){return btoa(t)}getHttpHeaders_(){const t=new p.WM;return t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}handleErrorResponse_(t){t&&this.dialog_.open(U.a,{width:"630px",data:{title:"OK"===t.statusText?"Internal server error":t.statusText,message:t.error||"Could not perform the operation.",confirmLabel:"OK"}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(D.uw),e.\u0275\u0275directiveInject(p.eN),e.\u0275\u0275directiveInject(m.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail-edit"]],inputs:{key:"key",editing:"editing",secret:"secret"},outputs:{onClose:"onClose"},decls:1,vars:1,consts:function(){let i,t;return i="\u66F4\u65B0",t="\u30AD\u30E3\u30F3\u30BB\u30EB",[["class","kd-secret-detail-edit-container",4,"ngIf"],[1,"kd-secret-detail-edit-container"],[1,"kd-secret-detail-text"],["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","20","matInput","",3,"ngModel","ngModelChange"],[1,"kd-secret-detail-actions"],["mat-raised-button","","color","primary","id","confirm-edit",3,"click"],i,["mat-button","","color","primary",3,"click"],t]},template:function(t,_){1&t&&e.\u0275\u0275template(0,G,8,1,"div",0),2&t&&e.\u0275\u0275property("ngIf",_.secret)},directives:[c.NgIf,y.KE,x.IC,P.Nt,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,F.lW],styles:['.kd-secret-detail-text[_ngcontent-%COMP%]{width:100%}.kd-secret-detail-text[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{font-family:"Roboto Mono Regular",monospace;font-size:14px}.kd-secret-detail-actions[_ngcontent-%COMP%]{min-height:52px;padding:8px 0}']}),n})();function L(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"kd-hidden-property",7,8),e.\u0275\u0275elementStart(2,"div",9),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",11),e.\u0275\u0275elementStart(7,"kd-secret-detail-edit",12),e.\u0275\u0275listener("onClose",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275reference(1),s=e.\u0275\u0275nextContext();return r.mode=s.HiddenPropertyMode.Hidden}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",13),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,_=e.\u0275\u0275reference(1),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("enableEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.decoder.base64(null==r.secret?null:r.secret.data[t])),e.\u0275\u0275advance(2),e.\u0275\u0275property("secret",r.secret)("key",t)("editing",_.mode==r.HiddenPropertyMode.Edit),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",r.decoder.base64(null==r.secret?null:r.secret.data[t]).length," bytes")}}function B(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementContainerEnd())}let b=(()=>{class n{constructor(t,_,r,s,z){this.secret_=t,this.actionbar_=_,this.activatedRoute_=r,this.notifications_=s,this.decoder=z,this.endpoint_=C.wE.resource(C._z.secret,!0),this.unsubscribe_=new N.xQ,this.isInitialized=!1,this.HiddenPropertyMode=E.C}ngOnInit(){const t=this.activatedRoute_.snapshot.params.resourceName,_=this.activatedRoute_.snapshot.params.resourceNamespace;this.secret_.get(this.endpoint_.detail(),t,_).pipe((0,M.R)(this.unsubscribe_)).subscribe(r=>{this.secret=r,this.notifications_.pushErrors(r.errors),this.actionbar_.onInit.emit(new S.N("Secret",r.objectMeta,r.typeMeta)),this.isInitialized=!0})}ngOnDestroy(){this.unsubscribe_.next(),this.unsubscribe_.complete(),this.actionbar_.onDetailsLeave.emit()}getDataKeys(){return this.secret&&this.secret.data?Object.keys(this.secret.data):[]}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(A.p),e.\u0275\u0275directiveInject(S.b),e.\u0275\u0275directiveInject(a.ActivatedRoute),e.\u0275\u0275directiveInject(f.TF),e.\u0275\u0275directiveInject(m.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail"]],decls:7,vars:5,consts:function(){let i,t;return i="\u30C7\u30FC\u30BF",t="\u8868\u793A\u3059\u308B\u30C7\u30FC\u30BF\u304C\u3042\u308A\u307E\u305B\u3093\u3002",[[3,"initialized","objectMeta"],[3,"initialized"],["title",""],i,["content",""],[3,"enableEdit",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"enableEdit"],["property",""],["key",""],["whenVisible","",1,"kd-code-block"],["whenEdit",""],[3,"secret","key","editing","onClose"],["whenHidden",""],t]},template:function(t,_){1&t&&(e.\u0275\u0275element(0,"kd-object-meta",0),e.\u0275\u0275elementStart(1,"kd-card",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,L,10,7,"kd-hidden-property",5),e.\u0275\u0275template(6,B,2,0,"ng-container",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("initialized",_.isInitialized)("objectMeta",null==_.secret?null:_.secret.objectMeta),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialized",_.isInitialized),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",_.getDataKeys()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=_.secret&&_.secret.data)))},directives:[I.A,v.A,c.NgForOf,c.NgIf,E.U,H],encapsulation:2}),n})();var K=o(354);const R={path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-list-state"]],decls:1,vars:0,consts:function(){let i;return i="\u30B7\u30FC\u30AF\u30EC\u30C3\u30C8",[["title",i]]},template:function(t,_){1&t&&e.\u0275\u0275element(0,"kd-secret-list",0)},directives:[K.A],encapsulation:2}),n})(),data:{breadcrumb:"Secrets",parent:g.M}},$={path:":resourceNamespace/:resourceName",component:b,data:{breadcrumb:"{{ resourceName }}",parent:R}};let j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[a.RouterModule.forChild([R,$,h.aA])],a.RouterModule]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[O.m,T.K,j]]}),n})()}}]);